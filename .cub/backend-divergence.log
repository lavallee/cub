{"timestamp": "2026-01-28T12:13:22.051198", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": "[]", "difference_summary": "List length mismatch: 30 != 0"}
{"timestamp": "2026-01-28T12:14:48.866353", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": "[]", "difference_summary": "List length mismatch: 30 != 0"}
{"timestamp": "2026-01-28T12:22:42.641606", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": "[]", "difference_summary": "List length mismatch: 30 != 0"}
{"timestamp": "2026-01-28T12:22:51.798269", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": "[]", "difference_summary": "List length mismatch: 30 != 0"}
{"timestamp": "2026-01-28T12:23:02.855417", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": "[]", "difference_summary": "List length mismatch: 30 != 0"}
{"timestamp": "2026-01-28T12:30:53.187377", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": "[]", "difference_summary": "List length mismatch: 30 != 0"}
{"timestamp": "2026-01-28T12:42:17.685184", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": "[]", "difference_summary": "List length mismatch: 30 != 0"}
{"timestamp": "2026-01-28T12:54:31.893245", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": "[]", "difference_summary": "List length mismatch: 12 != 0"}
{"timestamp": "2026-01-28T16:40:11.451009", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": "[]", "difference_summary": "List length mismatch: 30 != 0"}
{"timestamp": "2026-01-28T17:56:01.693547", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 59, "open": 59, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 29, "in_progress": 0, "closed": 0}, "difference_summary": "total: 59 != 29; open: 59 != 29"}
{"timestamp": "2026-01-28T17:56:01.737724", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "open", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": null, "labels": ["blocking", "complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409049Z", "updated_at": "2026-01-28T17:54:44.598534Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}], "secondary_result": [{"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "open", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T17:54:46.169149", "closed_at": null, "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "open", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T17:54:46.169251", "closed_at": null, "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "open", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T17:54:46.169289", "closed_at": null, "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "open", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T17:54:46.169329", "closed_at": null, "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "open", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T17:54:46.169369", "closed_at": null, "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 1 != 5"}
{"timestamp": "2026-01-28T17:56:01.789427", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "open", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": null, "labels": ["blocking", "complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409049Z", "updated_at": "2026-01-28T17:54:44.598534Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}], "secondary_result": [{"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "open", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T17:54:46.169149", "closed_at": null, "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "open", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T17:54:46.169251", "closed_at": null, "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "open", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T17:54:46.169289", "closed_at": null, "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "open", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T17:54:46.169329", "closed_at": null, "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "open", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T17:54:46.169369", "closed_at": null, "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 1 != 5"}
{"timestamp": "2026-01-28T17:56:01.926994", "operation": "update_task", "task_id": "cub-b1a.1", "primary_result": {"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "in_progress", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["blocking", "complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409049Z", "updated_at": "2026-01-28T17:56:01.856607Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "secondary_result": {"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "in_progress", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T17:56:01.925032", "closed_at": null, "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "difference_summary": "labels: ['blocking', 'complexity:high', 'core', 'epic:cub-b1a', 'model:opus', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:opus', 'complexity:high', 'blocking']"}
{"timestamp": "2026-01-28T18:04:02.243523", "operation": "close_task", "task_id": "cub-b1a.1", "primary_result": {"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["blocking", "complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409049Z", "updated_at": "2026-01-28T18:04:02.171447Z", "closed_at": "2026-01-28T18:04:02.171447Z", "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "secondary_result": {"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "difference_summary": "labels: ['blocking', 'complexity:high', 'core', 'epic:cub-b1a', 'model:opus', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:opus', 'complexity:high', 'blocking']"}
{"timestamp": "2026-01-28T18:04:02.315551", "operation": "get_task", "task_id": "cub-b1a.1", "primary_result": {"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["blocking", "complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409049Z", "updated_at": "2026-01-28T18:04:02.171447Z", "closed_at": "2026-01-28T18:04:02.171447Z", "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "secondary_result": {"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "difference_summary": "labels: ['blocking', 'complexity:high', 'core', 'epic:cub-b1a', 'model:opus', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:opus', 'complexity:high', 'blocking']"}
{"timestamp": "2026-01-28T18:04:13.080001", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 58, "open": 58, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 28, "in_progress": 0, "closed": 1}, "difference_summary": "total: 58 != 29; open: 58 != 28; closed: 0 != 1"}
{"timestamp": "2026-01-28T18:04:15.144435", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "open", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409166Z", "updated_at": "2026-01-28T17:54:44.599809Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "open", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": null, "labels": ["complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409206Z", "updated_at": "2026-01-28T17:54:44.600239Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "open", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409236Z", "updated_at": "2026-01-28T17:54:44.600672Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "open", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409259Z", "updated_at": "2026-01-28T17:54:44.601026Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "open", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T17:54:46.169251", "closed_at": null, "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "open", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T17:54:46.169289", "closed_at": null, "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "open", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T17:54:46.169329", "closed_at": null, "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "open", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T17:54:46.169369", "closed_at": null, "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1a.2): labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1a; Task 1 (cub-b1a.3): labels: ['complexity:high', 'core', 'epic:cub-b1a', 'model:opus', 'phase-1', 'refactor', 'risk:high'] != ['phase-1', 'core', 'refactor', 'model:opus', 'complexity:high', 'risk:high']; parent: None != cub-b1a; Task 2 (cub-b1a.4): labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1a; Task 3 (cub-b1a.5): labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1a"}
{"timestamp": "2026-01-28T18:04:15.309261", "operation": "update_task", "task_id": "cub-b1a.2", "primary_result": {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "in_progress", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409166Z", "updated_at": "2026-01-28T18:04:15.219118Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, "secondary_result": {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "in_progress", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:04:15.307723", "closed_at": null, "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, "difference_summary": "labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T18:09:17.084049", "operation": "close_task", "task_id": "cub-b1a.2", "primary_result": {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409166Z", "updated_at": "2026-01-28T18:09:17.031081Z", "closed_at": "2026-01-28T18:09:17.031081Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, "secondary_result": {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, "difference_summary": "labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T18:09:17.160908", "operation": "get_task", "task_id": "cub-b1a.2", "primary_result": {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409166Z", "updated_at": "2026-01-28T18:09:17.031081Z", "closed_at": "2026-01-28T18:09:17.031081Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, "secondary_result": {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, "difference_summary": "labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T18:09:25.155207", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 57, "open": 57, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 27, "in_progress": 0, "closed": 2}, "difference_summary": "total: 57 != 29; open: 57 != 27; closed: 0 != 2"}
{"timestamp": "2026-01-28T18:09:27.233152", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "open", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": null, "labels": ["complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409206Z", "updated_at": "2026-01-28T17:54:44.600239Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "open", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409236Z", "updated_at": "2026-01-28T17:54:44.600672Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "open", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409259Z", "updated_at": "2026-01-28T17:54:44.601026Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "open", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T17:54:46.169289", "closed_at": null, "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "open", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T17:54:46.169329", "closed_at": null, "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "open", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T17:54:46.169369", "closed_at": null, "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1a.3): labels: ['complexity:high', 'core', 'epic:cub-b1a', 'model:opus', 'phase-1', 'refactor', 'risk:high'] != ['phase-1', 'core', 'refactor', 'model:opus', 'complexity:high', 'risk:high']; parent: None != cub-b1a; Task 1 (cub-b1a.4): labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1a; Task 2 (cub-b1a.5): labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1a"}
{"timestamp": "2026-01-28T18:09:27.426285", "operation": "update_task", "task_id": "cub-b1a.3", "primary_result": {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "in_progress", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-175601", "labels": ["complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409206Z", "updated_at": "2026-01-28T18:09:27.325121Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "secondary_result": {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "in_progress", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:09:27.424174", "closed_at": null, "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "difference_summary": "labels: ['complexity:high', 'core', 'epic:cub-b1a', 'model:opus', 'phase-1', 'refactor', 'risk:high'] != ['phase-1', 'core', 'refactor', 'model:opus', 'complexity:high', 'risk:high']"}
{"timestamp": "2026-01-28T18:39:43.802963", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 57, "open": 56, "in_progress": 1, "closed": 0}, "secondary_result": {"total": 29, "open": 26, "in_progress": 1, "closed": 2}, "difference_summary": "total: 57 != 29; open: 56 != 26; closed: 0 != 2"}
{"timestamp": "2026-01-28T18:39:43.865454", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "in_progress", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-175601", "labels": ["complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409206Z", "updated_at": "2026-01-28T18:09:37.984900Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "open", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409236Z", "updated_at": "2026-01-28T17:54:44.600672Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "open", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409259Z", "updated_at": "2026-01-28T17:54:44.601026Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "open", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T17:54:46.169329", "closed_at": null, "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "open", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T17:54:46.169369", "closed_at": null, "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 3 != 2"}
{"timestamp": "2026-01-28T18:39:43.946747", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "in_progress", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-175601", "labels": ["complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409206Z", "updated_at": "2026-01-28T18:09:37.984900Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "open", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409236Z", "updated_at": "2026-01-28T17:54:44.600672Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "open", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409259Z", "updated_at": "2026-01-28T17:54:44.601026Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "open", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T17:54:46.169329", "closed_at": null, "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "open", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T17:54:46.169369", "closed_at": null, "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 3 != 2"}
{"timestamp": "2026-01-28T18:39:44.020967", "operation": "get_task", "task_id": "cub-b1a.3", "primary_result": {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "in_progress", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-175601", "labels": ["complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409206Z", "updated_at": "2026-01-28T18:09:37.984900Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "secondary_result": {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "in_progress", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:09:27.424174", "closed_at": null, "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "difference_summary": "labels: ['complexity:high', 'core', 'epic:cub-b1a', 'model:opus', 'phase-1', 'refactor', 'risk:high'] != ['phase-1', 'core', 'refactor', 'model:opus', 'complexity:high', 'risk:high']"}
{"timestamp": "2026-01-28T18:39:44.156197", "operation": "update_task", "task_id": "cub-b1a.3", "primary_result": {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "in_progress", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409206Z", "updated_at": "2026-01-28T18:39:44.094849Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "secondary_result": {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "in_progress", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:39:44.154676", "closed_at": null, "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "difference_summary": "labels: ['complexity:high', 'core', 'epic:cub-b1a', 'model:opus', 'phase-1', 'refactor', 'risk:high'] != ['phase-1', 'core', 'refactor', 'model:opus', 'complexity:high', 'risk:high']"}
{"timestamp": "2026-01-28T18:41:42.478897", "operation": "get_task", "task_id": "cub-b1a.3", "primary_result": {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409206Z", "updated_at": "2026-01-28T18:41:17.671009Z", "closed_at": "2026-01-28T18:41:17.671009Z", "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "secondary_result": {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "in_progress", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:39:44.154676", "closed_at": null, "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['complexity:high', 'core', 'epic:cub-b1a', 'model:opus', 'phase-1', 'refactor', 'risk:high'] != ['phase-1', 'core', 'refactor', 'model:opus', 'complexity:high', 'risk:high']"}
{"timestamp": "2026-01-28T18:41:42.557243", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 56, "open": 56, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 26, "in_progress": 1, "closed": 2}, "difference_summary": "total: 56 != 29; open: 56 != 26; in_progress: 0 != 1; closed: 0 != 2"}
{"timestamp": "2026-01-28T18:41:42.746247", "operation": "close_task", "task_id": "cub-b1a.3", "primary_result": {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409206Z", "updated_at": "2026-01-28T18:41:42.631490Z", "closed_at": "2026-01-28T18:41:42.631490Z", "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "secondary_result": {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "difference_summary": "labels: ['complexity:high', 'core', 'epic:cub-b1a', 'model:opus', 'phase-1', 'refactor', 'risk:high'] != ['phase-1', 'core', 'refactor', 'model:opus', 'complexity:high', 'risk:high']"}
{"timestamp": "2026-01-28T18:41:42.869220", "operation": "get_task", "task_id": "cub-b1a.3", "primary_result": {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409206Z", "updated_at": "2026-01-28T18:41:42.631490Z", "closed_at": "2026-01-28T18:41:42.631490Z", "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "secondary_result": {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "difference_summary": "labels: ['complexity:high', 'core', 'epic:cub-b1a', 'model:opus', 'phase-1', 'refactor', 'risk:high'] != ['phase-1', 'core', 'refactor', 'model:opus', 'complexity:high', 'risk:high']"}
{"timestamp": "2026-01-28T18:41:51.907101", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "open", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409236Z", "updated_at": "2026-01-28T17:54:44.600672Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "open", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409259Z", "updated_at": "2026-01-28T17:54:44.601026Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "open", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T17:54:46.169329", "closed_at": null, "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "open", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T17:54:46.169369", "closed_at": null, "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1a.4): labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1a; Task 1 (cub-b1a.5): labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1a"}
{"timestamp": "2026-01-28T18:41:51.962427", "operation": "get_task", "task_id": "cub-b1a.4", "primary_result": {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "open", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409236Z", "updated_at": "2026-01-28T17:54:44.600672Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "open", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T17:54:46.169329", "closed_at": null, "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "difference_summary": "labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T18:41:52.102329", "operation": "update_task", "task_id": "cub-b1a.4", "primary_result": {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "in_progress", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409236Z", "updated_at": "2026-01-28T18:41:52.017847Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "in_progress", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:41:52.100544", "closed_at": null, "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T18:47:30.475977", "operation": "get_task", "task_id": "cub-b1a.4", "primary_result": {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409236Z", "updated_at": "2026-01-28T18:46:57.789762Z", "closed_at": "2026-01-28T18:46:57.789762Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "in_progress", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:41:52.100544", "closed_at": null, "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T18:47:30.533399", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 55, "open": 55, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 25, "in_progress": 1, "closed": 3}, "difference_summary": "total: 55 != 29; open: 55 != 25; in_progress: 0 != 1; closed: 0 != 3"}
{"timestamp": "2026-01-28T18:47:30.642380", "operation": "close_task", "task_id": "cub-b1a.4", "primary_result": {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409236Z", "updated_at": "2026-01-28T18:47:30.584182Z", "closed_at": "2026-01-28T18:47:30.584182Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T18:47:30.699345", "operation": "get_task", "task_id": "cub-b1a.4", "primary_result": {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409236Z", "updated_at": "2026-01-28T18:47:30.584182Z", "closed_at": "2026-01-28T18:47:30.584182Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T18:47:41.467395", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "open", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409259Z", "updated_at": "2026-01-28T17:54:44.601026Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "open", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T17:54:46.169369", "closed_at": null, "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1a.5): labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1a"}
{"timestamp": "2026-01-28T18:47:41.530801", "operation": "get_task", "task_id": "cub-b1a.5", "primary_result": {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "open", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409259Z", "updated_at": "2026-01-28T17:54:44.601026Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "open", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T17:54:46.169369", "closed_at": null, "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "difference_summary": "labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T18:47:41.661145", "operation": "update_task", "task_id": "cub-b1a.5", "primary_result": {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "in_progress", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409259Z", "updated_at": "2026-01-28T18:47:41.582832Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "in_progress", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:47:41.659876", "closed_at": null, "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T18:57:10.667694", "operation": "get_task", "task_id": "cub-b1a.5", "primary_result": {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409259Z", "updated_at": "2026-01-28T18:56:48.615534Z", "closed_at": "2026-01-28T18:56:48.615534Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "in_progress", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:47:41.659876", "closed_at": null, "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T18:57:10.729474", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 54, "open": 54, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 24, "in_progress": 1, "closed": 4}, "difference_summary": "total: 54 != 29; open: 54 != 24; in_progress: 0 != 1; closed: 0 != 4"}
{"timestamp": "2026-01-28T18:57:10.836512", "operation": "close_task", "task_id": "cub-b1a.5", "primary_result": {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409259Z", "updated_at": "2026-01-28T18:57:10.777781Z", "closed_at": "2026-01-28T18:57:10.777781Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T18:57:10.894924", "operation": "get_task", "task_id": "cub-b1a.5", "primary_result": {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409259Z", "updated_at": "2026-01-28T18:57:10.777781Z", "closed_at": "2026-01-28T18:57:10.777781Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T18:57:22.568763", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 54, "open": 54, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 24, "in_progress": 0, "closed": 5}, "difference_summary": "total: 54 != 29; open: 54 != 24; closed: 0 != 5"}
{"timestamp": "2026-01-28T18:57:26.427309", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 54, "open": 54, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 23, "in_progress": 0, "closed": 6}, "difference_summary": "total: 54 != 29; open: 54 != 23; closed: 0 != 6"}
{"timestamp": "2026-01-28T18:57:26.482813", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "open", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": null, "labels": ["cleanup", "complexity:medium", "core", "epic:cub-b1b", "model:sonnet", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409281Z", "updated_at": "2026-01-28T17:54:44.601443Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "open", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": null, "labels": ["cleanup", "complexity:medium", "core", "epic:cub-b1b", "model:sonnet", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409303Z", "updated_at": "2026-01-28T17:54:44.601815Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "open", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": null, "labels": ["cleanup", "complexity:low", "core", "epic:cub-b1b", "model:sonnet", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409322Z", "updated_at": "2026-01-28T17:54:44.602195Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "open", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": null, "labels": ["cleanup", "complexity:low", "core", "epic:cub-b1b", "model:haiku", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409340Z", "updated_at": "2026-01-28T17:54:44.602580Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "open", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": null, "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169408", "updated_at": "2026-01-28T17:54:46.169409", "closed_at": null, "acceptance_criteria": ["Zero Rich imports in `core/review/`", "`cli/review/display.py` handles all review rendering", "`cub review` command output unchanged from user's perspective", "Tests pass"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "open", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": null, "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T17:54:46.169430", "closed_at": null, "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "open", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": null, "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T17:54:46.169448", "closed_at": null, "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "", "complexity_label": "low", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "open", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": null, "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T17:54:46.169467", "closed_at": null, "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "open", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": null, "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T17:54:46.169492", "closed_at": null, "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 4 != 5"}
{"timestamp": "2026-01-28T18:57:26.542302", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "open", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": null, "labels": ["cleanup", "complexity:medium", "core", "epic:cub-b1b", "model:sonnet", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409281Z", "updated_at": "2026-01-28T17:54:44.601443Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "open", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": null, "labels": ["cleanup", "complexity:medium", "core", "epic:cub-b1b", "model:sonnet", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409303Z", "updated_at": "2026-01-28T17:54:44.601815Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "open", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": null, "labels": ["cleanup", "complexity:low", "core", "epic:cub-b1b", "model:sonnet", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409322Z", "updated_at": "2026-01-28T17:54:44.602195Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "open", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": null, "labels": ["cleanup", "complexity:low", "core", "epic:cub-b1b", "model:haiku", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409340Z", "updated_at": "2026-01-28T17:54:44.602580Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "open", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": null, "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169408", "updated_at": "2026-01-28T17:54:46.169409", "closed_at": null, "acceptance_criteria": ["Zero Rich imports in `core/review/`", "`cli/review/display.py` handles all review rendering", "`cub review` command output unchanged from user's perspective", "Tests pass"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "open", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": null, "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T17:54:46.169430", "closed_at": null, "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "open", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": null, "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T17:54:46.169448", "closed_at": null, "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "", "complexity_label": "low", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "open", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": null, "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T17:54:46.169467", "closed_at": null, "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "open", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": null, "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T17:54:46.169492", "closed_at": null, "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 4 != 5"}
{"timestamp": "2026-01-28T18:57:26.587732", "operation": "get_task", "task_id": "cub-b1b.1", "primary_result": {"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "open", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": null, "labels": ["cleanup", "complexity:medium", "core", "epic:cub-b1b", "model:sonnet", "phase-2"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:44.409281Z", "updated_at": "2026-01-28T17:54:44.601443Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "open", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": null, "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169408", "updated_at": "2026-01-28T17:54:46.169409", "closed_at": null, "acceptance_criteria": ["Zero Rich imports in `core/review/`", "`cli/review/display.py` handles all review rendering", "`cub review` command output unchanged from user's perspective", "Tests pass"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "difference_summary": "labels: ['cleanup', 'complexity:medium', 'core', 'epic:cub-b1b', 'model:sonnet', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T18:57:26.709862", "operation": "update_task", "task_id": "cub-b1b.1", "primary_result": {"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "in_progress", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["cleanup", "complexity:medium", "core", "epic:cub-b1b", "model:sonnet", "phase-2"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:44.409281Z", "updated_at": "2026-01-28T18:57:26.636405Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "in_progress", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169408", "updated_at": "2026-01-28T18:57:26.708296", "closed_at": null, "acceptance_criteria": ["Zero Rich imports in `core/review/`", "`cli/review/display.py` handles all review rendering", "`cub review` command output unchanged from user's perspective", "Tests pass"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['cleanup', 'complexity:medium', 'core', 'epic:cub-b1b', 'model:sonnet', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T19:02:20.523509", "operation": "get_task", "task_id": "cub-b1b.1", "primary_result": {"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["cleanup", "complexity:medium", "core", "epic:cub-b1b", "model:sonnet", "phase-2"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:44.409281Z", "updated_at": "2026-01-28T19:01:49.864823Z", "closed_at": "2026-01-28T19:01:49.864823Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "in_progress", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169408", "updated_at": "2026-01-28T18:57:26.708296", "closed_at": null, "acceptance_criteria": ["Zero Rich imports in `core/review/`", "`cli/review/display.py` handles all review rendering", "`cub review` command output unchanged from user's perspective", "Tests pass"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['cleanup', 'complexity:medium', 'core', 'epic:cub-b1b', 'model:sonnet', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T19:02:20.583936", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 53, "open": 53, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 22, "in_progress": 1, "closed": 6}, "difference_summary": "total: 53 != 29; open: 53 != 22; in_progress: 0 != 1; closed: 0 != 6"}
{"timestamp": "2026-01-28T19:02:20.691410", "operation": "close_task", "task_id": "cub-b1b.1", "primary_result": {"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["cleanup", "complexity:medium", "core", "epic:cub-b1b", "model:sonnet", "phase-2"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:44.409281Z", "updated_at": "2026-01-28T19:02:20.632650Z", "closed_at": "2026-01-28T19:02:20.632650Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169408", "updated_at": "2026-01-28T19:02:20.690087", "closed_at": "2026-01-28T19:02:20.690062", "acceptance_criteria": ["Zero Rich imports in `core/review/`", "`cli/review/display.py` handles all review rendering", "`cub review` command output unchanged from user's perspective", "Tests pass"], "notes": "[Closed: 2026-01-28T19:02:20.690089] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['cleanup', 'complexity:medium', 'core', 'epic:cub-b1b', 'model:sonnet', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T19:02:20.752319", "operation": "get_task", "task_id": "cub-b1b.1", "primary_result": {"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["cleanup", "complexity:medium", "core", "epic:cub-b1b", "model:sonnet", "phase-2"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:44.409281Z", "updated_at": "2026-01-28T19:02:20.632650Z", "closed_at": "2026-01-28T19:02:20.632650Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169408", "updated_at": "2026-01-28T19:02:20.690087", "closed_at": "2026-01-28T19:02:20.690062", "acceptance_criteria": ["Zero Rich imports in `core/review/`", "`cli/review/display.py` handles all review rendering", "`cub review` command output unchanged from user's perspective", "Tests pass"], "notes": "[Closed: 2026-01-28T19:02:20.690089] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['cleanup', 'complexity:medium', 'core', 'epic:cub-b1b', 'model:sonnet', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T19:02:31.192396", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "open", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": null, "labels": ["cleanup", "complexity:medium", "core", "epic:cub-b1b", "model:sonnet", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409303Z", "updated_at": "2026-01-28T17:54:44.601815Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "open", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": null, "labels": ["cleanup", "complexity:low", "core", "epic:cub-b1b", "model:sonnet", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409322Z", "updated_at": "2026-01-28T17:54:44.602195Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "open", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": null, "labels": ["cleanup", "complexity:low", "core", "epic:cub-b1b", "model:haiku", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409340Z", "updated_at": "2026-01-28T17:54:44.602580Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "open", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": null, "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T17:54:46.169430", "closed_at": null, "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "open", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": null, "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T17:54:46.169448", "closed_at": null, "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "", "complexity_label": "low", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "open", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": null, "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T17:54:46.169467", "closed_at": null, "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "open", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": null, "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T17:54:46.169492", "closed_at": null, "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 3 != 4"}
{"timestamp": "2026-01-28T19:02:31.295470", "operation": "get_task", "task_id": "cub-b1b.2", "primary_result": {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "open", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": null, "labels": ["cleanup", "complexity:medium", "core", "epic:cub-b1b", "model:sonnet", "phase-2"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:44.409303Z", "updated_at": "2026-01-28T17:54:44.601815Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "open", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": null, "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T17:54:46.169430", "closed_at": null, "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "difference_summary": "labels: ['cleanup', 'complexity:medium', 'core', 'epic:cub-b1b', 'model:sonnet', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T19:02:31.508624", "operation": "update_task", "task_id": "cub-b1b.2", "primary_result": {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "in_progress", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["cleanup", "complexity:medium", "core", "epic:cub-b1b", "model:sonnet", "phase-2"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:44.409303Z", "updated_at": "2026-01-28T19:02:31.389786Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "in_progress", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T19:02:31.506291", "closed_at": null, "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['cleanup', 'complexity:medium', 'core', 'epic:cub-b1b', 'model:sonnet', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T19:12:49.656896", "operation": "get_task", "task_id": "cub-b1b.2", "primary_result": {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "closed", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["cleanup", "complexity:medium", "core", "epic:cub-b1b", "model:sonnet", "phase-2"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:44.409303Z", "updated_at": "2026-01-28T19:12:24.478795Z", "closed_at": "2026-01-28T19:12:24.478795Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "in_progress", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T19:02:31.506291", "closed_at": null, "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['cleanup', 'complexity:medium', 'core', 'epic:cub-b1b', 'model:sonnet', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T19:12:49.714308", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 52, "open": 52, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 21, "in_progress": 1, "closed": 7}, "difference_summary": "total: 52 != 29; open: 52 != 21; in_progress: 0 != 1; closed: 0 != 7"}
{"timestamp": "2026-01-28T19:12:49.836264", "operation": "close_task", "task_id": "cub-b1b.2", "primary_result": {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "closed", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["cleanup", "complexity:medium", "core", "epic:cub-b1b", "model:sonnet", "phase-2"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:44.409303Z", "updated_at": "2026-01-28T19:12:49.758027Z", "closed_at": "2026-01-28T19:12:49.758027Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "closed", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T19:12:49.833208", "closed_at": "2026-01-28T19:12:49.833201", "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "[Closed: 2026-01-28T19:12:49.833211] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['cleanup', 'complexity:medium', 'core', 'epic:cub-b1b', 'model:sonnet', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T19:12:49.910849", "operation": "get_task", "task_id": "cub-b1b.2", "primary_result": {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "closed", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["cleanup", "complexity:medium", "core", "epic:cub-b1b", "model:sonnet", "phase-2"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:44.409303Z", "updated_at": "2026-01-28T19:12:49.758027Z", "closed_at": "2026-01-28T19:12:49.758027Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "closed", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T19:12:49.833208", "closed_at": "2026-01-28T19:12:49.833201", "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "[Closed: 2026-01-28T19:12:49.833211] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['cleanup', 'complexity:medium', 'core', 'epic:cub-b1b', 'model:sonnet', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T19:13:00.752225", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "open", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": null, "labels": ["cleanup", "complexity:low", "core", "epic:cub-b1b", "model:sonnet", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409322Z", "updated_at": "2026-01-28T17:54:44.602195Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "open", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": null, "labels": ["cleanup", "complexity:low", "core", "epic:cub-b1b", "model:haiku", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409340Z", "updated_at": "2026-01-28T17:54:44.602580Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "open", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": null, "labels": ["cleanup", "complexity:low", "core", "epic:cub-b1b", "model:haiku", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409364Z", "updated_at": "2026-01-28T17:54:44.602960Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "open", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": null, "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T17:54:46.169448", "closed_at": null, "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "", "complexity_label": "low", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "open", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": null, "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T17:54:46.169467", "closed_at": null, "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "open", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": null, "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T17:54:46.169492", "closed_at": null, "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1b.3): labels: ['cleanup', 'complexity:low', 'core', 'epic:cub-b1b', 'model:sonnet', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:sonnet', 'complexity:low']; parent: None != cub-b1b; Task 1 (cub-b1b.4): labels: ['cleanup', 'complexity:low', 'core', 'epic:cub-b1b', 'model:haiku', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:haiku', 'complexity:low']; parent: None != cub-b1b; Task 2 (cub-b1b.5): labels: ['cleanup', 'complexity:low', 'core', 'epic:cub-b1b', 'model:haiku', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:haiku', 'complexity:low']; parent: None != cub-b1b"}
{"timestamp": "2026-01-28T19:13:00.832618", "operation": "get_task", "task_id": "cub-b1b.3", "primary_result": {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "open", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": null, "labels": ["cleanup", "complexity:low", "core", "epic:cub-b1b", "model:sonnet", "phase-2"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:44.409322Z", "updated_at": "2026-01-28T17:54:44.602195Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "open", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": null, "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T17:54:46.169448", "closed_at": null, "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "", "complexity_label": "low", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "difference_summary": "labels: ['cleanup', 'complexity:low', 'core', 'epic:cub-b1b', 'model:sonnet', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:sonnet', 'complexity:low']"}
{"timestamp": "2026-01-28T19:13:01.014661", "operation": "update_task", "task_id": "cub-b1b.3", "primary_result": {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "in_progress", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["cleanup", "complexity:low", "core", "epic:cub-b1b", "model:sonnet", "phase-2"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:44.409322Z", "updated_at": "2026-01-28T19:13:00.925367Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "in_progress", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T19:13:01.013273", "closed_at": null, "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['cleanup', 'complexity:low', 'core', 'epic:cub-b1b', 'model:sonnet', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:sonnet', 'complexity:low']"}
{"timestamp": "2026-01-28T19:16:59.743579", "operation": "get_task", "task_id": "cub-b1b.3", "primary_result": {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["cleanup", "complexity:low", "core", "epic:cub-b1b", "model:sonnet", "phase-2"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:44.409322Z", "updated_at": "2026-01-28T19:16:32.564232Z", "closed_at": "2026-01-28T19:16:32.564232Z", "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "in_progress", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T19:13:01.013273", "closed_at": null, "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['cleanup', 'complexity:low', 'core', 'epic:cub-b1b', 'model:sonnet', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:sonnet', 'complexity:low']"}
{"timestamp": "2026-01-28T19:16:59.800815", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 51, "open": 51, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 20, "in_progress": 1, "closed": 8}, "difference_summary": "total: 51 != 29; open: 51 != 20; in_progress: 0 != 1; closed: 0 != 8"}
{"timestamp": "2026-01-28T19:16:59.894409", "operation": "close_task", "task_id": "cub-b1b.3", "primary_result": {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["cleanup", "complexity:low", "core", "epic:cub-b1b", "model:sonnet", "phase-2"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:44.409322Z", "updated_at": "2026-01-28T19:16:59.839200Z", "closed_at": "2026-01-28T19:16:59.839200Z", "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T19:16:59.892654", "closed_at": "2026-01-28T19:16:59.892650", "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "[Closed: 2026-01-28T19:16:59.892655] Completed by autonomous execution", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['cleanup', 'complexity:low', 'core', 'epic:cub-b1b', 'model:sonnet', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:sonnet', 'complexity:low']"}
{"timestamp": "2026-01-28T19:16:59.952561", "operation": "get_task", "task_id": "cub-b1b.3", "primary_result": {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["cleanup", "complexity:low", "core", "epic:cub-b1b", "model:sonnet", "phase-2"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:44.409322Z", "updated_at": "2026-01-28T19:16:59.839200Z", "closed_at": "2026-01-28T19:16:59.839200Z", "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T19:16:59.892654", "closed_at": "2026-01-28T19:16:59.892650", "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "[Closed: 2026-01-28T19:16:59.892655] Completed by autonomous execution", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['cleanup', 'complexity:low', 'core', 'epic:cub-b1b', 'model:sonnet', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:sonnet', 'complexity:low']"}
{"timestamp": "2026-01-28T19:17:09.081162", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "open", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": null, "labels": ["cleanup", "complexity:low", "core", "epic:cub-b1b", "model:haiku", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409340Z", "updated_at": "2026-01-28T17:54:44.602580Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "open", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": null, "labels": ["cleanup", "complexity:low", "core", "epic:cub-b1b", "model:haiku", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409364Z", "updated_at": "2026-01-28T17:54:44.602960Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "open", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": null, "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T17:54:46.169467", "closed_at": null, "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "open", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": null, "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T17:54:46.169492", "closed_at": null, "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1b.4): labels: ['cleanup', 'complexity:low', 'core', 'epic:cub-b1b', 'model:haiku', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:haiku', 'complexity:low']; parent: None != cub-b1b; Task 1 (cub-b1b.5): labels: ['cleanup', 'complexity:low', 'core', 'epic:cub-b1b', 'model:haiku', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:haiku', 'complexity:low']; parent: None != cub-b1b"}
{"timestamp": "2026-01-28T19:17:09.133709", "operation": "get_task", "task_id": "cub-b1b.4", "primary_result": {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "open", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": null, "labels": ["cleanup", "complexity:low", "core", "epic:cub-b1b", "model:haiku", "phase-2"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:44.409340Z", "updated_at": "2026-01-28T17:54:44.602580Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "open", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": null, "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T17:54:46.169467", "closed_at": null, "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 1}, "difference_summary": "labels: ['cleanup', 'complexity:low', 'core', 'epic:cub-b1b', 'model:haiku', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:haiku', 'complexity:low']"}
{"timestamp": "2026-01-28T19:17:09.256738", "operation": "update_task", "task_id": "cub-b1b.4", "primary_result": {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "in_progress", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["cleanup", "complexity:low", "core", "epic:cub-b1b", "model:haiku", "phase-2"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:44.409340Z", "updated_at": "2026-01-28T19:17:09.187179Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "in_progress", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T19:17:09.255105", "closed_at": null, "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['cleanup', 'complexity:low', 'core', 'epic:cub-b1b', 'model:haiku', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:haiku', 'complexity:low']"}
{"timestamp": "2026-01-28T19:18:27.573389", "operation": "get_task", "task_id": "cub-b1b.4", "primary_result": {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "closed", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["cleanup", "complexity:low", "core", "epic:cub-b1b", "model:haiku", "phase-2"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:44.409340Z", "updated_at": "2026-01-28T19:18:15.799561Z", "closed_at": "2026-01-28T19:18:15.799561Z", "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "in_progress", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T19:17:09.255105", "closed_at": null, "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['cleanup', 'complexity:low', 'core', 'epic:cub-b1b', 'model:haiku', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:haiku', 'complexity:low']"}
{"timestamp": "2026-01-28T19:18:27.678574", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 50, "open": 50, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 19, "in_progress": 1, "closed": 9}, "difference_summary": "total: 50 != 29; open: 50 != 19; in_progress: 0 != 1; closed: 0 != 9"}
{"timestamp": "2026-01-28T19:18:27.821734", "operation": "close_task", "task_id": "cub-b1b.4", "primary_result": {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "closed", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["cleanup", "complexity:low", "core", "epic:cub-b1b", "model:haiku", "phase-2"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:44.409340Z", "updated_at": "2026-01-28T19:18:27.753324Z", "closed_at": "2026-01-28T19:18:27.753324Z", "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "closed", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T19:18:27.819752", "closed_at": "2026-01-28T19:18:27.819748", "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "[Closed: 2026-01-28T19:18:27.819754] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['cleanup', 'complexity:low', 'core', 'epic:cub-b1b', 'model:haiku', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:haiku', 'complexity:low']"}
{"timestamp": "2026-01-28T19:18:27.888980", "operation": "get_task", "task_id": "cub-b1b.4", "primary_result": {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "closed", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["cleanup", "complexity:low", "core", "epic:cub-b1b", "model:haiku", "phase-2"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:44.409340Z", "updated_at": "2026-01-28T19:18:27.753324Z", "closed_at": "2026-01-28T19:18:27.753324Z", "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "closed", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T19:18:27.819752", "closed_at": "2026-01-28T19:18:27.819748", "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "[Closed: 2026-01-28T19:18:27.819754] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['cleanup', 'complexity:low', 'core', 'epic:cub-b1b', 'model:haiku', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:haiku', 'complexity:low']"}
{"timestamp": "2026-01-28T19:18:36.886633", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "open", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": null, "labels": ["cleanup", "complexity:low", "core", "epic:cub-b1b", "model:haiku", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409364Z", "updated_at": "2026-01-28T17:54:44.602960Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "open", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": null, "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T17:54:46.169492", "closed_at": null, "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1b.5): labels: ['cleanup', 'complexity:low', 'core', 'epic:cub-b1b', 'model:haiku', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:haiku', 'complexity:low']; parent: None != cub-b1b"}
{"timestamp": "2026-01-28T19:18:36.934735", "operation": "get_task", "task_id": "cub-b1b.5", "primary_result": {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "open", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": null, "labels": ["cleanup", "complexity:low", "core", "epic:cub-b1b", "model:haiku", "phase-2"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:44.409364Z", "updated_at": "2026-01-28T17:54:44.602960Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "open", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": null, "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T17:54:46.169492", "closed_at": null, "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 1}, "difference_summary": "labels: ['cleanup', 'complexity:low', 'core', 'epic:cub-b1b', 'model:haiku', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:haiku', 'complexity:low']"}
{"timestamp": "2026-01-28T19:18:37.079360", "operation": "update_task", "task_id": "cub-b1b.5", "primary_result": {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "in_progress", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["cleanup", "complexity:low", "core", "epic:cub-b1b", "model:haiku", "phase-2"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:44.409364Z", "updated_at": "2026-01-28T19:18:36.992612Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "in_progress", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T19:18:37.077578", "closed_at": null, "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['cleanup', 'complexity:low', 'core', 'epic:cub-b1b', 'model:haiku', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:haiku', 'complexity:low']"}
{"timestamp": "2026-01-28T19:20:10.712314", "operation": "get_task", "task_id": "cub-b1b.5", "primary_result": {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "closed", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["cleanup", "complexity:low", "core", "epic:cub-b1b", "model:haiku", "phase-2"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:44.409364Z", "updated_at": "2026-01-28T19:19:56.630947Z", "closed_at": "2026-01-28T19:19:56.630947Z", "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "in_progress", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T19:18:37.077578", "closed_at": null, "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['cleanup', 'complexity:low', 'core', 'epic:cub-b1b', 'model:haiku', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:haiku', 'complexity:low']"}
{"timestamp": "2026-01-28T19:20:10.767173", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 49, "open": 49, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 18, "in_progress": 1, "closed": 10}, "difference_summary": "total: 49 != 29; open: 49 != 18; in_progress: 0 != 1; closed: 0 != 10"}
{"timestamp": "2026-01-28T19:20:10.865356", "operation": "close_task", "task_id": "cub-b1b.5", "primary_result": {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "closed", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["cleanup", "complexity:low", "core", "epic:cub-b1b", "model:haiku", "phase-2"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:44.409364Z", "updated_at": "2026-01-28T19:20:10.807663Z", "closed_at": "2026-01-28T19:20:10.807663Z", "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "closed", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T19:20:10.863075", "closed_at": "2026-01-28T19:20:10.863070", "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "[Closed: 2026-01-28T19:20:10.863078] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['cleanup', 'complexity:low', 'core', 'epic:cub-b1b', 'model:haiku', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:haiku', 'complexity:low']"}
{"timestamp": "2026-01-28T19:20:10.924503", "operation": "get_task", "task_id": "cub-b1b.5", "primary_result": {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "closed", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["cleanup", "complexity:low", "core", "epic:cub-b1b", "model:haiku", "phase-2"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:44.409364Z", "updated_at": "2026-01-28T19:20:10.807663Z", "closed_at": "2026-01-28T19:20:10.807663Z", "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "closed", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T19:20:10.863075", "closed_at": "2026-01-28T19:20:10.863070", "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "[Closed: 2026-01-28T19:20:10.863078] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['cleanup', 'complexity:low', 'core', 'epic:cub-b1b', 'model:haiku', 'phase-2'] != ['phase-2', 'core', 'cleanup', 'model:haiku', 'complexity:low']"}
{"timestamp": "2026-01-28T19:20:21.507074", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 49, "open": 49, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 18, "in_progress": 0, "closed": 11}, "difference_summary": "total: 49 != 29; open: 49 != 18; closed: 0 != 11"}
{"timestamp": "2026-01-28T19:20:25.336444", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 49, "open": 49, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 17, "in_progress": 0, "closed": 12}, "difference_summary": "total: 49 != 29; open: 49 != 17; closed: 0 != 12"}
{"timestamp": "2026-01-28T19:20:25.402360", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "open", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": null, "labels": ["architecture", "blocking", "complexity:high", "core", "epic:cub-b1c", "model:opus", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409427Z", "updated_at": "2026-01-28T17:54:44.603331Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "open", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": null, "labels": ["phase-3", "core", "architecture", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1c.2", "cub-b1c.3", "cub-b1c.4"], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169509", "updated_at": "2026-01-28T17:54:46.169510", "closed_at": null, "acceptance_criteria": ["`RunService` provides the complete API for task execution", "`cli/run.py` only calls `RunService`, not domain modules directly", "Service is stateless \u2014 configuration passed in, no globals", "Tests verify service orchestration"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "open", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": null, "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T17:54:46.169529", "closed_at": null, "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "open", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": null, "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T17:54:46.169545", "closed_at": null, "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "open", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": null, "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T17:54:46.169561", "closed_at": null, "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 1 != 4"}
{"timestamp": "2026-01-28T19:20:25.447371", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "open", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": null, "labels": ["architecture", "blocking", "complexity:high", "core", "epic:cub-b1c", "model:opus", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409427Z", "updated_at": "2026-01-28T17:54:44.603331Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "open", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": null, "labels": ["phase-3", "core", "architecture", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1c.2", "cub-b1c.3", "cub-b1c.4"], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169509", "updated_at": "2026-01-28T17:54:46.169510", "closed_at": null, "acceptance_criteria": ["`RunService` provides the complete API for task execution", "`cli/run.py` only calls `RunService`, not domain modules directly", "Service is stateless \u2014 configuration passed in, no globals", "Tests verify service orchestration"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "open", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": null, "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T17:54:46.169529", "closed_at": null, "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "open", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": null, "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T17:54:46.169545", "closed_at": null, "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "open", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": null, "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T17:54:46.169561", "closed_at": null, "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 1 != 4"}
{"timestamp": "2026-01-28T19:20:25.487355", "operation": "get_task", "task_id": "cub-b1c.1", "primary_result": {"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "open", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": null, "labels": ["architecture", "blocking", "complexity:high", "core", "epic:cub-b1c", "model:opus", "phase-3"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:44.409427Z", "updated_at": "2026-01-28T17:54:44.603331Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "open", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": null, "labels": ["phase-3", "core", "architecture", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1c.2", "cub-b1c.3", "cub-b1c.4"], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169509", "updated_at": "2026-01-28T17:54:46.169510", "closed_at": null, "acceptance_criteria": ["`RunService` provides the complete API for task execution", "`cli/run.py` only calls `RunService`, not domain modules directly", "Service is stateless \u2014 configuration passed in, no globals", "Tests verify service orchestration"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 1}, "difference_summary": "labels: ['architecture', 'blocking', 'complexity:high', 'core', 'epic:cub-b1c', 'model:opus', 'phase-3'] != ['phase-3', 'core', 'architecture', 'model:opus', 'complexity:high', 'blocking']"}
{"timestamp": "2026-01-28T19:20:25.592273", "operation": "update_task", "task_id": "cub-b1c.1", "primary_result": {"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "in_progress", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["architecture", "blocking", "complexity:high", "core", "epic:cub-b1c", "model:opus", "phase-3"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:44.409427Z", "updated_at": "2026-01-28T19:20:25.528997Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "in_progress", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1c.2", "cub-b1c.3", "cub-b1c.4"], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169509", "updated_at": "2026-01-28T19:20:25.585686", "closed_at": null, "acceptance_criteria": ["`RunService` provides the complete API for task execution", "`cli/run.py` only calls `RunService`, not domain modules directly", "Service is stateless \u2014 configuration passed in, no globals", "Tests verify service orchestration"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['architecture', 'blocking', 'complexity:high', 'core', 'epic:cub-b1c', 'model:opus', 'phase-3'] != ['phase-3', 'core', 'architecture', 'model:opus', 'complexity:high', 'blocking']"}
{"timestamp": "2026-01-28T19:30:32.719940", "operation": "get_task", "task_id": "cub-b1c.1", "primary_result": {"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "closed", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["architecture", "blocking", "complexity:high", "core", "epic:cub-b1c", "model:opus", "phase-3"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:44.409427Z", "updated_at": "2026-01-28T19:29:53.012655Z", "closed_at": "2026-01-28T19:29:53.012655Z", "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "in_progress", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1c.2", "cub-b1c.3", "cub-b1c.4"], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169509", "updated_at": "2026-01-28T19:20:25.585686", "closed_at": null, "acceptance_criteria": ["`RunService` provides the complete API for task execution", "`cli/run.py` only calls `RunService`, not domain modules directly", "Service is stateless \u2014 configuration passed in, no globals", "Tests verify service orchestration"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['architecture', 'blocking', 'complexity:high', 'core', 'epic:cub-b1c', 'model:opus', 'phase-3'] != ['phase-3', 'core', 'architecture', 'model:opus', 'complexity:high', 'blocking']"}
{"timestamp": "2026-01-28T19:30:32.799384", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 48, "open": 48, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 16, "in_progress": 1, "closed": 12}, "difference_summary": "total: 48 != 29; open: 48 != 16; in_progress: 0 != 1; closed: 0 != 12"}
{"timestamp": "2026-01-28T19:30:32.963231", "operation": "close_task", "task_id": "cub-b1c.1", "primary_result": {"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "closed", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["architecture", "blocking", "complexity:high", "core", "epic:cub-b1c", "model:opus", "phase-3"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:44.409427Z", "updated_at": "2026-01-28T19:30:32.869903Z", "closed_at": "2026-01-28T19:30:32.869903Z", "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "closed", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1c.2", "cub-b1c.3", "cub-b1c.4"], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169509", "updated_at": "2026-01-28T19:30:32.960816", "closed_at": "2026-01-28T19:30:32.960778", "acceptance_criteria": ["`RunService` provides the complete API for task execution", "`cli/run.py` only calls `RunService`, not domain modules directly", "Service is stateless \u2014 configuration passed in, no globals", "Tests verify service orchestration"], "notes": "[Closed: 2026-01-28T19:30:32.960820] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['architecture', 'blocking', 'complexity:high', 'core', 'epic:cub-b1c', 'model:opus', 'phase-3'] != ['phase-3', 'core', 'architecture', 'model:opus', 'complexity:high', 'blocking']"}
{"timestamp": "2026-01-28T19:30:33.051640", "operation": "get_task", "task_id": "cub-b1c.1", "primary_result": {"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "closed", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["architecture", "blocking", "complexity:high", "core", "epic:cub-b1c", "model:opus", "phase-3"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:44.409427Z", "updated_at": "2026-01-28T19:30:32.869903Z", "closed_at": "2026-01-28T19:30:32.869903Z", "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "closed", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1c.2", "cub-b1c.3", "cub-b1c.4"], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169509", "updated_at": "2026-01-28T19:30:32.960816", "closed_at": "2026-01-28T19:30:32.960778", "acceptance_criteria": ["`RunService` provides the complete API for task execution", "`cli/run.py` only calls `RunService`, not domain modules directly", "Service is stateless \u2014 configuration passed in, no globals", "Tests verify service orchestration"], "notes": "[Closed: 2026-01-28T19:30:32.960820] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['architecture', 'blocking', 'complexity:high', 'core', 'epic:cub-b1c', 'model:opus', 'phase-3'] != ['phase-3', 'core', 'architecture', 'model:opus', 'complexity:high', 'blocking']"}
{"timestamp": "2026-01-28T19:30:43.928660", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "open", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": null, "labels": ["architecture", "complexity:medium", "core", "epic:cub-b1c", "model:sonnet", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409472Z", "updated_at": "2026-01-28T17:54:44.603736Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "open", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": null, "labels": ["architecture", "complexity:medium", "core", "epic:cub-b1c", "model:sonnet", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409515Z", "updated_at": "2026-01-28T17:54:44.604083Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "open", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": null, "labels": ["architecture", "complexity:medium", "core", "epic:cub-b1c", "model:sonnet", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409540Z", "updated_at": "2026-01-28T17:54:44.604480Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "open", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": null, "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T17:54:46.169529", "closed_at": null, "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "open", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": null, "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T17:54:46.169545", "closed_at": null, "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "open", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": null, "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T17:54:46.169561", "closed_at": null, "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1c.2): labels: ['architecture', 'complexity:medium', 'core', 'epic:cub-b1c', 'model:sonnet', 'phase-3'] != ['phase-3', 'core', 'architecture', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1c; Task 1 (cub-b1c.3): labels: ['architecture', 'complexity:medium', 'core', 'epic:cub-b1c', 'model:sonnet', 'phase-3'] != ['phase-3', 'core', 'architecture', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1c; Task 2 (cub-b1c.4): labels: ['architecture', 'complexity:medium', 'core', 'epic:cub-b1c', 'model:sonnet', 'phase-3'] != ['phase-3', 'core', 'architecture', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1c"}
{"timestamp": "2026-01-28T19:30:43.988610", "operation": "get_task", "task_id": "cub-b1c.2", "primary_result": {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "open", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": null, "labels": ["architecture", "complexity:medium", "core", "epic:cub-b1c", "model:sonnet", "phase-3"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:44.409472Z", "updated_at": "2026-01-28T17:54:44.603736Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "open", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": null, "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T17:54:46.169529", "closed_at": null, "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "difference_summary": "labels: ['architecture', 'complexity:medium', 'core', 'epic:cub-b1c', 'model:sonnet', 'phase-3'] != ['phase-3', 'core', 'architecture', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T19:30:44.116308", "operation": "update_task", "task_id": "cub-b1c.2", "primary_result": {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "in_progress", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["architecture", "complexity:medium", "core", "epic:cub-b1c", "model:sonnet", "phase-3"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:44.409472Z", "updated_at": "2026-01-28T19:30:44.046006Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "in_progress", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T19:30:44.114048", "closed_at": null, "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['architecture', 'complexity:medium', 'core', 'epic:cub-b1c', 'model:sonnet', 'phase-3'] != ['phase-3', 'core', 'architecture', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T19:43:16.737058", "operation": "get_task", "task_id": "cub-b1c.2", "primary_result": {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "closed", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["architecture", "complexity:medium", "core", "epic:cub-b1c", "model:sonnet", "phase-3"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:44.409472Z", "updated_at": "2026-01-28T19:42:53.991257Z", "closed_at": "2026-01-28T19:42:53.991257Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "in_progress", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T19:30:44.114048", "closed_at": null, "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['architecture', 'complexity:medium', 'core', 'epic:cub-b1c', 'model:sonnet', 'phase-3'] != ['phase-3', 'core', 'architecture', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T19:43:16.837663", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 47, "open": 47, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 15, "in_progress": 1, "closed": 13}, "difference_summary": "total: 47 != 29; open: 47 != 15; in_progress: 0 != 1; closed: 0 != 13"}
{"timestamp": "2026-01-28T19:43:17.009621", "operation": "close_task", "task_id": "cub-b1c.2", "primary_result": {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "closed", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["architecture", "complexity:medium", "core", "epic:cub-b1c", "model:sonnet", "phase-3"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:44.409472Z", "updated_at": "2026-01-28T19:43:16.920729Z", "closed_at": "2026-01-28T19:43:16.920729Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "closed", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T19:43:16.990826", "closed_at": "2026-01-28T19:43:16.990819", "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T19:43:16.990832] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['architecture', 'complexity:medium', 'core', 'epic:cub-b1c', 'model:sonnet', 'phase-3'] != ['phase-3', 'core', 'architecture', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T19:43:17.090332", "operation": "get_task", "task_id": "cub-b1c.2", "primary_result": {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "closed", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["architecture", "complexity:medium", "core", "epic:cub-b1c", "model:sonnet", "phase-3"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:44.409472Z", "updated_at": "2026-01-28T19:43:16.920729Z", "closed_at": "2026-01-28T19:43:16.920729Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "closed", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T19:43:16.990826", "closed_at": "2026-01-28T19:43:16.990819", "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T19:43:16.990832] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['architecture', 'complexity:medium', 'core', 'epic:cub-b1c', 'model:sonnet', 'phase-3'] != ['phase-3', 'core', 'architecture', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T19:43:29.857738", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "open", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": null, "labels": ["architecture", "complexity:medium", "core", "epic:cub-b1c", "model:sonnet", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409515Z", "updated_at": "2026-01-28T17:54:44.604083Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "open", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": null, "labels": ["architecture", "complexity:medium", "core", "epic:cub-b1c", "model:sonnet", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409540Z", "updated_at": "2026-01-28T17:54:44.604480Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "open", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": null, "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T17:54:46.169545", "closed_at": null, "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "open", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": null, "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T17:54:46.169561", "closed_at": null, "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1c.3): labels: ['architecture', 'complexity:medium', 'core', 'epic:cub-b1c', 'model:sonnet', 'phase-3'] != ['phase-3', 'core', 'architecture', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1c; Task 1 (cub-b1c.4): labels: ['architecture', 'complexity:medium', 'core', 'epic:cub-b1c', 'model:sonnet', 'phase-3'] != ['phase-3', 'core', 'architecture', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1c"}
{"timestamp": "2026-01-28T19:43:29.946870", "operation": "get_task", "task_id": "cub-b1c.3", "primary_result": {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "open", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": null, "labels": ["architecture", "complexity:medium", "core", "epic:cub-b1c", "model:sonnet", "phase-3"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:44.409515Z", "updated_at": "2026-01-28T17:54:44.604083Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "open", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": null, "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T17:54:46.169545", "closed_at": null, "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "difference_summary": "labels: ['architecture', 'complexity:medium', 'core', 'epic:cub-b1c', 'model:sonnet', 'phase-3'] != ['phase-3', 'core', 'architecture', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T19:43:30.147105", "operation": "update_task", "task_id": "cub-b1c.3", "primary_result": {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "in_progress", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["architecture", "complexity:medium", "core", "epic:cub-b1c", "model:sonnet", "phase-3"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:44.409515Z", "updated_at": "2026-01-28T19:43:30.071746Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "in_progress", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T19:43:30.144065", "closed_at": null, "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['architecture', 'complexity:medium', 'core', 'epic:cub-b1c', 'model:sonnet', 'phase-3'] != ['phase-3', 'core', 'architecture', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T19:49:58.224399", "operation": "get_task", "task_id": "cub-b1c.3", "primary_result": {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "closed", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["architecture", "complexity:medium", "core", "epic:cub-b1c", "model:sonnet", "phase-3"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:44.409515Z", "updated_at": "2026-01-28T19:49:24.306958Z", "closed_at": "2026-01-28T19:49:24.306958Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "in_progress", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T19:43:30.144065", "closed_at": null, "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['architecture', 'complexity:medium', 'core', 'epic:cub-b1c', 'model:sonnet', 'phase-3'] != ['phase-3', 'core', 'architecture', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T19:49:58.274198", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 46, "open": 46, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 14, "in_progress": 1, "closed": 14}, "difference_summary": "total: 46 != 29; open: 46 != 14; in_progress: 0 != 1; closed: 0 != 14"}
{"timestamp": "2026-01-28T19:49:58.384027", "operation": "close_task", "task_id": "cub-b1c.3", "primary_result": {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "closed", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["architecture", "complexity:medium", "core", "epic:cub-b1c", "model:sonnet", "phase-3"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:44.409515Z", "updated_at": "2026-01-28T19:49:58.320690Z", "closed_at": "2026-01-28T19:49:58.320690Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "closed", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T19:49:58.382182", "closed_at": "2026-01-28T19:49:58.382177", "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "[Closed: 2026-01-28T19:49:58.382184] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['architecture', 'complexity:medium', 'core', 'epic:cub-b1c', 'model:sonnet', 'phase-3'] != ['phase-3', 'core', 'architecture', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T19:49:58.438619", "operation": "get_task", "task_id": "cub-b1c.3", "primary_result": {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "closed", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["architecture", "complexity:medium", "core", "epic:cub-b1c", "model:sonnet", "phase-3"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:44.409515Z", "updated_at": "2026-01-28T19:49:58.320690Z", "closed_at": "2026-01-28T19:49:58.320690Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "closed", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T19:49:58.382182", "closed_at": "2026-01-28T19:49:58.382177", "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "[Closed: 2026-01-28T19:49:58.382184] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['architecture', 'complexity:medium', 'core', 'epic:cub-b1c', 'model:sonnet', 'phase-3'] != ['phase-3', 'core', 'architecture', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T19:50:09.257342", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "open", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": null, "labels": ["architecture", "complexity:medium", "core", "epic:cub-b1c", "model:sonnet", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409540Z", "updated_at": "2026-01-28T17:54:44.604480Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "open", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": null, "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T17:54:46.169561", "closed_at": null, "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1c.4): labels: ['architecture', 'complexity:medium', 'core', 'epic:cub-b1c', 'model:sonnet', 'phase-3'] != ['phase-3', 'core', 'architecture', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1c"}
{"timestamp": "2026-01-28T19:50:09.356297", "operation": "get_task", "task_id": "cub-b1c.4", "primary_result": {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "open", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": null, "labels": ["architecture", "complexity:medium", "core", "epic:cub-b1c", "model:sonnet", "phase-3"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:44.409540Z", "updated_at": "2026-01-28T17:54:44.604480Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "open", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": null, "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T17:54:46.169561", "closed_at": null, "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "difference_summary": "labels: ['architecture', 'complexity:medium', 'core', 'epic:cub-b1c', 'model:sonnet', 'phase-3'] != ['phase-3', 'core', 'architecture', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T19:50:09.538773", "operation": "update_task", "task_id": "cub-b1c.4", "primary_result": {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "in_progress", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["architecture", "complexity:medium", "core", "epic:cub-b1c", "model:sonnet", "phase-3"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:44.409540Z", "updated_at": "2026-01-28T19:50:09.444637Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "in_progress", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T19:50:09.536463", "closed_at": null, "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['architecture', 'complexity:medium', 'core', 'epic:cub-b1c', 'model:sonnet', 'phase-3'] != ['phase-3', 'core', 'architecture', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T19:58:57.648544", "operation": "get_task", "task_id": "cub-b1c.4", "primary_result": {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "closed", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["architecture", "complexity:medium", "core", "epic:cub-b1c", "model:sonnet", "phase-3"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:44.409540Z", "updated_at": "2026-01-28T19:58:38.156789Z", "closed_at": "2026-01-28T19:58:38.156789Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "in_progress", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T19:50:09.536463", "closed_at": null, "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['architecture', 'complexity:medium', 'core', 'epic:cub-b1c', 'model:sonnet', 'phase-3'] != ['phase-3', 'core', 'architecture', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T19:58:57.711343", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 45, "open": 45, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 13, "in_progress": 1, "closed": 15}, "difference_summary": "total: 45 != 29; open: 45 != 13; in_progress: 0 != 1; closed: 0 != 15"}
{"timestamp": "2026-01-28T19:58:57.830391", "operation": "close_task", "task_id": "cub-b1c.4", "primary_result": {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "closed", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["architecture", "complexity:medium", "core", "epic:cub-b1c", "model:sonnet", "phase-3"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:44.409540Z", "updated_at": "2026-01-28T19:58:57.761965Z", "closed_at": "2026-01-28T19:58:57.761965Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "closed", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T19:58:57.828806", "closed_at": "2026-01-28T19:58:57.828802", "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "[Closed: 2026-01-28T19:58:57.828808] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['architecture', 'complexity:medium', 'core', 'epic:cub-b1c', 'model:sonnet', 'phase-3'] != ['phase-3', 'core', 'architecture', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T19:58:57.912773", "operation": "get_task", "task_id": "cub-b1c.4", "primary_result": {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "closed", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["architecture", "complexity:medium", "core", "epic:cub-b1c", "model:sonnet", "phase-3"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:44.409540Z", "updated_at": "2026-01-28T19:58:57.761965Z", "closed_at": "2026-01-28T19:58:57.761965Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "closed", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T19:58:57.828806", "closed_at": "2026-01-28T19:58:57.828802", "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "[Closed: 2026-01-28T19:58:57.828808] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['architecture', 'complexity:medium', 'core', 'epic:cub-b1c', 'model:sonnet', 'phase-3'] != ['phase-3', 'core', 'architecture', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T19:59:09.233441", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 45, "open": 45, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 13, "in_progress": 0, "closed": 16}, "difference_summary": "total: 45 != 29; open: 45 != 13; closed: 0 != 16"}
{"timestamp": "2026-01-28T19:59:14.170523", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 45, "open": 45, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 12, "in_progress": 0, "closed": 17}, "difference_summary": "total: 45 != 29; open: 45 != 12; closed: 0 != 17"}
{"timestamp": "2026-01-28T19:59:14.229840", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "open", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": null, "labels": ["blocking", "complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409562Z", "updated_at": "2026-01-28T17:54:44.604821Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "open", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": null, "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium", "blocking"], "depends_on": [], "blocks": ["cub-b1d.2", "cub-b1d.3"], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169582", "updated_at": "2026-01-28T17:54:46.169582", "closed_at": null, "acceptance_criteria": ["All four sources produce relevant suggestions from real project data", "`TaskSource` detects the 9 stale epics in current project", "`GitSource` detects unpushed work and stale branches", "`MilestoneSource` infers 0.30 alpha target from sketches/CHANGELOG", "Models are Pydantic, serializable"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "open", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": null, "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T17:54:46.169599", "closed_at": null, "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "open", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": null, "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T17:54:46.169615", "closed_at": null, "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 1 != 3"}
{"timestamp": "2026-01-28T19:59:14.276376", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "open", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": null, "labels": ["blocking", "complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409562Z", "updated_at": "2026-01-28T17:54:44.604821Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "open", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": null, "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium", "blocking"], "depends_on": [], "blocks": ["cub-b1d.2", "cub-b1d.3"], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169582", "updated_at": "2026-01-28T17:54:46.169582", "closed_at": null, "acceptance_criteria": ["All four sources produce relevant suggestions from real project data", "`TaskSource` detects the 9 stale epics in current project", "`GitSource` detects unpushed work and stale branches", "`MilestoneSource` infers 0.30 alpha target from sketches/CHANGELOG", "Models are Pydantic, serializable"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "open", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": null, "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T17:54:46.169599", "closed_at": null, "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "open", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": null, "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T17:54:46.169615", "closed_at": null, "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 1 != 3"}
{"timestamp": "2026-01-28T19:59:14.323720", "operation": "get_task", "task_id": "cub-b1d.1", "primary_result": {"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "open", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": null, "labels": ["blocking", "complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:44.409562Z", "updated_at": "2026-01-28T17:54:44.604821Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "open", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": null, "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium", "blocking"], "depends_on": [], "blocks": ["cub-b1d.2", "cub-b1d.3"], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169582", "updated_at": "2026-01-28T17:54:46.169582", "closed_at": null, "acceptance_criteria": ["All four sources produce relevant suggestions from real project data", "`TaskSource` detects the 9 stale epics in current project", "`GitSource` detects unpushed work and stale branches", "`MilestoneSource` infers 0.30 alpha target from sketches/CHANGELOG", "Models are Pydantic, serializable"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "difference_summary": "labels: ['blocking', 'complexity:medium', 'core', 'epic:cub-b1d', 'feature', 'model:sonnet', 'phase-4'] != ['phase-4', 'core', 'feature', 'model:sonnet', 'complexity:medium', 'blocking']"}
{"timestamp": "2026-01-28T19:59:14.468117", "operation": "update_task", "task_id": "cub-b1d.1", "primary_result": {"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "in_progress", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["blocking", "complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:44.409562Z", "updated_at": "2026-01-28T19:59:14.386252Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "in_progress", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium", "blocking"], "depends_on": [], "blocks": ["cub-b1d.2", "cub-b1d.3"], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169582", "updated_at": "2026-01-28T19:59:14.466335", "closed_at": null, "acceptance_criteria": ["All four sources produce relevant suggestions from real project data", "`TaskSource` detects the 9 stale epics in current project", "`GitSource` detects unpushed work and stale branches", "`MilestoneSource` infers 0.30 alpha target from sketches/CHANGELOG", "Models are Pydantic, serializable"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['blocking', 'complexity:medium', 'core', 'epic:cub-b1d', 'feature', 'model:sonnet', 'phase-4'] != ['phase-4', 'core', 'feature', 'model:sonnet', 'complexity:medium', 'blocking']"}
{"timestamp": "2026-01-28T20:09:46.276264", "operation": "get_task", "task_id": "cub-b1d.1", "primary_result": {"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "closed", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["blocking", "complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:44.409562Z", "updated_at": "2026-01-28T20:09:20.883659Z", "closed_at": "2026-01-28T20:09:20.883659Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "in_progress", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium", "blocking"], "depends_on": [], "blocks": ["cub-b1d.2", "cub-b1d.3"], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169582", "updated_at": "2026-01-28T19:59:14.466335", "closed_at": null, "acceptance_criteria": ["All four sources produce relevant suggestions from real project data", "`TaskSource` detects the 9 stale epics in current project", "`GitSource` detects unpushed work and stale branches", "`MilestoneSource` infers 0.30 alpha target from sketches/CHANGELOG", "Models are Pydantic, serializable"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['blocking', 'complexity:medium', 'core', 'epic:cub-b1d', 'feature', 'model:sonnet', 'phase-4'] != ['phase-4', 'core', 'feature', 'model:sonnet', 'complexity:medium', 'blocking']"}
{"timestamp": "2026-01-28T20:09:46.341304", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 44, "open": 44, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 11, "in_progress": 1, "closed": 17}, "difference_summary": "total: 44 != 29; open: 44 != 11; in_progress: 0 != 1; closed: 0 != 17"}
{"timestamp": "2026-01-28T20:09:46.526240", "operation": "close_task", "task_id": "cub-b1d.1", "primary_result": {"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "closed", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["blocking", "complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:44.409562Z", "updated_at": "2026-01-28T20:09:46.417360Z", "closed_at": "2026-01-28T20:09:46.417360Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "closed", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium", "blocking"], "depends_on": [], "blocks": ["cub-b1d.2", "cub-b1d.3"], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169582", "updated_at": "2026-01-28T20:09:46.523423", "closed_at": "2026-01-28T20:09:46.523370", "acceptance_criteria": ["All four sources produce relevant suggestions from real project data", "`TaskSource` detects the 9 stale epics in current project", "`GitSource` detects unpushed work and stale branches", "`MilestoneSource` infers 0.30 alpha target from sketches/CHANGELOG", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T20:09:46.523427] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['blocking', 'complexity:medium', 'core', 'epic:cub-b1d', 'feature', 'model:sonnet', 'phase-4'] != ['phase-4', 'core', 'feature', 'model:sonnet', 'complexity:medium', 'blocking']"}
{"timestamp": "2026-01-28T20:09:46.621064", "operation": "get_task", "task_id": "cub-b1d.1", "primary_result": {"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "closed", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["blocking", "complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:44.409562Z", "updated_at": "2026-01-28T20:09:46.417360Z", "closed_at": "2026-01-28T20:09:46.417360Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "closed", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium", "blocking"], "depends_on": [], "blocks": ["cub-b1d.2", "cub-b1d.3"], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169582", "updated_at": "2026-01-28T20:09:46.523423", "closed_at": "2026-01-28T20:09:46.523370", "acceptance_criteria": ["All four sources produce relevant suggestions from real project data", "`TaskSource` detects the 9 stale epics in current project", "`GitSource` detects unpushed work and stale branches", "`MilestoneSource` infers 0.30 alpha target from sketches/CHANGELOG", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T20:09:46.523427] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['blocking', 'complexity:medium', 'core', 'epic:cub-b1d', 'feature', 'model:sonnet', 'phase-4'] != ['phase-4', 'core', 'feature', 'model:sonnet', 'complexity:medium', 'blocking']"}
{"timestamp": "2026-01-28T20:09:58.703459", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "open", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409584Z", "updated_at": "2026-01-28T17:54:44.605295Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "open", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T17:54:44.605810Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "open", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": null, "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T17:54:46.169599", "closed_at": null, "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "open", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": null, "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T17:54:46.169615", "closed_at": null, "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1d.2): labels: ['complexity:medium', 'core', 'epic:cub-b1d', 'feature', 'model:sonnet', 'phase-4'] != ['phase-4', 'core', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1d; Task 1 (cub-b1d.3): labels: ['complexity:medium', 'core', 'epic:cub-b1d', 'feature', 'model:sonnet', 'phase-4'] != ['phase-4', 'core', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1d"}
{"timestamp": "2026-01-28T20:09:58.761582", "operation": "get_task", "task_id": "cub-b1d.2", "primary_result": {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "open", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:44.409584Z", "updated_at": "2026-01-28T17:54:44.605295Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "open", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": null, "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T17:54:46.169599", "closed_at": null, "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "difference_summary": "labels: ['complexity:medium', 'core', 'epic:cub-b1d', 'feature', 'model:sonnet', 'phase-4'] != ['phase-4', 'core', 'feature', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:09:58.887361", "operation": "update_task", "task_id": "cub-b1d.2", "primary_result": {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "in_progress", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:44.409584Z", "updated_at": "2026-01-28T20:09:58.816790Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "in_progress", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T20:09:58.885880", "closed_at": null, "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['complexity:medium', 'core', 'epic:cub-b1d', 'feature', 'model:sonnet', 'phase-4'] != ['phase-4', 'core', 'feature', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:15:09.034810", "operation": "get_task", "task_id": "cub-b1d.2", "primary_result": {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "closed", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:44.409584Z", "updated_at": "2026-01-28T20:14:34.727029Z", "closed_at": "2026-01-28T20:14:34.727029Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "in_progress", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T20:09:58.885880", "closed_at": null, "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['complexity:medium', 'core', 'epic:cub-b1d', 'feature', 'model:sonnet', 'phase-4'] != ['phase-4', 'core', 'feature', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:15:09.094927", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 43, "open": 43, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 10, "in_progress": 1, "closed": 18}, "difference_summary": "total: 43 != 29; open: 43 != 10; in_progress: 0 != 1; closed: 0 != 18"}
{"timestamp": "2026-01-28T20:15:09.196828", "operation": "close_task", "task_id": "cub-b1d.2", "primary_result": {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "closed", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:44.409584Z", "updated_at": "2026-01-28T20:15:09.135653Z", "closed_at": "2026-01-28T20:15:09.135653Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "closed", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T20:15:09.194747", "closed_at": "2026-01-28T20:15:09.194743", "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "[Closed: 2026-01-28T20:15:09.194749] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['complexity:medium', 'core', 'epic:cub-b1d', 'feature', 'model:sonnet', 'phase-4'] != ['phase-4', 'core', 'feature', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:15:09.253568", "operation": "get_task", "task_id": "cub-b1d.2", "primary_result": {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "closed", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:44.409584Z", "updated_at": "2026-01-28T20:15:09.135653Z", "closed_at": "2026-01-28T20:15:09.135653Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "closed", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T20:15:09.194747", "closed_at": "2026-01-28T20:15:09.194743", "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "[Closed: 2026-01-28T20:15:09.194749] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['complexity:medium', 'core', 'epic:cub-b1d', 'feature', 'model:sonnet', 'phase-4'] != ['phase-4', 'core', 'feature', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:15:21.036101", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "open", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T17:54:44.605810Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "open", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": null, "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T17:54:46.169615", "closed_at": null, "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1d.3): labels: ['complexity:medium', 'core', 'epic:cub-b1d', 'feature', 'model:sonnet', 'phase-4'] != ['phase-4', 'core', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1d"}
{"timestamp": "2026-01-28T20:15:21.087249", "operation": "get_task", "task_id": "cub-b1d.3", "primary_result": {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "open", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T17:54:44.605810Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "open", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": null, "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T17:54:46.169615", "closed_at": null, "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "difference_summary": "labels: ['complexity:medium', 'core', 'epic:cub-b1d', 'feature', 'model:sonnet', 'phase-4'] != ['phase-4', 'core', 'feature', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:15:21.216881", "operation": "update_task", "task_id": "cub-b1d.3", "primary_result": {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:15:21.136375Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:15:21.212567", "closed_at": null, "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['complexity:medium', 'core', 'epic:cub-b1d', 'feature', 'model:sonnet', 'phase-4'] != ['phase-4', 'core', 'feature', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:18:19.823408", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:15:28.251750Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["phase-4", "core", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408089", "updated_at": "2026-01-28T17:54:44.408089", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}], "difference_summary": "List length mismatch: 23 != 9"}
{"timestamp": "2026-01-28T20:18:19.915930", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:15:28.251750Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:15:21.212567", "closed_at": null, "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1d.3): labels: ['complexity:medium', 'core', 'epic:cub-b1d', 'feature', 'model:sonnet', 'phase-4'] != ['phase-4', 'core', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1d"}
{"timestamp": "2026-01-28T20:18:20.035753", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T17:54:44.607353Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T17:54:44.606870Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["phase-4", "core", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408089", "updated_at": "2026-01-28T17:54:44.408089", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 42 != 9"}
{"timestamp": "2026-01-28T20:18:20.204520", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T17:54:44.607353Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T17:54:44.606870Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:15:28.251750Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "closed", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["phase-1", "core", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407838", "updated_at": "2026-01-28T18:57:22.732005", "closed_at": "2026-01-28T18:57:22.732002", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T18:57:22.732007] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "closed", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["phase-2", "core", "refactor", "cleanup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407983", "updated_at": "2026-01-28T19:20:21.672421", "closed_at": "2026-01-28T19:20:21.672417", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:20:21.672422] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "closed", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["phase-3", "core", "architecture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408044", "updated_at": "2026-01-28T19:59:09.455587", "closed_at": "2026-01-28T19:59:09.455581", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:59:09.455589] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["phase-4", "core", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408089", "updated_at": "2026-01-28T17:54:44.408089", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169408", "updated_at": "2026-01-28T19:02:20.690087", "closed_at": "2026-01-28T19:02:20.690062", "acceptance_criteria": ["Zero Rich imports in `core/review/`", "`cli/review/display.py` handles all review rendering", "`cub review` command output unchanged from user's perspective", "Tests pass"], "notes": "[Closed: 2026-01-28T19:02:20.690089] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "closed", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T19:12:49.833208", "closed_at": "2026-01-28T19:12:49.833201", "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "[Closed: 2026-01-28T19:12:49.833211] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T19:16:59.892654", "closed_at": "2026-01-28T19:16:59.892650", "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "[Closed: 2026-01-28T19:16:59.892655] Completed by autonomous execution", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "closed", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T19:18:27.819752", "closed_at": "2026-01-28T19:18:27.819748", "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "[Closed: 2026-01-28T19:18:27.819754] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "closed", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T19:20:10.863075", "closed_at": "2026-01-28T19:20:10.863070", "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "[Closed: 2026-01-28T19:20:10.863078] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "closed", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1c.2", "cub-b1c.3", "cub-b1c.4"], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169509", "updated_at": "2026-01-28T19:30:32.960816", "closed_at": "2026-01-28T19:30:32.960778", "acceptance_criteria": ["`RunService` provides the complete API for task execution", "`cli/run.py` only calls `RunService`, not domain modules directly", "Service is stateless \u2014 configuration passed in, no globals", "Tests verify service orchestration"], "notes": "[Closed: 2026-01-28T19:30:32.960820] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "closed", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T19:43:16.990826", "closed_at": "2026-01-28T19:43:16.990819", "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T19:43:16.990832] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "closed", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T19:49:58.382182", "closed_at": "2026-01-28T19:49:58.382177", "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "[Closed: 2026-01-28T19:49:58.382184] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "closed", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T19:58:57.828806", "closed_at": "2026-01-28T19:58:57.828802", "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "[Closed: 2026-01-28T19:58:57.828808] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "closed", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium", "blocking"], "depends_on": [], "blocks": ["cub-b1d.2", "cub-b1d.3"], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169582", "updated_at": "2026-01-28T20:09:46.523423", "closed_at": "2026-01-28T20:09:46.523370", "acceptance_criteria": ["All four sources produce relevant suggestions from real project data", "`TaskSource` detects the 9 stale epics in current project", "`GitSource` detects unpushed work and stale branches", "`MilestoneSource` infers 0.30 alpha target from sketches/CHANGELOG", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T20:09:46.523427] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "closed", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T20:15:09.194747", "closed_at": "2026-01-28T20:15:09.194743", "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "[Closed: 2026-01-28T20:15:09.194749] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:15:21.212567", "closed_at": null, "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 43 != 29"}
{"timestamp": "2026-01-28T20:18:20.271096", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T17:54:44.607353Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T17:54:44.606870Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1e.1): labels: ['blocking', 'cli', 'complexity:high', 'epic:cub-b1e', 'feature', 'model:opus', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:opus', 'complexity:high', 'blocking']; parent: None != cub-b1e; Task 1 (cub-b1e.2): labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'feature', 'model:sonnet', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1e; Task 2 (cub-b1e.3): labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'model:sonnet', 'phase-5', 'test'] != ['phase-5', 'cli', 'test', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1e"}
{"timestamp": "2026-01-28T20:18:20.319915", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 5"}
{"timestamp": "2026-01-28T20:18:20.366567", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T17:54:44.607353Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T17:54:44.606870Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1e.1): labels: ['blocking', 'cli', 'complexity:high', 'epic:cub-b1e', 'feature', 'model:opus', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:opus', 'complexity:high', 'blocking']; parent: None != cub-b1e; Task 1 (cub-b1e.2): labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'feature', 'model:sonnet', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1e; Task 2 (cub-b1e.3): labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'model:sonnet', 'phase-5', 'test'] != ['phase-5', 'cli', 'test', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1e"}
{"timestamp": "2026-01-28T20:18:20.415346", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 5"}
{"timestamp": "2026-01-28T20:18:20.597186", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:15:28.251750Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "closed", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium", "blocking"], "depends_on": [], "blocks": ["cub-b1d.2", "cub-b1d.3"], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169582", "updated_at": "2026-01-28T20:09:46.523423", "closed_at": "2026-01-28T20:09:46.523370", "acceptance_criteria": ["All four sources produce relevant suggestions from real project data", "`TaskSource` detects the 9 stale epics in current project", "`GitSource` detects unpushed work and stale branches", "`MilestoneSource` infers 0.30 alpha target from sketches/CHANGELOG", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T20:09:46.523427] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "closed", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T20:15:09.194747", "closed_at": "2026-01-28T20:15:09.194743", "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "[Closed: 2026-01-28T20:15:09.194749] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:15:21.212567", "closed_at": null, "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 1 != 3"}
{"timestamp": "2026-01-28T20:18:20.642895", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "closed", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1c.2", "cub-b1c.3", "cub-b1c.4"], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169509", "updated_at": "2026-01-28T19:30:32.960816", "closed_at": "2026-01-28T19:30:32.960778", "acceptance_criteria": ["`RunService` provides the complete API for task execution", "`cli/run.py` only calls `RunService`, not domain modules directly", "Service is stateless \u2014 configuration passed in, no globals", "Tests verify service orchestration"], "notes": "[Closed: 2026-01-28T19:30:32.960820] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "closed", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T19:43:16.990826", "closed_at": "2026-01-28T19:43:16.990819", "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T19:43:16.990832] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "closed", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T19:49:58.382182", "closed_at": "2026-01-28T19:49:58.382177", "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "[Closed: 2026-01-28T19:49:58.382184] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "closed", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T19:58:57.828806", "closed_at": "2026-01-28T19:58:57.828802", "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "[Closed: 2026-01-28T19:58:57.828808] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 4"}
{"timestamp": "2026-01-28T20:18:20.694226", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169408", "updated_at": "2026-01-28T19:02:20.690087", "closed_at": "2026-01-28T19:02:20.690062", "acceptance_criteria": ["Zero Rich imports in `core/review/`", "`cli/review/display.py` handles all review rendering", "`cub review` command output unchanged from user's perspective", "Tests pass"], "notes": "[Closed: 2026-01-28T19:02:20.690089] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "closed", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T19:12:49.833208", "closed_at": "2026-01-28T19:12:49.833201", "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "[Closed: 2026-01-28T19:12:49.833211] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T19:16:59.892654", "closed_at": "2026-01-28T19:16:59.892650", "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "[Closed: 2026-01-28T19:16:59.892655] Completed by autonomous execution", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "closed", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T19:18:27.819752", "closed_at": "2026-01-28T19:18:27.819748", "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "[Closed: 2026-01-28T19:18:27.819754] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "closed", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T19:20:10.863075", "closed_at": "2026-01-28T19:20:10.863070", "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "[Closed: 2026-01-28T19:20:10.863078] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 5"}
{"timestamp": "2026-01-28T20:18:20.889058", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}], "secondary_result": "[]", "difference_summary": "List length mismatch: 5 != 0"}
{"timestamp": "2026-01-28T20:18:20.981579", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}], "secondary_result": [{"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1f.1): labels: ['complexity:medium', 'docs', 'epic:cub-b1f', 'feature', 'model:sonnet', 'phase-6'] != ['phase-6', 'docs', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1f; Task 1 (cub-b1f.2): labels: ['complexity:medium', 'docs', 'epic:cub-b1f', 'model:sonnet', 'phase-6'] != ['phase-6', 'docs', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1f; Task 2 (cub-b1f.3): labels: ['complexity:medium', 'epic:cub-b1f', 'model:sonnet', 'phase-6', 'test'] != ['phase-6', 'test', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1f"}
{"timestamp": "2026-01-28T20:18:21.095227", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "secondary_result": "[]", "difference_summary": "List length mismatch: 3 != 0"}
{"timestamp": "2026-01-28T20:18:21.146540", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "secondary_result": "[]", "difference_summary": "List length mismatch: 3 != 0"}
{"timestamp": "2026-01-28T20:18:21.271510", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": "[]", "difference_summary": "List length mismatch: 3 != 0"}
{"timestamp": "2026-01-28T20:18:33.314018", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:15:28.251750Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["phase-4", "core", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408089", "updated_at": "2026-01-28T17:54:44.408089", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}], "difference_summary": "List length mismatch: 23 != 9"}
{"timestamp": "2026-01-28T20:18:33.365142", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:15:28.251750Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:15:21.212567", "closed_at": null, "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1d.3): labels: ['complexity:medium', 'core', 'epic:cub-b1d', 'feature', 'model:sonnet', 'phase-4'] != ['phase-4', 'core', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1d"}
{"timestamp": "2026-01-28T20:18:33.421812", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T17:54:44.607353Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T17:54:44.606870Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["phase-4", "core", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408089", "updated_at": "2026-01-28T17:54:44.408089", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 42 != 9"}
{"timestamp": "2026-01-28T20:18:33.550057", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T17:54:44.607353Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T17:54:44.606870Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:15:28.251750Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "closed", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["phase-1", "core", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407838", "updated_at": "2026-01-28T18:57:22.732005", "closed_at": "2026-01-28T18:57:22.732002", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T18:57:22.732007] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "closed", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["phase-2", "core", "refactor", "cleanup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407983", "updated_at": "2026-01-28T19:20:21.672421", "closed_at": "2026-01-28T19:20:21.672417", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:20:21.672422] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "closed", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["phase-3", "core", "architecture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408044", "updated_at": "2026-01-28T19:59:09.455587", "closed_at": "2026-01-28T19:59:09.455581", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:59:09.455589] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["phase-4", "core", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408089", "updated_at": "2026-01-28T17:54:44.408089", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169408", "updated_at": "2026-01-28T19:02:20.690087", "closed_at": "2026-01-28T19:02:20.690062", "acceptance_criteria": ["Zero Rich imports in `core/review/`", "`cli/review/display.py` handles all review rendering", "`cub review` command output unchanged from user's perspective", "Tests pass"], "notes": "[Closed: 2026-01-28T19:02:20.690089] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "closed", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T19:12:49.833208", "closed_at": "2026-01-28T19:12:49.833201", "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "[Closed: 2026-01-28T19:12:49.833211] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T19:16:59.892654", "closed_at": "2026-01-28T19:16:59.892650", "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "[Closed: 2026-01-28T19:16:59.892655] Completed by autonomous execution", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "closed", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T19:18:27.819752", "closed_at": "2026-01-28T19:18:27.819748", "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "[Closed: 2026-01-28T19:18:27.819754] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "closed", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T19:20:10.863075", "closed_at": "2026-01-28T19:20:10.863070", "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "[Closed: 2026-01-28T19:20:10.863078] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "closed", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1c.2", "cub-b1c.3", "cub-b1c.4"], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169509", "updated_at": "2026-01-28T19:30:32.960816", "closed_at": "2026-01-28T19:30:32.960778", "acceptance_criteria": ["`RunService` provides the complete API for task execution", "`cli/run.py` only calls `RunService`, not domain modules directly", "Service is stateless \u2014 configuration passed in, no globals", "Tests verify service orchestration"], "notes": "[Closed: 2026-01-28T19:30:32.960820] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "closed", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T19:43:16.990826", "closed_at": "2026-01-28T19:43:16.990819", "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T19:43:16.990832] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "closed", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T19:49:58.382182", "closed_at": "2026-01-28T19:49:58.382177", "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "[Closed: 2026-01-28T19:49:58.382184] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "closed", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T19:58:57.828806", "closed_at": "2026-01-28T19:58:57.828802", "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "[Closed: 2026-01-28T19:58:57.828808] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "closed", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium", "blocking"], "depends_on": [], "blocks": ["cub-b1d.2", "cub-b1d.3"], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169582", "updated_at": "2026-01-28T20:09:46.523423", "closed_at": "2026-01-28T20:09:46.523370", "acceptance_criteria": ["All four sources produce relevant suggestions from real project data", "`TaskSource` detects the 9 stale epics in current project", "`GitSource` detects unpushed work and stale branches", "`MilestoneSource` infers 0.30 alpha target from sketches/CHANGELOG", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T20:09:46.523427] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "closed", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T20:15:09.194747", "closed_at": "2026-01-28T20:15:09.194743", "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "[Closed: 2026-01-28T20:15:09.194749] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:15:21.212567", "closed_at": null, "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 43 != 29"}
{"timestamp": "2026-01-28T20:18:33.606894", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T17:54:44.607353Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T17:54:44.606870Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1e.1): labels: ['blocking', 'cli', 'complexity:high', 'epic:cub-b1e', 'feature', 'model:opus', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:opus', 'complexity:high', 'blocking']; parent: None != cub-b1e; Task 1 (cub-b1e.2): labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'feature', 'model:sonnet', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1e; Task 2 (cub-b1e.3): labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'model:sonnet', 'phase-5', 'test'] != ['phase-5', 'cli', 'test', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1e"}
{"timestamp": "2026-01-28T20:18:33.669821", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 5"}
{"timestamp": "2026-01-28T20:18:33.722004", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T17:54:44.607353Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T17:54:44.606870Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1e.1): labels: ['blocking', 'cli', 'complexity:high', 'epic:cub-b1e', 'feature', 'model:opus', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:opus', 'complexity:high', 'blocking']; parent: None != cub-b1e; Task 1 (cub-b1e.2): labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'feature', 'model:sonnet', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1e; Task 2 (cub-b1e.3): labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'model:sonnet', 'phase-5', 'test'] != ['phase-5', 'cli', 'test', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1e"}
{"timestamp": "2026-01-28T20:18:33.769916", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 5"}
{"timestamp": "2026-01-28T20:18:33.976627", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:15:28.251750Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "closed", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium", "blocking"], "depends_on": [], "blocks": ["cub-b1d.2", "cub-b1d.3"], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169582", "updated_at": "2026-01-28T20:09:46.523423", "closed_at": "2026-01-28T20:09:46.523370", "acceptance_criteria": ["All four sources produce relevant suggestions from real project data", "`TaskSource` detects the 9 stale epics in current project", "`GitSource` detects unpushed work and stale branches", "`MilestoneSource` infers 0.30 alpha target from sketches/CHANGELOG", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T20:09:46.523427] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "closed", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T20:15:09.194747", "closed_at": "2026-01-28T20:15:09.194743", "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "[Closed: 2026-01-28T20:15:09.194749] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:15:21.212567", "closed_at": null, "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 1 != 3"}
{"timestamp": "2026-01-28T20:18:34.038887", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "closed", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1c.2", "cub-b1c.3", "cub-b1c.4"], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169509", "updated_at": "2026-01-28T19:30:32.960816", "closed_at": "2026-01-28T19:30:32.960778", "acceptance_criteria": ["`RunService` provides the complete API for task execution", "`cli/run.py` only calls `RunService`, not domain modules directly", "Service is stateless \u2014 configuration passed in, no globals", "Tests verify service orchestration"], "notes": "[Closed: 2026-01-28T19:30:32.960820] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "closed", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T19:43:16.990826", "closed_at": "2026-01-28T19:43:16.990819", "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T19:43:16.990832] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "closed", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T19:49:58.382182", "closed_at": "2026-01-28T19:49:58.382177", "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "[Closed: 2026-01-28T19:49:58.382184] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "closed", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T19:58:57.828806", "closed_at": "2026-01-28T19:58:57.828802", "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "[Closed: 2026-01-28T19:58:57.828808] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 4"}
{"timestamp": "2026-01-28T20:18:34.106782", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169408", "updated_at": "2026-01-28T19:02:20.690087", "closed_at": "2026-01-28T19:02:20.690062", "acceptance_criteria": ["Zero Rich imports in `core/review/`", "`cli/review/display.py` handles all review rendering", "`cub review` command output unchanged from user's perspective", "Tests pass"], "notes": "[Closed: 2026-01-28T19:02:20.690089] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "closed", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T19:12:49.833208", "closed_at": "2026-01-28T19:12:49.833201", "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "[Closed: 2026-01-28T19:12:49.833211] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T19:16:59.892654", "closed_at": "2026-01-28T19:16:59.892650", "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "[Closed: 2026-01-28T19:16:59.892655] Completed by autonomous execution", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "closed", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T19:18:27.819752", "closed_at": "2026-01-28T19:18:27.819748", "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "[Closed: 2026-01-28T19:18:27.819754] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "closed", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T19:20:10.863075", "closed_at": "2026-01-28T19:20:10.863070", "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "[Closed: 2026-01-28T19:20:10.863078] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 5"}
{"timestamp": "2026-01-28T20:18:34.433745", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}], "secondary_result": "[]", "difference_summary": "List length mismatch: 5 != 0"}
{"timestamp": "2026-01-28T20:18:34.627828", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}], "secondary_result": [{"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1f.1): labels: ['complexity:medium', 'docs', 'epic:cub-b1f', 'feature', 'model:sonnet', 'phase-6'] != ['phase-6', 'docs', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1f; Task 1 (cub-b1f.2): labels: ['complexity:medium', 'docs', 'epic:cub-b1f', 'model:sonnet', 'phase-6'] != ['phase-6', 'docs', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1f; Task 2 (cub-b1f.3): labels: ['complexity:medium', 'epic:cub-b1f', 'model:sonnet', 'phase-6', 'test'] != ['phase-6', 'test', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1f"}
{"timestamp": "2026-01-28T20:18:34.809326", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "secondary_result": "[]", "difference_summary": "List length mismatch: 3 != 0"}
{"timestamp": "2026-01-28T20:18:34.896264", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "secondary_result": "[]", "difference_summary": "List length mismatch: 3 != 0"}
{"timestamp": "2026-01-28T20:18:35.072741", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": "[]", "difference_summary": "List length mismatch: 3 != 0"}
{"timestamp": "2026-01-28T20:18:42.468074", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:15:28.251750Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["phase-4", "core", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408089", "updated_at": "2026-01-28T17:54:44.408089", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}], "difference_summary": "List length mismatch: 23 != 9"}
{"timestamp": "2026-01-28T20:18:42.541940", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:15:28.251750Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:15:21.212567", "closed_at": null, "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1d.3): labels: ['complexity:medium', 'core', 'epic:cub-b1d', 'feature', 'model:sonnet', 'phase-4'] != ['phase-4', 'core', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1d"}
{"timestamp": "2026-01-28T20:18:42.643420", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T17:54:44.607353Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T17:54:44.606870Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["phase-4", "core", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408089", "updated_at": "2026-01-28T17:54:44.408089", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 42 != 9"}
{"timestamp": "2026-01-28T20:18:42.797848", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T17:54:44.607353Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T17:54:44.606870Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:15:28.251750Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "closed", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["phase-1", "core", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407838", "updated_at": "2026-01-28T18:57:22.732005", "closed_at": "2026-01-28T18:57:22.732002", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T18:57:22.732007] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "closed", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["phase-2", "core", "refactor", "cleanup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407983", "updated_at": "2026-01-28T19:20:21.672421", "closed_at": "2026-01-28T19:20:21.672417", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:20:21.672422] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "closed", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["phase-3", "core", "architecture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408044", "updated_at": "2026-01-28T19:59:09.455587", "closed_at": "2026-01-28T19:59:09.455581", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:59:09.455589] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["phase-4", "core", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408089", "updated_at": "2026-01-28T17:54:44.408089", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169408", "updated_at": "2026-01-28T19:02:20.690087", "closed_at": "2026-01-28T19:02:20.690062", "acceptance_criteria": ["Zero Rich imports in `core/review/`", "`cli/review/display.py` handles all review rendering", "`cub review` command output unchanged from user's perspective", "Tests pass"], "notes": "[Closed: 2026-01-28T19:02:20.690089] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "closed", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T19:12:49.833208", "closed_at": "2026-01-28T19:12:49.833201", "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "[Closed: 2026-01-28T19:12:49.833211] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T19:16:59.892654", "closed_at": "2026-01-28T19:16:59.892650", "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "[Closed: 2026-01-28T19:16:59.892655] Completed by autonomous execution", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "closed", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T19:18:27.819752", "closed_at": "2026-01-28T19:18:27.819748", "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "[Closed: 2026-01-28T19:18:27.819754] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "closed", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T19:20:10.863075", "closed_at": "2026-01-28T19:20:10.863070", "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "[Closed: 2026-01-28T19:20:10.863078] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "closed", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1c.2", "cub-b1c.3", "cub-b1c.4"], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169509", "updated_at": "2026-01-28T19:30:32.960816", "closed_at": "2026-01-28T19:30:32.960778", "acceptance_criteria": ["`RunService` provides the complete API for task execution", "`cli/run.py` only calls `RunService`, not domain modules directly", "Service is stateless \u2014 configuration passed in, no globals", "Tests verify service orchestration"], "notes": "[Closed: 2026-01-28T19:30:32.960820] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "closed", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T19:43:16.990826", "closed_at": "2026-01-28T19:43:16.990819", "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T19:43:16.990832] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "closed", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T19:49:58.382182", "closed_at": "2026-01-28T19:49:58.382177", "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "[Closed: 2026-01-28T19:49:58.382184] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "closed", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T19:58:57.828806", "closed_at": "2026-01-28T19:58:57.828802", "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "[Closed: 2026-01-28T19:58:57.828808] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "closed", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium", "blocking"], "depends_on": [], "blocks": ["cub-b1d.2", "cub-b1d.3"], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169582", "updated_at": "2026-01-28T20:09:46.523423", "closed_at": "2026-01-28T20:09:46.523370", "acceptance_criteria": ["All four sources produce relevant suggestions from real project data", "`TaskSource` detects the 9 stale epics in current project", "`GitSource` detects unpushed work and stale branches", "`MilestoneSource` infers 0.30 alpha target from sketches/CHANGELOG", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T20:09:46.523427] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "closed", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T20:15:09.194747", "closed_at": "2026-01-28T20:15:09.194743", "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "[Closed: 2026-01-28T20:15:09.194749] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:15:21.212567", "closed_at": null, "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 43 != 29"}
{"timestamp": "2026-01-28T20:18:42.856500", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T17:54:44.607353Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T17:54:44.606870Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1e.1): labels: ['blocking', 'cli', 'complexity:high', 'epic:cub-b1e', 'feature', 'model:opus', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:opus', 'complexity:high', 'blocking']; parent: None != cub-b1e; Task 1 (cub-b1e.2): labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'feature', 'model:sonnet', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1e; Task 2 (cub-b1e.3): labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'model:sonnet', 'phase-5', 'test'] != ['phase-5', 'cli', 'test', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1e"}
{"timestamp": "2026-01-28T20:18:42.912408", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 5"}
{"timestamp": "2026-01-28T20:18:42.972763", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T17:54:44.607353Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T17:54:44.606870Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1e.1): labels: ['blocking', 'cli', 'complexity:high', 'epic:cub-b1e', 'feature', 'model:opus', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:opus', 'complexity:high', 'blocking']; parent: None != cub-b1e; Task 1 (cub-b1e.2): labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'feature', 'model:sonnet', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1e; Task 2 (cub-b1e.3): labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'model:sonnet', 'phase-5', 'test'] != ['phase-5', 'cli', 'test', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1e"}
{"timestamp": "2026-01-28T20:18:43.026846", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 5"}
{"timestamp": "2026-01-28T20:18:43.238189", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:15:28.251750Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "closed", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium", "blocking"], "depends_on": [], "blocks": ["cub-b1d.2", "cub-b1d.3"], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169582", "updated_at": "2026-01-28T20:09:46.523423", "closed_at": "2026-01-28T20:09:46.523370", "acceptance_criteria": ["All four sources produce relevant suggestions from real project data", "`TaskSource` detects the 9 stale epics in current project", "`GitSource` detects unpushed work and stale branches", "`MilestoneSource` infers 0.30 alpha target from sketches/CHANGELOG", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T20:09:46.523427] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "closed", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T20:15:09.194747", "closed_at": "2026-01-28T20:15:09.194743", "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "[Closed: 2026-01-28T20:15:09.194749] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:15:21.212567", "closed_at": null, "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 1 != 3"}
{"timestamp": "2026-01-28T20:18:43.287509", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "closed", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1c.2", "cub-b1c.3", "cub-b1c.4"], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169509", "updated_at": "2026-01-28T19:30:32.960816", "closed_at": "2026-01-28T19:30:32.960778", "acceptance_criteria": ["`RunService` provides the complete API for task execution", "`cli/run.py` only calls `RunService`, not domain modules directly", "Service is stateless \u2014 configuration passed in, no globals", "Tests verify service orchestration"], "notes": "[Closed: 2026-01-28T19:30:32.960820] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "closed", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T19:43:16.990826", "closed_at": "2026-01-28T19:43:16.990819", "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T19:43:16.990832] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "closed", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T19:49:58.382182", "closed_at": "2026-01-28T19:49:58.382177", "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "[Closed: 2026-01-28T19:49:58.382184] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "closed", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T19:58:57.828806", "closed_at": "2026-01-28T19:58:57.828802", "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "[Closed: 2026-01-28T19:58:57.828808] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 4"}
{"timestamp": "2026-01-28T20:18:43.340383", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169408", "updated_at": "2026-01-28T19:02:20.690087", "closed_at": "2026-01-28T19:02:20.690062", "acceptance_criteria": ["Zero Rich imports in `core/review/`", "`cli/review/display.py` handles all review rendering", "`cub review` command output unchanged from user's perspective", "Tests pass"], "notes": "[Closed: 2026-01-28T19:02:20.690089] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "closed", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T19:12:49.833208", "closed_at": "2026-01-28T19:12:49.833201", "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "[Closed: 2026-01-28T19:12:49.833211] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T19:16:59.892654", "closed_at": "2026-01-28T19:16:59.892650", "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "[Closed: 2026-01-28T19:16:59.892655] Completed by autonomous execution", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "closed", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T19:18:27.819752", "closed_at": "2026-01-28T19:18:27.819748", "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "[Closed: 2026-01-28T19:18:27.819754] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "closed", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T19:20:10.863075", "closed_at": "2026-01-28T19:20:10.863070", "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "[Closed: 2026-01-28T19:20:10.863078] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 5"}
{"timestamp": "2026-01-28T20:18:43.532014", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}], "secondary_result": "[]", "difference_summary": "List length mismatch: 5 != 0"}
{"timestamp": "2026-01-28T20:18:43.630403", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}], "secondary_result": [{"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1f.1): labels: ['complexity:medium', 'docs', 'epic:cub-b1f', 'feature', 'model:sonnet', 'phase-6'] != ['phase-6', 'docs', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1f; Task 1 (cub-b1f.2): labels: ['complexity:medium', 'docs', 'epic:cub-b1f', 'model:sonnet', 'phase-6'] != ['phase-6', 'docs', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1f; Task 2 (cub-b1f.3): labels: ['complexity:medium', 'epic:cub-b1f', 'model:sonnet', 'phase-6', 'test'] != ['phase-6', 'test', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1f"}
{"timestamp": "2026-01-28T20:18:43.736016", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "secondary_result": "[]", "difference_summary": "List length mismatch: 3 != 0"}
{"timestamp": "2026-01-28T20:18:43.788151", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "secondary_result": "[]", "difference_summary": "List length mismatch: 3 != 0"}
{"timestamp": "2026-01-28T20:18:43.893295", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": "[]", "difference_summary": "List length mismatch: 3 != 0"}
{"timestamp": "2026-01-28T20:20:35.440647", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:15:28.251750Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["phase-4", "core", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408089", "updated_at": "2026-01-28T17:54:44.408089", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}], "difference_summary": "List length mismatch: 23 != 9"}
{"timestamp": "2026-01-28T20:20:35.495895", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:15:28.251750Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:15:21.212567", "closed_at": null, "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1d.3): labels: ['complexity:medium', 'core', 'epic:cub-b1d', 'feature', 'model:sonnet', 'phase-4'] != ['phase-4', 'core', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1d"}
{"timestamp": "2026-01-28T20:20:35.551347", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T17:54:44.607353Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T17:54:44.606870Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["phase-4", "core", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408089", "updated_at": "2026-01-28T17:54:44.408089", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 42 != 9"}
{"timestamp": "2026-01-28T20:20:35.686459", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T17:54:44.607353Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T17:54:44.606870Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:15:28.251750Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "closed", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["phase-1", "core", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407838", "updated_at": "2026-01-28T18:57:22.732005", "closed_at": "2026-01-28T18:57:22.732002", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T18:57:22.732007] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "closed", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["phase-2", "core", "refactor", "cleanup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407983", "updated_at": "2026-01-28T19:20:21.672421", "closed_at": "2026-01-28T19:20:21.672417", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:20:21.672422] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "closed", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["phase-3", "core", "architecture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408044", "updated_at": "2026-01-28T19:59:09.455587", "closed_at": "2026-01-28T19:59:09.455581", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:59:09.455589] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["phase-4", "core", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408089", "updated_at": "2026-01-28T17:54:44.408089", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169408", "updated_at": "2026-01-28T19:02:20.690087", "closed_at": "2026-01-28T19:02:20.690062", "acceptance_criteria": ["Zero Rich imports in `core/review/`", "`cli/review/display.py` handles all review rendering", "`cub review` command output unchanged from user's perspective", "Tests pass"], "notes": "[Closed: 2026-01-28T19:02:20.690089] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "closed", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T19:12:49.833208", "closed_at": "2026-01-28T19:12:49.833201", "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "[Closed: 2026-01-28T19:12:49.833211] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T19:16:59.892654", "closed_at": "2026-01-28T19:16:59.892650", "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "[Closed: 2026-01-28T19:16:59.892655] Completed by autonomous execution", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "closed", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T19:18:27.819752", "closed_at": "2026-01-28T19:18:27.819748", "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "[Closed: 2026-01-28T19:18:27.819754] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "closed", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T19:20:10.863075", "closed_at": "2026-01-28T19:20:10.863070", "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "[Closed: 2026-01-28T19:20:10.863078] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "closed", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1c.2", "cub-b1c.3", "cub-b1c.4"], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169509", "updated_at": "2026-01-28T19:30:32.960816", "closed_at": "2026-01-28T19:30:32.960778", "acceptance_criteria": ["`RunService` provides the complete API for task execution", "`cli/run.py` only calls `RunService`, not domain modules directly", "Service is stateless \u2014 configuration passed in, no globals", "Tests verify service orchestration"], "notes": "[Closed: 2026-01-28T19:30:32.960820] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "closed", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T19:43:16.990826", "closed_at": "2026-01-28T19:43:16.990819", "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T19:43:16.990832] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "closed", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T19:49:58.382182", "closed_at": "2026-01-28T19:49:58.382177", "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "[Closed: 2026-01-28T19:49:58.382184] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "closed", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T19:58:57.828806", "closed_at": "2026-01-28T19:58:57.828802", "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "[Closed: 2026-01-28T19:58:57.828808] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "closed", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium", "blocking"], "depends_on": [], "blocks": ["cub-b1d.2", "cub-b1d.3"], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169582", "updated_at": "2026-01-28T20:09:46.523423", "closed_at": "2026-01-28T20:09:46.523370", "acceptance_criteria": ["All four sources produce relevant suggestions from real project data", "`TaskSource` detects the 9 stale epics in current project", "`GitSource` detects unpushed work and stale branches", "`MilestoneSource` infers 0.30 alpha target from sketches/CHANGELOG", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T20:09:46.523427] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "closed", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T20:15:09.194747", "closed_at": "2026-01-28T20:15:09.194743", "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "[Closed: 2026-01-28T20:15:09.194749] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:15:21.212567", "closed_at": null, "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 43 != 29"}
{"timestamp": "2026-01-28T20:20:35.743839", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T17:54:44.607353Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T17:54:44.606870Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1e.1): labels: ['blocking', 'cli', 'complexity:high', 'epic:cub-b1e', 'feature', 'model:opus', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:opus', 'complexity:high', 'blocking']; parent: None != cub-b1e; Task 1 (cub-b1e.2): labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'feature', 'model:sonnet', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1e; Task 2 (cub-b1e.3): labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'model:sonnet', 'phase-5', 'test'] != ['phase-5', 'cli', 'test', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1e"}
{"timestamp": "2026-01-28T20:20:35.803797", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 5"}
{"timestamp": "2026-01-28T20:20:35.855826", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T17:54:44.607353Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T17:54:44.606870Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1e.1): labels: ['blocking', 'cli', 'complexity:high', 'epic:cub-b1e', 'feature', 'model:opus', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:opus', 'complexity:high', 'blocking']; parent: None != cub-b1e; Task 1 (cub-b1e.2): labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'feature', 'model:sonnet', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1e; Task 2 (cub-b1e.3): labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'model:sonnet', 'phase-5', 'test'] != ['phase-5', 'cli', 'test', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1e"}
{"timestamp": "2026-01-28T20:20:35.907940", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 5"}
{"timestamp": "2026-01-28T20:20:36.133375", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:15:28.251750Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "closed", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium", "blocking"], "depends_on": [], "blocks": ["cub-b1d.2", "cub-b1d.3"], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169582", "updated_at": "2026-01-28T20:09:46.523423", "closed_at": "2026-01-28T20:09:46.523370", "acceptance_criteria": ["All four sources produce relevant suggestions from real project data", "`TaskSource` detects the 9 stale epics in current project", "`GitSource` detects unpushed work and stale branches", "`MilestoneSource` infers 0.30 alpha target from sketches/CHANGELOG", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T20:09:46.523427] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "closed", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T20:15:09.194747", "closed_at": "2026-01-28T20:15:09.194743", "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "[Closed: 2026-01-28T20:15:09.194749] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:15:21.212567", "closed_at": null, "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 1 != 3"}
{"timestamp": "2026-01-28T20:20:36.186832", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "closed", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1c.2", "cub-b1c.3", "cub-b1c.4"], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169509", "updated_at": "2026-01-28T19:30:32.960816", "closed_at": "2026-01-28T19:30:32.960778", "acceptance_criteria": ["`RunService` provides the complete API for task execution", "`cli/run.py` only calls `RunService`, not domain modules directly", "Service is stateless \u2014 configuration passed in, no globals", "Tests verify service orchestration"], "notes": "[Closed: 2026-01-28T19:30:32.960820] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "closed", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T19:43:16.990826", "closed_at": "2026-01-28T19:43:16.990819", "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T19:43:16.990832] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "closed", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T19:49:58.382182", "closed_at": "2026-01-28T19:49:58.382177", "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "[Closed: 2026-01-28T19:49:58.382184] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "closed", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T19:58:57.828806", "closed_at": "2026-01-28T19:58:57.828802", "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "[Closed: 2026-01-28T19:58:57.828808] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 4"}
{"timestamp": "2026-01-28T20:20:36.236261", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169408", "updated_at": "2026-01-28T19:02:20.690087", "closed_at": "2026-01-28T19:02:20.690062", "acceptance_criteria": ["Zero Rich imports in `core/review/`", "`cli/review/display.py` handles all review rendering", "`cub review` command output unchanged from user's perspective", "Tests pass"], "notes": "[Closed: 2026-01-28T19:02:20.690089] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "closed", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T19:12:49.833208", "closed_at": "2026-01-28T19:12:49.833201", "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "[Closed: 2026-01-28T19:12:49.833211] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T19:16:59.892654", "closed_at": "2026-01-28T19:16:59.892650", "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "[Closed: 2026-01-28T19:16:59.892655] Completed by autonomous execution", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "closed", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T19:18:27.819752", "closed_at": "2026-01-28T19:18:27.819748", "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "[Closed: 2026-01-28T19:18:27.819754] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "closed", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T19:20:10.863075", "closed_at": "2026-01-28T19:20:10.863070", "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "[Closed: 2026-01-28T19:20:10.863078] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 5"}
{"timestamp": "2026-01-28T20:20:36.511400", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}], "secondary_result": "[]", "difference_summary": "List length mismatch: 5 != 0"}
{"timestamp": "2026-01-28T20:20:36.640255", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}], "secondary_result": [{"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1f.1): labels: ['complexity:medium', 'docs', 'epic:cub-b1f', 'feature', 'model:sonnet', 'phase-6'] != ['phase-6', 'docs', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1f; Task 1 (cub-b1f.2): labels: ['complexity:medium', 'docs', 'epic:cub-b1f', 'model:sonnet', 'phase-6'] != ['phase-6', 'docs', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1f; Task 2 (cub-b1f.3): labels: ['complexity:medium', 'epic:cub-b1f', 'model:sonnet', 'phase-6', 'test'] != ['phase-6', 'test', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1f"}
{"timestamp": "2026-01-28T20:20:36.778537", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "secondary_result": "[]", "difference_summary": "List length mismatch: 3 != 0"}
{"timestamp": "2026-01-28T20:20:36.845916", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "secondary_result": "[]", "difference_summary": "List length mismatch: 3 != 0"}
{"timestamp": "2026-01-28T20:20:36.987665", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": "[]", "difference_summary": "List length mismatch: 3 != 0"}
{"timestamp": "2026-01-28T20:20:37.088620", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:15:28.251750Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["phase-4", "core", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408089", "updated_at": "2026-01-28T17:54:44.408089", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}], "difference_summary": "List length mismatch: 23 != 9"}
{"timestamp": "2026-01-28T20:20:37.156236", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:15:28.251750Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:15:21.212567", "closed_at": null, "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1d.3): labels: ['complexity:medium', 'core', 'epic:cub-b1d', 'feature', 'model:sonnet', 'phase-4'] != ['phase-4', 'core', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1d"}
{"timestamp": "2026-01-28T20:20:37.246442", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T17:54:44.607353Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T17:54:44.606870Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["phase-4", "core", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408089", "updated_at": "2026-01-28T17:54:44.408089", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 42 != 9"}
{"timestamp": "2026-01-28T20:20:37.370842", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T17:54:44.607353Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T17:54:44.606870Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:15:28.251750Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "closed", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["phase-1", "core", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407838", "updated_at": "2026-01-28T18:57:22.732005", "closed_at": "2026-01-28T18:57:22.732002", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T18:57:22.732007] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "closed", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["phase-2", "core", "refactor", "cleanup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407983", "updated_at": "2026-01-28T19:20:21.672421", "closed_at": "2026-01-28T19:20:21.672417", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:20:21.672422] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "closed", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["phase-3", "core", "architecture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408044", "updated_at": "2026-01-28T19:59:09.455587", "closed_at": "2026-01-28T19:59:09.455581", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:59:09.455589] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["phase-4", "core", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408089", "updated_at": "2026-01-28T17:54:44.408089", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169408", "updated_at": "2026-01-28T19:02:20.690087", "closed_at": "2026-01-28T19:02:20.690062", "acceptance_criteria": ["Zero Rich imports in `core/review/`", "`cli/review/display.py` handles all review rendering", "`cub review` command output unchanged from user's perspective", "Tests pass"], "notes": "[Closed: 2026-01-28T19:02:20.690089] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "closed", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T19:12:49.833208", "closed_at": "2026-01-28T19:12:49.833201", "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "[Closed: 2026-01-28T19:12:49.833211] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T19:16:59.892654", "closed_at": "2026-01-28T19:16:59.892650", "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "[Closed: 2026-01-28T19:16:59.892655] Completed by autonomous execution", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "closed", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T19:18:27.819752", "closed_at": "2026-01-28T19:18:27.819748", "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "[Closed: 2026-01-28T19:18:27.819754] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "closed", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T19:20:10.863075", "closed_at": "2026-01-28T19:20:10.863070", "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "[Closed: 2026-01-28T19:20:10.863078] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "closed", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1c.2", "cub-b1c.3", "cub-b1c.4"], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169509", "updated_at": "2026-01-28T19:30:32.960816", "closed_at": "2026-01-28T19:30:32.960778", "acceptance_criteria": ["`RunService` provides the complete API for task execution", "`cli/run.py` only calls `RunService`, not domain modules directly", "Service is stateless \u2014 configuration passed in, no globals", "Tests verify service orchestration"], "notes": "[Closed: 2026-01-28T19:30:32.960820] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "closed", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T19:43:16.990826", "closed_at": "2026-01-28T19:43:16.990819", "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T19:43:16.990832] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "closed", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T19:49:58.382182", "closed_at": "2026-01-28T19:49:58.382177", "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "[Closed: 2026-01-28T19:49:58.382184] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "closed", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T19:58:57.828806", "closed_at": "2026-01-28T19:58:57.828802", "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "[Closed: 2026-01-28T19:58:57.828808] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "closed", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium", "blocking"], "depends_on": [], "blocks": ["cub-b1d.2", "cub-b1d.3"], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169582", "updated_at": "2026-01-28T20:09:46.523423", "closed_at": "2026-01-28T20:09:46.523370", "acceptance_criteria": ["All four sources produce relevant suggestions from real project data", "`TaskSource` detects the 9 stale epics in current project", "`GitSource` detects unpushed work and stale branches", "`MilestoneSource` infers 0.30 alpha target from sketches/CHANGELOG", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T20:09:46.523427] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "closed", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T20:15:09.194747", "closed_at": "2026-01-28T20:15:09.194743", "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "[Closed: 2026-01-28T20:15:09.194749] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:15:21.212567", "closed_at": null, "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 43 != 29"}
{"timestamp": "2026-01-28T20:20:37.423246", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T17:54:44.607353Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T17:54:44.606870Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1e.1): labels: ['blocking', 'cli', 'complexity:high', 'epic:cub-b1e', 'feature', 'model:opus', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:opus', 'complexity:high', 'blocking']; parent: None != cub-b1e; Task 1 (cub-b1e.2): labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'feature', 'model:sonnet', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1e; Task 2 (cub-b1e.3): labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'model:sonnet', 'phase-5', 'test'] != ['phase-5', 'cli', 'test', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1e"}
{"timestamp": "2026-01-28T20:20:37.468468", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 5"}
{"timestamp": "2026-01-28T20:20:37.519703", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T17:54:44.607353Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T17:54:44.606870Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1e.1): labels: ['blocking', 'cli', 'complexity:high', 'epic:cub-b1e', 'feature', 'model:opus', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:opus', 'complexity:high', 'blocking']; parent: None != cub-b1e; Task 1 (cub-b1e.2): labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'feature', 'model:sonnet', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1e; Task 2 (cub-b1e.3): labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'model:sonnet', 'phase-5', 'test'] != ['phase-5', 'cli', 'test', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1e"}
{"timestamp": "2026-01-28T20:20:37.571190", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 5"}
{"timestamp": "2026-01-28T20:20:37.780572", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:15:28.251750Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "closed", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium", "blocking"], "depends_on": [], "blocks": ["cub-b1d.2", "cub-b1d.3"], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169582", "updated_at": "2026-01-28T20:09:46.523423", "closed_at": "2026-01-28T20:09:46.523370", "acceptance_criteria": ["All four sources produce relevant suggestions from real project data", "`TaskSource` detects the 9 stale epics in current project", "`GitSource` detects unpushed work and stale branches", "`MilestoneSource` infers 0.30 alpha target from sketches/CHANGELOG", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T20:09:46.523427] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "closed", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T20:15:09.194747", "closed_at": "2026-01-28T20:15:09.194743", "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "[Closed: 2026-01-28T20:15:09.194749] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:15:21.212567", "closed_at": null, "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 1 != 3"}
{"timestamp": "2026-01-28T20:20:37.833375", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "closed", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1c.2", "cub-b1c.3", "cub-b1c.4"], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169509", "updated_at": "2026-01-28T19:30:32.960816", "closed_at": "2026-01-28T19:30:32.960778", "acceptance_criteria": ["`RunService` provides the complete API for task execution", "`cli/run.py` only calls `RunService`, not domain modules directly", "Service is stateless \u2014 configuration passed in, no globals", "Tests verify service orchestration"], "notes": "[Closed: 2026-01-28T19:30:32.960820] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "closed", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T19:43:16.990826", "closed_at": "2026-01-28T19:43:16.990819", "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T19:43:16.990832] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "closed", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T19:49:58.382182", "closed_at": "2026-01-28T19:49:58.382177", "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "[Closed: 2026-01-28T19:49:58.382184] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "closed", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T19:58:57.828806", "closed_at": "2026-01-28T19:58:57.828802", "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "[Closed: 2026-01-28T19:58:57.828808] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 4"}
{"timestamp": "2026-01-28T20:20:37.889561", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169408", "updated_at": "2026-01-28T19:02:20.690087", "closed_at": "2026-01-28T19:02:20.690062", "acceptance_criteria": ["Zero Rich imports in `core/review/`", "`cli/review/display.py` handles all review rendering", "`cub review` command output unchanged from user's perspective", "Tests pass"], "notes": "[Closed: 2026-01-28T19:02:20.690089] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "closed", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T19:12:49.833208", "closed_at": "2026-01-28T19:12:49.833201", "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "[Closed: 2026-01-28T19:12:49.833211] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T19:16:59.892654", "closed_at": "2026-01-28T19:16:59.892650", "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "[Closed: 2026-01-28T19:16:59.892655] Completed by autonomous execution", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "closed", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T19:18:27.819752", "closed_at": "2026-01-28T19:18:27.819748", "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "[Closed: 2026-01-28T19:18:27.819754] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "closed", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T19:20:10.863075", "closed_at": "2026-01-28T19:20:10.863070", "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "[Closed: 2026-01-28T19:20:10.863078] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 5"}
{"timestamp": "2026-01-28T20:20:38.084764", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}], "secondary_result": "[]", "difference_summary": "List length mismatch: 5 != 0"}
{"timestamp": "2026-01-28T20:20:38.176940", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}], "secondary_result": [{"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1f.1): labels: ['complexity:medium', 'docs', 'epic:cub-b1f', 'feature', 'model:sonnet', 'phase-6'] != ['phase-6', 'docs', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1f; Task 1 (cub-b1f.2): labels: ['complexity:medium', 'docs', 'epic:cub-b1f', 'model:sonnet', 'phase-6'] != ['phase-6', 'docs', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1f; Task 2 (cub-b1f.3): labels: ['complexity:medium', 'epic:cub-b1f', 'model:sonnet', 'phase-6', 'test'] != ['phase-6', 'test', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1f"}
{"timestamp": "2026-01-28T20:20:38.286664", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "secondary_result": "[]", "difference_summary": "List length mismatch: 3 != 0"}
{"timestamp": "2026-01-28T20:20:38.333617", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "secondary_result": "[]", "difference_summary": "List length mismatch: 3 != 0"}
{"timestamp": "2026-01-28T20:20:38.437705", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": "[]", "difference_summary": "List length mismatch: 3 != 0"}
{"timestamp": "2026-01-28T20:20:38.492176", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:15:28.251750Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["phase-4", "core", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408089", "updated_at": "2026-01-28T17:54:44.408089", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}], "difference_summary": "List length mismatch: 23 != 9"}
{"timestamp": "2026-01-28T20:20:38.540243", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:15:28.251750Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:15:21.212567", "closed_at": null, "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1d.3): labels: ['complexity:medium', 'core', 'epic:cub-b1d', 'feature', 'model:sonnet', 'phase-4'] != ['phase-4', 'core', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1d"}
{"timestamp": "2026-01-28T20:20:38.595363", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T17:54:44.607353Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T17:54:44.606870Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["phase-4", "core", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408089", "updated_at": "2026-01-28T17:54:44.408089", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 42 != 9"}
{"timestamp": "2026-01-28T20:20:38.723890", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T17:54:44.607353Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T17:54:44.606870Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:15:28.251750Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "closed", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["phase-1", "core", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407838", "updated_at": "2026-01-28T18:57:22.732005", "closed_at": "2026-01-28T18:57:22.732002", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T18:57:22.732007] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "closed", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["phase-2", "core", "refactor", "cleanup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407983", "updated_at": "2026-01-28T19:20:21.672421", "closed_at": "2026-01-28T19:20:21.672417", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:20:21.672422] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "closed", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["phase-3", "core", "architecture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408044", "updated_at": "2026-01-28T19:59:09.455587", "closed_at": "2026-01-28T19:59:09.455581", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:59:09.455589] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["phase-4", "core", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408089", "updated_at": "2026-01-28T17:54:44.408089", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169408", "updated_at": "2026-01-28T19:02:20.690087", "closed_at": "2026-01-28T19:02:20.690062", "acceptance_criteria": ["Zero Rich imports in `core/review/`", "`cli/review/display.py` handles all review rendering", "`cub review` command output unchanged from user's perspective", "Tests pass"], "notes": "[Closed: 2026-01-28T19:02:20.690089] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "closed", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T19:12:49.833208", "closed_at": "2026-01-28T19:12:49.833201", "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "[Closed: 2026-01-28T19:12:49.833211] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T19:16:59.892654", "closed_at": "2026-01-28T19:16:59.892650", "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "[Closed: 2026-01-28T19:16:59.892655] Completed by autonomous execution", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "closed", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T19:18:27.819752", "closed_at": "2026-01-28T19:18:27.819748", "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "[Closed: 2026-01-28T19:18:27.819754] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "closed", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T19:20:10.863075", "closed_at": "2026-01-28T19:20:10.863070", "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "[Closed: 2026-01-28T19:20:10.863078] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "closed", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1c.2", "cub-b1c.3", "cub-b1c.4"], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169509", "updated_at": "2026-01-28T19:30:32.960816", "closed_at": "2026-01-28T19:30:32.960778", "acceptance_criteria": ["`RunService` provides the complete API for task execution", "`cli/run.py` only calls `RunService`, not domain modules directly", "Service is stateless \u2014 configuration passed in, no globals", "Tests verify service orchestration"], "notes": "[Closed: 2026-01-28T19:30:32.960820] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "closed", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T19:43:16.990826", "closed_at": "2026-01-28T19:43:16.990819", "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T19:43:16.990832] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "closed", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T19:49:58.382182", "closed_at": "2026-01-28T19:49:58.382177", "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "[Closed: 2026-01-28T19:49:58.382184] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "closed", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T19:58:57.828806", "closed_at": "2026-01-28T19:58:57.828802", "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "[Closed: 2026-01-28T19:58:57.828808] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "closed", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium", "blocking"], "depends_on": [], "blocks": ["cub-b1d.2", "cub-b1d.3"], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169582", "updated_at": "2026-01-28T20:09:46.523423", "closed_at": "2026-01-28T20:09:46.523370", "acceptance_criteria": ["All four sources produce relevant suggestions from real project data", "`TaskSource` detects the 9 stale epics in current project", "`GitSource` detects unpushed work and stale branches", "`MilestoneSource` infers 0.30 alpha target from sketches/CHANGELOG", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T20:09:46.523427] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "closed", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T20:15:09.194747", "closed_at": "2026-01-28T20:15:09.194743", "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "[Closed: 2026-01-28T20:15:09.194749] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:15:21.212567", "closed_at": null, "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 43 != 29"}
{"timestamp": "2026-01-28T20:20:38.774119", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T17:54:44.607353Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T17:54:44.606870Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1e.1): labels: ['blocking', 'cli', 'complexity:high', 'epic:cub-b1e', 'feature', 'model:opus', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:opus', 'complexity:high', 'blocking']; parent: None != cub-b1e; Task 1 (cub-b1e.2): labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'feature', 'model:sonnet', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1e; Task 2 (cub-b1e.3): labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'model:sonnet', 'phase-5', 'test'] != ['phase-5', 'cli', 'test', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1e"}
{"timestamp": "2026-01-28T20:20:38.821240", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 5"}
{"timestamp": "2026-01-28T20:20:38.861944", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T17:54:44.607353Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T17:54:44.606870Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1e.1): labels: ['blocking', 'cli', 'complexity:high', 'epic:cub-b1e', 'feature', 'model:opus', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:opus', 'complexity:high', 'blocking']; parent: None != cub-b1e; Task 1 (cub-b1e.2): labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'feature', 'model:sonnet', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1e; Task 2 (cub-b1e.3): labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'model:sonnet', 'phase-5', 'test'] != ['phase-5', 'cli', 'test', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1e"}
{"timestamp": "2026-01-28T20:20:38.910572", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 5"}
{"timestamp": "2026-01-28T20:20:39.199216", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:15:28.251750Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "closed", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium", "blocking"], "depends_on": [], "blocks": ["cub-b1d.2", "cub-b1d.3"], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169582", "updated_at": "2026-01-28T20:09:46.523423", "closed_at": "2026-01-28T20:09:46.523370", "acceptance_criteria": ["All four sources produce relevant suggestions from real project data", "`TaskSource` detects the 9 stale epics in current project", "`GitSource` detects unpushed work and stale branches", "`MilestoneSource` infers 0.30 alpha target from sketches/CHANGELOG", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T20:09:46.523427] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "closed", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T20:15:09.194747", "closed_at": "2026-01-28T20:15:09.194743", "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "[Closed: 2026-01-28T20:15:09.194749] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:15:21.212567", "closed_at": null, "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 1 != 3"}
{"timestamp": "2026-01-28T20:20:39.261118", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "closed", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1c.2", "cub-b1c.3", "cub-b1c.4"], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169509", "updated_at": "2026-01-28T19:30:32.960816", "closed_at": "2026-01-28T19:30:32.960778", "acceptance_criteria": ["`RunService` provides the complete API for task execution", "`cli/run.py` only calls `RunService`, not domain modules directly", "Service is stateless \u2014 configuration passed in, no globals", "Tests verify service orchestration"], "notes": "[Closed: 2026-01-28T19:30:32.960820] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "closed", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T19:43:16.990826", "closed_at": "2026-01-28T19:43:16.990819", "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T19:43:16.990832] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "closed", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T19:49:58.382182", "closed_at": "2026-01-28T19:49:58.382177", "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "[Closed: 2026-01-28T19:49:58.382184] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "closed", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T19:58:57.828806", "closed_at": "2026-01-28T19:58:57.828802", "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "[Closed: 2026-01-28T19:58:57.828808] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 4"}
{"timestamp": "2026-01-28T20:20:39.315640", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169408", "updated_at": "2026-01-28T19:02:20.690087", "closed_at": "2026-01-28T19:02:20.690062", "acceptance_criteria": ["Zero Rich imports in `core/review/`", "`cli/review/display.py` handles all review rendering", "`cub review` command output unchanged from user's perspective", "Tests pass"], "notes": "[Closed: 2026-01-28T19:02:20.690089] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "closed", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T19:12:49.833208", "closed_at": "2026-01-28T19:12:49.833201", "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "[Closed: 2026-01-28T19:12:49.833211] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T19:16:59.892654", "closed_at": "2026-01-28T19:16:59.892650", "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "[Closed: 2026-01-28T19:16:59.892655] Completed by autonomous execution", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "closed", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T19:18:27.819752", "closed_at": "2026-01-28T19:18:27.819748", "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "[Closed: 2026-01-28T19:18:27.819754] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "closed", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T19:20:10.863075", "closed_at": "2026-01-28T19:20:10.863070", "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "[Closed: 2026-01-28T19:20:10.863078] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 5"}
{"timestamp": "2026-01-28T20:20:39.494194", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}], "secondary_result": "[]", "difference_summary": "List length mismatch: 5 != 0"}
{"timestamp": "2026-01-28T20:20:39.593402", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}], "secondary_result": [{"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1f.1): labels: ['complexity:medium', 'docs', 'epic:cub-b1f', 'feature', 'model:sonnet', 'phase-6'] != ['phase-6', 'docs', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1f; Task 1 (cub-b1f.2): labels: ['complexity:medium', 'docs', 'epic:cub-b1f', 'model:sonnet', 'phase-6'] != ['phase-6', 'docs', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1f; Task 2 (cub-b1f.3): labels: ['complexity:medium', 'epic:cub-b1f', 'model:sonnet', 'phase-6', 'test'] != ['phase-6', 'test', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1f"}
{"timestamp": "2026-01-28T20:20:39.690410", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "secondary_result": "[]", "difference_summary": "List length mismatch: 3 != 0"}
{"timestamp": "2026-01-28T20:20:39.744408", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "secondary_result": "[]", "difference_summary": "List length mismatch: 3 != 0"}
{"timestamp": "2026-01-28T20:20:39.846794", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": "[]", "difference_summary": "List length mismatch: 3 != 0"}
{"timestamp": "2026-01-28T20:20:39.908939", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T17:54:44.607353Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T17:54:44.606870Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:15:28.251750Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "closed", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["phase-1", "core", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407838", "updated_at": "2026-01-28T18:57:22.732005", "closed_at": "2026-01-28T18:57:22.732002", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T18:57:22.732007] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "closed", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["phase-2", "core", "refactor", "cleanup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407983", "updated_at": "2026-01-28T19:20:21.672421", "closed_at": "2026-01-28T19:20:21.672417", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:20:21.672422] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "closed", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["phase-3", "core", "architecture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408044", "updated_at": "2026-01-28T19:59:09.455587", "closed_at": "2026-01-28T19:59:09.455581", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:59:09.455589] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["phase-4", "core", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408089", "updated_at": "2026-01-28T17:54:44.408089", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169408", "updated_at": "2026-01-28T19:02:20.690087", "closed_at": "2026-01-28T19:02:20.690062", "acceptance_criteria": ["Zero Rich imports in `core/review/`", "`cli/review/display.py` handles all review rendering", "`cub review` command output unchanged from user's perspective", "Tests pass"], "notes": "[Closed: 2026-01-28T19:02:20.690089] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "closed", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T19:12:49.833208", "closed_at": "2026-01-28T19:12:49.833201", "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "[Closed: 2026-01-28T19:12:49.833211] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T19:16:59.892654", "closed_at": "2026-01-28T19:16:59.892650", "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "[Closed: 2026-01-28T19:16:59.892655] Completed by autonomous execution", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "closed", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T19:18:27.819752", "closed_at": "2026-01-28T19:18:27.819748", "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "[Closed: 2026-01-28T19:18:27.819754] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "closed", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T19:20:10.863075", "closed_at": "2026-01-28T19:20:10.863070", "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "[Closed: 2026-01-28T19:20:10.863078] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "closed", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1c.2", "cub-b1c.3", "cub-b1c.4"], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169509", "updated_at": "2026-01-28T19:30:32.960816", "closed_at": "2026-01-28T19:30:32.960778", "acceptance_criteria": ["`RunService` provides the complete API for task execution", "`cli/run.py` only calls `RunService`, not domain modules directly", "Service is stateless \u2014 configuration passed in, no globals", "Tests verify service orchestration"], "notes": "[Closed: 2026-01-28T19:30:32.960820] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "closed", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T19:43:16.990826", "closed_at": "2026-01-28T19:43:16.990819", "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T19:43:16.990832] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "closed", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T19:49:58.382182", "closed_at": "2026-01-28T19:49:58.382177", "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "[Closed: 2026-01-28T19:49:58.382184] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "closed", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T19:58:57.828806", "closed_at": "2026-01-28T19:58:57.828802", "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "[Closed: 2026-01-28T19:58:57.828808] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "closed", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium", "blocking"], "depends_on": [], "blocks": ["cub-b1d.2", "cub-b1d.3"], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169582", "updated_at": "2026-01-28T20:09:46.523423", "closed_at": "2026-01-28T20:09:46.523370", "acceptance_criteria": ["All four sources produce relevant suggestions from real project data", "`TaskSource` detects the 9 stale epics in current project", "`GitSource` detects unpushed work and stale branches", "`MilestoneSource` infers 0.30 alpha target from sketches/CHANGELOG", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T20:09:46.523427] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "closed", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T20:15:09.194747", "closed_at": "2026-01-28T20:15:09.194743", "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "[Closed: 2026-01-28T20:15:09.194749] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:15:21.212567", "closed_at": null, "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 43 != 29"}
{"timestamp": "2026-01-28T20:20:39.975041", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T17:54:44.607353Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T17:54:44.606870Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["phase-4", "core", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408089", "updated_at": "2026-01-28T17:54:44.408089", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 42 != 9"}
{"timestamp": "2026-01-28T20:20:40.028453", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:15:28.251750Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:15:21.212567", "closed_at": null, "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1d.3): labels: ['complexity:medium', 'core', 'epic:cub-b1d', 'feature', 'model:sonnet', 'phase-4'] != ['phase-4', 'core', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1d"}
{"timestamp": "2026-01-28T20:20:40.091170", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:15:28.251750Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["phase-4", "core", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408089", "updated_at": "2026-01-28T17:54:44.408089", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}], "difference_summary": "List length mismatch: 23 != 9"}
{"timestamp": "2026-01-28T20:22:31.855701", "operation": "get_task", "task_id": "cub-b1d.3", "primary_result": {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "closed", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:21:11.346326Z", "closed_at": "2026-01-28T20:21:11.346326Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "in_progress", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:15:21.212567", "closed_at": null, "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['complexity:medium', 'core', 'epic:cub-b1d', 'feature', 'model:sonnet', 'phase-4'] != ['phase-4', 'core', 'feature', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:22:31.939831", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 42, "open": 42, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 9, "in_progress": 1, "closed": 19}, "difference_summary": "total: 42 != 29; open: 42 != 9; in_progress: 0 != 1; closed: 0 != 19"}
{"timestamp": "2026-01-28T20:22:32.064946", "operation": "close_task", "task_id": "cub-b1d.3", "primary_result": {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "closed", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:22:31.989371Z", "closed_at": "2026-01-28T20:22:31.989371Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "closed", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:22:32.062910", "closed_at": "2026-01-28T20:22:32.062906", "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "[Closed: 2026-01-28T20:22:32.062912] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['complexity:medium', 'core', 'epic:cub-b1d', 'feature', 'model:sonnet', 'phase-4'] != ['phase-4', 'core', 'feature', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:22:32.125849", "operation": "get_task", "task_id": "cub-b1d.3", "primary_result": {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "closed", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["complexity:medium", "core", "epic:cub-b1d", "feature", "model:sonnet", "phase-4"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:44.409608Z", "updated_at": "2026-01-28T20:22:31.989371Z", "closed_at": "2026-01-28T20:22:31.989371Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "closed", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:22:32.062910", "closed_at": "2026-01-28T20:22:32.062906", "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "[Closed: 2026-01-28T20:22:32.062912] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['complexity:medium', 'core', 'epic:cub-b1d', 'feature', 'model:sonnet', 'phase-4'] != ['phase-4', 'core', 'feature', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:22:41.965518", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 42, "open": 42, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 9, "in_progress": 0, "closed": 20}, "difference_summary": "total: 42 != 29; open: 42 != 9; closed: 0 != 20"}
{"timestamp": "2026-01-28T20:22:45.860330", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 42, "open": 42, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 8, "in_progress": 0, "closed": 21}, "difference_summary": "total: 42 != 29; open: 42 != 8; closed: 0 != 21"}
{"timestamp": "2026-01-28T20:22:45.912005", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}], "secondary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 1 != 3"}
{"timestamp": "2026-01-28T20:22:45.959619", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}], "secondary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 1 != 3"}
{"timestamp": "2026-01-28T20:22:46.008001", "operation": "get_task", "task_id": "cub-b1e.1", "primary_result": {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T17:54:44.606341Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, "secondary_result": {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "open", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T17:54:46.169633", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, "difference_summary": "labels: ['blocking', 'cli', 'complexity:high', 'epic:cub-b1e', 'feature', 'model:opus', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:opus', 'complexity:high', 'blocking']"}
{"timestamp": "2026-01-28T20:22:46.114251", "operation": "update_task", "task_id": "cub-b1e.1", "primary_result": {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "in_progress", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": "cub-20260128-202245", "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T20:22:46.056072Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "secondary_result": {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "in_progress", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T20:22:46.112534", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "difference_summary": "labels: ['blocking', 'cli', 'complexity:high', 'epic:cub-b1e', 'feature', 'model:opus', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:opus', 'complexity:high', 'blocking']"}
{"timestamp": "2026-01-28T20:31:26.329579", "operation": "get_task", "task_id": "cub-b1e.1", "primary_result": {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "closed", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": "cub-20260128-202245", "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T20:30:50.923624Z", "closed_at": "2026-01-28T20:30:50.923624Z", "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "secondary_result": {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "in_progress", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T20:22:46.112534", "closed_at": null, "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['blocking', 'cli', 'complexity:high', 'epic:cub-b1e', 'feature', 'model:opus', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:opus', 'complexity:high', 'blocking']"}
{"timestamp": "2026-01-28T20:31:26.383042", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 41, "open": 41, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 7, "in_progress": 1, "closed": 21}, "difference_summary": "total: 41 != 29; open: 41 != 7; in_progress: 0 != 1; closed: 0 != 21"}
{"timestamp": "2026-01-28T20:31:26.495095", "operation": "close_task", "task_id": "cub-b1e.1", "primary_result": {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "closed", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": "cub-20260128-202245", "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T20:31:26.430617Z", "closed_at": "2026-01-28T20:31:26.430617Z", "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "secondary_result": {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "closed", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T20:31:26.493282", "closed_at": "2026-01-28T20:31:26.493257", "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "[Closed: 2026-01-28T20:31:26.493284] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "difference_summary": "labels: ['blocking', 'cli', 'complexity:high', 'epic:cub-b1e', 'feature', 'model:opus', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:opus', 'complexity:high', 'blocking']"}
{"timestamp": "2026-01-28T20:31:26.554058", "operation": "get_task", "task_id": "cub-b1e.1", "primary_result": {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "closed", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": "cub-20260128-202245", "labels": ["blocking", "cli", "complexity:high", "epic:cub-b1e", "feature", "model:opus", "phase-5"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:44.409628Z", "updated_at": "2026-01-28T20:31:26.430617Z", "closed_at": "2026-01-28T20:31:26.430617Z", "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "secondary_result": {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "closed", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T20:31:26.493282", "closed_at": "2026-01-28T20:31:26.493257", "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "[Closed: 2026-01-28T20:31:26.493284] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "difference_summary": "labels: ['blocking', 'cli', 'complexity:high', 'epic:cub-b1e', 'feature', 'model:opus', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:opus', 'complexity:high', 'blocking']"}
{"timestamp": "2026-01-28T20:31:38.711464", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T17:54:44.606870Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T17:54:44.607353Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1e.2): labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'feature', 'model:sonnet', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1e; Task 1 (cub-b1e.3): labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'model:sonnet', 'phase-5', 'test'] != ['phase-5', 'cli', 'test', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1e"}
{"timestamp": "2026-01-28T20:31:38.781826", "operation": "get_task", "task_id": "cub-b1e.2", "primary_result": {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T17:54:44.606870Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "open", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": null, "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T17:54:46.169652", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "difference_summary": "labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'feature', 'model:sonnet', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:31:38.904441", "operation": "update_task", "task_id": "cub-b1e.2", "primary_result": {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "in_progress", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": "cub-20260128-202245", "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T20:31:38.840373Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "in_progress", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T20:31:38.903181", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'feature', 'model:sonnet', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:37:11.815809", "operation": "get_task", "task_id": "cub-b1e.2", "primary_result": {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "closed", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": "cub-20260128-202245", "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T20:36:09.869839Z", "closed_at": "2026-01-28T20:36:09.869839Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "in_progress", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T20:31:38.903181", "closed_at": null, "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'feature', 'model:sonnet', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:37:11.865169", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 40, "open": 40, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 6, "in_progress": 1, "closed": 22}, "difference_summary": "total: 40 != 29; open: 40 != 6; in_progress: 0 != 1; closed: 0 != 22"}
{"timestamp": "2026-01-28T20:37:11.974095", "operation": "close_task", "task_id": "cub-b1e.2", "primary_result": {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "closed", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": "cub-20260128-202245", "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T20:37:11.913442Z", "closed_at": "2026-01-28T20:37:11.913442Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "closed", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T20:37:11.972618", "closed_at": "2026-01-28T20:37:11.972614", "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "[Closed: 2026-01-28T20:37:11.972622] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'feature', 'model:sonnet', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:37:12.044838", "operation": "get_task", "task_id": "cub-b1e.2", "primary_result": {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "closed", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": "cub-20260128-202245", "labels": ["cli", "complexity:medium", "epic:cub-b1e", "feature", "model:sonnet", "phase-5"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:44.409649Z", "updated_at": "2026-01-28T20:37:11.913442Z", "closed_at": "2026-01-28T20:37:11.913442Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "closed", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T20:37:11.972618", "closed_at": "2026-01-28T20:37:11.972614", "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "[Closed: 2026-01-28T20:37:11.972622] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'feature', 'model:sonnet', 'phase-5'] != ['phase-5', 'cli', 'feature', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:37:23.918049", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T17:54:44.607353Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1e.3): labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'model:sonnet', 'phase-5', 'test'] != ['phase-5', 'cli', 'test', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1e"}
{"timestamp": "2026-01-28T20:37:23.970584", "operation": "get_task", "task_id": "cub-b1e.3", "primary_result": {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T17:54:44.607353Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "open", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": null, "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T17:54:46.169674", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "difference_summary": "labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'model:sonnet', 'phase-5', 'test'] != ['phase-5', 'cli', 'test', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:37:24.108869", "operation": "update_task", "task_id": "cub-b1e.3", "primary_result": {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "in_progress", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": "cub-20260128-202245", "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T20:37:24.031408Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "in_progress", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T20:37:24.107553", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'model:sonnet', 'phase-5', 'test'] != ['phase-5', 'cli', 'test', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:40:15.005223", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "in_progress", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": "cub-20260128-202245", "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T20:37:32.147989Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "closed", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["phase-1", "core", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407838", "updated_at": "2026-01-28T18:57:22.732005", "closed_at": "2026-01-28T18:57:22.732002", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T18:57:22.732007] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "closed", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["phase-2", "core", "refactor", "cleanup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407983", "updated_at": "2026-01-28T19:20:21.672421", "closed_at": "2026-01-28T19:20:21.672417", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:20:21.672422] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "closed", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["phase-3", "core", "architecture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408044", "updated_at": "2026-01-28T19:59:09.455587", "closed_at": "2026-01-28T19:59:09.455581", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:59:09.455589] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "closed", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["phase-4", "core", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408089", "updated_at": "2026-01-28T20:22:42.124609", "closed_at": "2026-01-28T20:22:42.124605", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T20:22:42.124610] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169408", "updated_at": "2026-01-28T19:02:20.690087", "closed_at": "2026-01-28T19:02:20.690062", "acceptance_criteria": ["Zero Rich imports in `core/review/`", "`cli/review/display.py` handles all review rendering", "`cub review` command output unchanged from user's perspective", "Tests pass"], "notes": "[Closed: 2026-01-28T19:02:20.690089] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "closed", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T19:12:49.833208", "closed_at": "2026-01-28T19:12:49.833201", "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "[Closed: 2026-01-28T19:12:49.833211] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T19:16:59.892654", "closed_at": "2026-01-28T19:16:59.892650", "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "[Closed: 2026-01-28T19:16:59.892655] Completed by autonomous execution", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "closed", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T19:18:27.819752", "closed_at": "2026-01-28T19:18:27.819748", "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "[Closed: 2026-01-28T19:18:27.819754] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "closed", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T19:20:10.863075", "closed_at": "2026-01-28T19:20:10.863070", "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "[Closed: 2026-01-28T19:20:10.863078] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "closed", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1c.2", "cub-b1c.3", "cub-b1c.4"], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169509", "updated_at": "2026-01-28T19:30:32.960816", "closed_at": "2026-01-28T19:30:32.960778", "acceptance_criteria": ["`RunService` provides the complete API for task execution", "`cli/run.py` only calls `RunService`, not domain modules directly", "Service is stateless \u2014 configuration passed in, no globals", "Tests verify service orchestration"], "notes": "[Closed: 2026-01-28T19:30:32.960820] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "closed", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T19:43:16.990826", "closed_at": "2026-01-28T19:43:16.990819", "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T19:43:16.990832] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "closed", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T19:49:58.382182", "closed_at": "2026-01-28T19:49:58.382177", "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "[Closed: 2026-01-28T19:49:58.382184] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "closed", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T19:58:57.828806", "closed_at": "2026-01-28T19:58:57.828802", "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "[Closed: 2026-01-28T19:58:57.828808] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "closed", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium", "blocking"], "depends_on": [], "blocks": ["cub-b1d.2", "cub-b1d.3"], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169582", "updated_at": "2026-01-28T20:09:46.523423", "closed_at": "2026-01-28T20:09:46.523370", "acceptance_criteria": ["All four sources produce relevant suggestions from real project data", "`TaskSource` detects the 9 stale epics in current project", "`GitSource` detects unpushed work and stale branches", "`MilestoneSource` infers 0.30 alpha target from sketches/CHANGELOG", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T20:09:46.523427] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "closed", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T20:15:09.194747", "closed_at": "2026-01-28T20:15:09.194743", "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "[Closed: 2026-01-28T20:15:09.194749] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "closed", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:22:32.062910", "closed_at": "2026-01-28T20:22:32.062906", "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "[Closed: 2026-01-28T20:22:32.062912] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "closed", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T20:31:26.493282", "closed_at": "2026-01-28T20:31:26.493257", "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "[Closed: 2026-01-28T20:31:26.493284] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "closed", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T20:37:11.972618", "closed_at": "2026-01-28T20:37:11.972614", "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "[Closed: 2026-01-28T20:37:11.972622] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "in_progress", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T20:37:24.107553", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 40 != 29"}
{"timestamp": "2026-01-28T20:41:12.522749", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 40, "open": 39, "in_progress": 1, "closed": 0}, "secondary_result": {"total": 29, "open": 5, "in_progress": 1, "closed": 23}, "difference_summary": "total: 40 != 29; open: 39 != 5; closed: 0 != 23"}
{"timestamp": "2026-01-28T20:41:12.581664", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "in_progress", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": "cub-20260128-202245", "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T20:37:32.147989Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}], "difference_summary": "List length mismatch: 22 != 5"}
{"timestamp": "2026-01-28T20:41:12.638028", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "in_progress", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": "cub-20260128-202245", "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T20:37:32.147989Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}], "difference_summary": "List length mismatch: 22 != 5"}
{"timestamp": "2026-01-28T20:41:12.713606", "operation": "get_task", "task_id": "cub-r1a", "primary_result": {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, "secondary_result": "None", "difference_summary": "Secondary task is None, primary is not"}
{"timestamp": "2026-01-28T20:43:28.795560", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 40, "open": 38, "in_progress": 2, "closed": 0}, "secondary_result": {"total": 29, "open": 5, "in_progress": 1, "closed": 23}, "difference_summary": "total: 40 != 29; open: 38 != 5; in_progress: 2 != 1; closed: 0 != 23"}
{"timestamp": "2026-01-28T20:43:28.852811", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "in_progress", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": "cub-20260128-204112", "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T20:41:24.531384Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "in_progress", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": "cub-20260128-202245", "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T20:37:32.147989Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}], "difference_summary": "List length mismatch: 22 != 5"}
{"timestamp": "2026-01-28T20:43:28.915212", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "in_progress", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": "cub-20260128-204112", "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T20:41:24.531384Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "in_progress", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": "cub-20260128-202245", "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T20:37:32.147989Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}], "difference_summary": "List length mismatch: 22 != 5"}
{"timestamp": "2026-01-28T20:43:28.973879", "operation": "get_task", "task_id": "cub-r1a", "primary_result": {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "in_progress", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": "cub-20260128-204112", "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T20:41:24.531384Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, "secondary_result": "None", "difference_summary": "Secondary task is None, primary is not"}
{"timestamp": "2026-01-28T20:44:06.548944", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "in_progress", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": "cub-20260128-204328", "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T20:43:29.037004Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "in_progress", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": "cub-20260128-202245", "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T20:37:32.147989Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "closed", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["phase-1", "core", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407838", "updated_at": "2026-01-28T18:57:22.732005", "closed_at": "2026-01-28T18:57:22.732002", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T18:57:22.732007] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "closed", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["phase-2", "core", "refactor", "cleanup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407983", "updated_at": "2026-01-28T19:20:21.672421", "closed_at": "2026-01-28T19:20:21.672417", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:20:21.672422] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "closed", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["phase-3", "core", "architecture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408044", "updated_at": "2026-01-28T19:59:09.455587", "closed_at": "2026-01-28T19:59:09.455581", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:59:09.455589] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "closed", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["phase-4", "core", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408089", "updated_at": "2026-01-28T20:22:42.124609", "closed_at": "2026-01-28T20:22:42.124605", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T20:22:42.124610] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169408", "updated_at": "2026-01-28T19:02:20.690087", "closed_at": "2026-01-28T19:02:20.690062", "acceptance_criteria": ["Zero Rich imports in `core/review/`", "`cli/review/display.py` handles all review rendering", "`cub review` command output unchanged from user's perspective", "Tests pass"], "notes": "[Closed: 2026-01-28T19:02:20.690089] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "closed", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T19:12:49.833208", "closed_at": "2026-01-28T19:12:49.833201", "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "[Closed: 2026-01-28T19:12:49.833211] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T19:16:59.892654", "closed_at": "2026-01-28T19:16:59.892650", "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "[Closed: 2026-01-28T19:16:59.892655] Completed by autonomous execution", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "closed", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T19:18:27.819752", "closed_at": "2026-01-28T19:18:27.819748", "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "[Closed: 2026-01-28T19:18:27.819754] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "closed", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T19:20:10.863075", "closed_at": "2026-01-28T19:20:10.863070", "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "[Closed: 2026-01-28T19:20:10.863078] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "closed", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1c.2", "cub-b1c.3", "cub-b1c.4"], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169509", "updated_at": "2026-01-28T19:30:32.960816", "closed_at": "2026-01-28T19:30:32.960778", "acceptance_criteria": ["`RunService` provides the complete API for task execution", "`cli/run.py` only calls `RunService`, not domain modules directly", "Service is stateless \u2014 configuration passed in, no globals", "Tests verify service orchestration"], "notes": "[Closed: 2026-01-28T19:30:32.960820] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "closed", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T19:43:16.990826", "closed_at": "2026-01-28T19:43:16.990819", "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T19:43:16.990832] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "closed", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T19:49:58.382182", "closed_at": "2026-01-28T19:49:58.382177", "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "[Closed: 2026-01-28T19:49:58.382184] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "closed", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T19:58:57.828806", "closed_at": "2026-01-28T19:58:57.828802", "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "[Closed: 2026-01-28T19:58:57.828808] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "closed", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium", "blocking"], "depends_on": [], "blocks": ["cub-b1d.2", "cub-b1d.3"], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169582", "updated_at": "2026-01-28T20:09:46.523423", "closed_at": "2026-01-28T20:09:46.523370", "acceptance_criteria": ["All four sources produce relevant suggestions from real project data", "`TaskSource` detects the 9 stale epics in current project", "`GitSource` detects unpushed work and stale branches", "`MilestoneSource` infers 0.30 alpha target from sketches/CHANGELOG", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T20:09:46.523427] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "closed", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T20:15:09.194747", "closed_at": "2026-01-28T20:15:09.194743", "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "[Closed: 2026-01-28T20:15:09.194749] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "closed", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:22:32.062910", "closed_at": "2026-01-28T20:22:32.062906", "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "[Closed: 2026-01-28T20:22:32.062912] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "closed", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T20:31:26.493282", "closed_at": "2026-01-28T20:31:26.493257", "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "[Closed: 2026-01-28T20:31:26.493284] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "closed", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T20:37:11.972618", "closed_at": "2026-01-28T20:37:11.972614", "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "[Closed: 2026-01-28T20:37:11.972622] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "in_progress", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T20:37:24.107553", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 40 != 29"}
{"timestamp": "2026-01-28T20:44:28.700091", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "in_progress", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": "cub-20260128-204328", "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T20:43:29.037004Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "in_progress", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": "cub-20260128-202245", "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T20:37:32.147989Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "closed", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["phase-1", "core", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407838", "updated_at": "2026-01-28T18:57:22.732005", "closed_at": "2026-01-28T18:57:22.732002", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T18:57:22.732007] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "closed", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["phase-2", "core", "refactor", "cleanup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407983", "updated_at": "2026-01-28T19:20:21.672421", "closed_at": "2026-01-28T19:20:21.672417", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:20:21.672422] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "closed", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["phase-3", "core", "architecture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408044", "updated_at": "2026-01-28T19:59:09.455587", "closed_at": "2026-01-28T19:59:09.455581", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:59:09.455589] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "closed", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["phase-4", "core", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408089", "updated_at": "2026-01-28T20:22:42.124609", "closed_at": "2026-01-28T20:22:42.124605", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T20:22:42.124610] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169408", "updated_at": "2026-01-28T19:02:20.690087", "closed_at": "2026-01-28T19:02:20.690062", "acceptance_criteria": ["Zero Rich imports in `core/review/`", "`cli/review/display.py` handles all review rendering", "`cub review` command output unchanged from user's perspective", "Tests pass"], "notes": "[Closed: 2026-01-28T19:02:20.690089] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "closed", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T19:12:49.833208", "closed_at": "2026-01-28T19:12:49.833201", "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "[Closed: 2026-01-28T19:12:49.833211] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T19:16:59.892654", "closed_at": "2026-01-28T19:16:59.892650", "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "[Closed: 2026-01-28T19:16:59.892655] Completed by autonomous execution", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "closed", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T19:18:27.819752", "closed_at": "2026-01-28T19:18:27.819748", "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "[Closed: 2026-01-28T19:18:27.819754] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "closed", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T19:20:10.863075", "closed_at": "2026-01-28T19:20:10.863070", "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "[Closed: 2026-01-28T19:20:10.863078] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "closed", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1c.2", "cub-b1c.3", "cub-b1c.4"], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169509", "updated_at": "2026-01-28T19:30:32.960816", "closed_at": "2026-01-28T19:30:32.960778", "acceptance_criteria": ["`RunService` provides the complete API for task execution", "`cli/run.py` only calls `RunService`, not domain modules directly", "Service is stateless \u2014 configuration passed in, no globals", "Tests verify service orchestration"], "notes": "[Closed: 2026-01-28T19:30:32.960820] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "closed", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T19:43:16.990826", "closed_at": "2026-01-28T19:43:16.990819", "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T19:43:16.990832] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "closed", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T19:49:58.382182", "closed_at": "2026-01-28T19:49:58.382177", "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "[Closed: 2026-01-28T19:49:58.382184] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "closed", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T19:58:57.828806", "closed_at": "2026-01-28T19:58:57.828802", "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "[Closed: 2026-01-28T19:58:57.828808] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "closed", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium", "blocking"], "depends_on": [], "blocks": ["cub-b1d.2", "cub-b1d.3"], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169582", "updated_at": "2026-01-28T20:09:46.523423", "closed_at": "2026-01-28T20:09:46.523370", "acceptance_criteria": ["All four sources produce relevant suggestions from real project data", "`TaskSource` detects the 9 stale epics in current project", "`GitSource` detects unpushed work and stale branches", "`MilestoneSource` infers 0.30 alpha target from sketches/CHANGELOG", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T20:09:46.523427] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "closed", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T20:15:09.194747", "closed_at": "2026-01-28T20:15:09.194743", "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "[Closed: 2026-01-28T20:15:09.194749] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "closed", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:22:32.062910", "closed_at": "2026-01-28T20:22:32.062906", "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "[Closed: 2026-01-28T20:22:32.062912] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "closed", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T20:31:26.493282", "closed_at": "2026-01-28T20:31:26.493257", "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "[Closed: 2026-01-28T20:31:26.493284] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "closed", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T20:37:11.972618", "closed_at": "2026-01-28T20:37:11.972614", "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "[Closed: 2026-01-28T20:37:11.972622] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "in_progress", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T20:37:24.107553", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 40 != 29"}
{"timestamp": "2026-01-28T20:44:49.035063", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "in_progress", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": "cub-20260128-204328", "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T20:43:29.037004Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "in_progress", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": "cub-20260128-202245", "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T20:37:32.147989Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "closed", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["phase-1", "core", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407838", "updated_at": "2026-01-28T18:57:22.732005", "closed_at": "2026-01-28T18:57:22.732002", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T18:57:22.732007] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "closed", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["phase-2", "core", "refactor", "cleanup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407983", "updated_at": "2026-01-28T19:20:21.672421", "closed_at": "2026-01-28T19:20:21.672417", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:20:21.672422] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "closed", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["phase-3", "core", "architecture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408044", "updated_at": "2026-01-28T19:59:09.455587", "closed_at": "2026-01-28T19:59:09.455581", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:59:09.455589] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "closed", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["phase-4", "core", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408089", "updated_at": "2026-01-28T20:22:42.124609", "closed_at": "2026-01-28T20:22:42.124605", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T20:22:42.124610] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169408", "updated_at": "2026-01-28T19:02:20.690087", "closed_at": "2026-01-28T19:02:20.690062", "acceptance_criteria": ["Zero Rich imports in `core/review/`", "`cli/review/display.py` handles all review rendering", "`cub review` command output unchanged from user's perspective", "Tests pass"], "notes": "[Closed: 2026-01-28T19:02:20.690089] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "closed", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T19:12:49.833208", "closed_at": "2026-01-28T19:12:49.833201", "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "[Closed: 2026-01-28T19:12:49.833211] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T19:16:59.892654", "closed_at": "2026-01-28T19:16:59.892650", "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "[Closed: 2026-01-28T19:16:59.892655] Completed by autonomous execution", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "closed", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T19:18:27.819752", "closed_at": "2026-01-28T19:18:27.819748", "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "[Closed: 2026-01-28T19:18:27.819754] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "closed", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T19:20:10.863075", "closed_at": "2026-01-28T19:20:10.863070", "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "[Closed: 2026-01-28T19:20:10.863078] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "closed", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1c.2", "cub-b1c.3", "cub-b1c.4"], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169509", "updated_at": "2026-01-28T19:30:32.960816", "closed_at": "2026-01-28T19:30:32.960778", "acceptance_criteria": ["`RunService` provides the complete API for task execution", "`cli/run.py` only calls `RunService`, not domain modules directly", "Service is stateless \u2014 configuration passed in, no globals", "Tests verify service orchestration"], "notes": "[Closed: 2026-01-28T19:30:32.960820] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "closed", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T19:43:16.990826", "closed_at": "2026-01-28T19:43:16.990819", "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T19:43:16.990832] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "closed", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T19:49:58.382182", "closed_at": "2026-01-28T19:49:58.382177", "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "[Closed: 2026-01-28T19:49:58.382184] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "closed", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T19:58:57.828806", "closed_at": "2026-01-28T19:58:57.828802", "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "[Closed: 2026-01-28T19:58:57.828808] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "closed", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium", "blocking"], "depends_on": [], "blocks": ["cub-b1d.2", "cub-b1d.3"], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169582", "updated_at": "2026-01-28T20:09:46.523423", "closed_at": "2026-01-28T20:09:46.523370", "acceptance_criteria": ["All four sources produce relevant suggestions from real project data", "`TaskSource` detects the 9 stale epics in current project", "`GitSource` detects unpushed work and stale branches", "`MilestoneSource` infers 0.30 alpha target from sketches/CHANGELOG", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T20:09:46.523427] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "closed", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T20:15:09.194747", "closed_at": "2026-01-28T20:15:09.194743", "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "[Closed: 2026-01-28T20:15:09.194749] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "closed", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:22:32.062910", "closed_at": "2026-01-28T20:22:32.062906", "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "[Closed: 2026-01-28T20:22:32.062912] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "closed", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T20:31:26.493282", "closed_at": "2026-01-28T20:31:26.493257", "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "[Closed: 2026-01-28T20:31:26.493284] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "closed", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T20:37:11.972618", "closed_at": "2026-01-28T20:37:11.972614", "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "[Closed: 2026-01-28T20:37:11.972622] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "in_progress", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T20:37:24.107553", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 40 != 29"}
{"timestamp": "2026-01-28T20:45:17.856279", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "in_progress", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": "cub-20260128-204328", "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T20:43:29.037004Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "in_progress", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": "cub-20260128-202245", "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T20:37:32.147989Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "closed", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["phase-1", "core", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407838", "updated_at": "2026-01-28T18:57:22.732005", "closed_at": "2026-01-28T18:57:22.732002", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T18:57:22.732007] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "closed", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["phase-2", "core", "refactor", "cleanup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407983", "updated_at": "2026-01-28T19:20:21.672421", "closed_at": "2026-01-28T19:20:21.672417", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:20:21.672422] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "closed", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["phase-3", "core", "architecture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408044", "updated_at": "2026-01-28T19:59:09.455587", "closed_at": "2026-01-28T19:59:09.455581", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:59:09.455589] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "closed", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["phase-4", "core", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408089", "updated_at": "2026-01-28T20:22:42.124609", "closed_at": "2026-01-28T20:22:42.124605", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T20:22:42.124610] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T17:54:44.408187", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169408", "updated_at": "2026-01-28T19:02:20.690087", "closed_at": "2026-01-28T19:02:20.690062", "acceptance_criteria": ["Zero Rich imports in `core/review/`", "`cli/review/display.py` handles all review rendering", "`cub review` command output unchanged from user's perspective", "Tests pass"], "notes": "[Closed: 2026-01-28T19:02:20.690089] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "closed", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T19:12:49.833208", "closed_at": "2026-01-28T19:12:49.833201", "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "[Closed: 2026-01-28T19:12:49.833211] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T19:16:59.892654", "closed_at": "2026-01-28T19:16:59.892650", "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "[Closed: 2026-01-28T19:16:59.892655] Completed by autonomous execution", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "closed", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T19:18:27.819752", "closed_at": "2026-01-28T19:18:27.819748", "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "[Closed: 2026-01-28T19:18:27.819754] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "closed", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T19:20:10.863075", "closed_at": "2026-01-28T19:20:10.863070", "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "[Closed: 2026-01-28T19:20:10.863078] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "closed", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1c.2", "cub-b1c.3", "cub-b1c.4"], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169509", "updated_at": "2026-01-28T19:30:32.960816", "closed_at": "2026-01-28T19:30:32.960778", "acceptance_criteria": ["`RunService` provides the complete API for task execution", "`cli/run.py` only calls `RunService`, not domain modules directly", "Service is stateless \u2014 configuration passed in, no globals", "Tests verify service orchestration"], "notes": "[Closed: 2026-01-28T19:30:32.960820] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "closed", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T19:43:16.990826", "closed_at": "2026-01-28T19:43:16.990819", "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T19:43:16.990832] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "closed", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T19:49:58.382182", "closed_at": "2026-01-28T19:49:58.382177", "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "[Closed: 2026-01-28T19:49:58.382184] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "closed", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T19:58:57.828806", "closed_at": "2026-01-28T19:58:57.828802", "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "[Closed: 2026-01-28T19:58:57.828808] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "closed", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium", "blocking"], "depends_on": [], "blocks": ["cub-b1d.2", "cub-b1d.3"], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169582", "updated_at": "2026-01-28T20:09:46.523423", "closed_at": "2026-01-28T20:09:46.523370", "acceptance_criteria": ["All four sources produce relevant suggestions from real project data", "`TaskSource` detects the 9 stale epics in current project", "`GitSource` detects unpushed work and stale branches", "`MilestoneSource` infers 0.30 alpha target from sketches/CHANGELOG", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T20:09:46.523427] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "closed", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T20:15:09.194747", "closed_at": "2026-01-28T20:15:09.194743", "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "[Closed: 2026-01-28T20:15:09.194749] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "closed", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:22:32.062910", "closed_at": "2026-01-28T20:22:32.062906", "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "[Closed: 2026-01-28T20:22:32.062912] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "closed", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T20:31:26.493282", "closed_at": "2026-01-28T20:31:26.493257", "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "[Closed: 2026-01-28T20:31:26.493284] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "closed", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T20:37:11.972618", "closed_at": "2026-01-28T20:37:11.972614", "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "[Closed: 2026-01-28T20:37:11.972622] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "in_progress", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T20:37:24.107553", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 40 != 29"}
{"timestamp": "2026-01-28T20:46:03.584003", "operation": "get_task", "task_id": "cub-b1e.3", "primary_result": {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "closed", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": "cub-20260128-202245", "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T20:45:22.942118Z", "closed_at": "2026-01-28T20:45:22.942118Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "in_progress", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T20:37:24.107553", "closed_at": null, "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'model:sonnet', 'phase-5', 'test'] != ['phase-5', 'cli', 'test', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:46:03.636966", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 39, "open": 38, "in_progress": 1, "closed": 0}, "secondary_result": {"total": 29, "open": 5, "in_progress": 1, "closed": 23}, "difference_summary": "total: 39 != 29; open: 38 != 5; closed: 0 != 23"}
{"timestamp": "2026-01-28T20:46:03.747322", "operation": "close_task", "task_id": "cub-b1e.3", "primary_result": {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "closed", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": "cub-20260128-202245", "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T20:46:03.681855Z", "closed_at": "2026-01-28T20:46:03.681855Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "closed", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T20:46:03.745287", "closed_at": "2026-01-28T20:46:03.745282", "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "[Closed: 2026-01-28T20:46:03.745289] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'model:sonnet', 'phase-5', 'test'] != ['phase-5', 'cli', 'test', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:46:03.809350", "operation": "get_task", "task_id": "cub-b1e.3", "primary_result": {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "closed", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": "cub-20260128-202245", "labels": ["cli", "complexity:medium", "epic:cub-b1e", "model:sonnet", "phase-5", "test"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:44.409669Z", "updated_at": "2026-01-28T20:46:03.681855Z", "closed_at": "2026-01-28T20:46:03.681855Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "closed", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T20:46:03.745287", "closed_at": "2026-01-28T20:46:03.745282", "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "[Closed: 2026-01-28T20:46:03.745289] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['cli', 'complexity:medium', 'epic:cub-b1e', 'model:sonnet', 'phase-5', 'test'] != ['phase-5', 'cli', 'test', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:46:13.597294", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 39, "open": 38, "in_progress": 1, "closed": 0}, "secondary_result": {"total": 29, "open": 5, "in_progress": 0, "closed": 24}, "difference_summary": "total: 39 != 29; open: 38 != 5; in_progress: 1 != 0; closed: 0 != 24"}
{"timestamp": "2026-01-28T20:46:18.011994", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 39, "open": 38, "in_progress": 1, "closed": 0}, "secondary_result": {"total": 29, "open": 4, "in_progress": 0, "closed": 25}, "difference_summary": "total: 39 != 29; open: 38 != 4; in_progress: 1 != 0; closed: 0 != 25"}
{"timestamp": "2026-01-28T20:46:18.058104", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}], "secondary_result": [{"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}], "difference_summary": "Task 0 (cub-b1f.1): labels: ['complexity:medium', 'docs', 'epic:cub-b1f', 'feature', 'model:sonnet', 'phase-6'] != ['phase-6', 'docs', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1f; Task 1 (cub-b1f.2): labels: ['complexity:medium', 'docs', 'epic:cub-b1f', 'model:sonnet', 'phase-6'] != ['phase-6', 'docs', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1f; Task 2 (cub-b1f.3): labels: ['complexity:medium', 'epic:cub-b1f', 'model:sonnet', 'phase-6', 'test'] != ['phase-6', 'test', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1f"}
{"timestamp": "2026-01-28T20:46:18.103069", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}], "secondary_result": [{"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}], "difference_summary": "Task 0 (cub-b1f.1): labels: ['complexity:medium', 'docs', 'epic:cub-b1f', 'feature', 'model:sonnet', 'phase-6'] != ['phase-6', 'docs', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1f; Task 1 (cub-b1f.2): labels: ['complexity:medium', 'docs', 'epic:cub-b1f', 'model:sonnet', 'phase-6'] != ['phase-6', 'docs', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1f; Task 2 (cub-b1f.3): labels: ['complexity:medium', 'epic:cub-b1f', 'model:sonnet', 'phase-6', 'test'] != ['phase-6', 'test', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1f"}
{"timestamp": "2026-01-28T20:46:18.150861", "operation": "get_task", "task_id": "cub-b1f.3", "primary_result": {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T17:54:44.608731Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "open", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": null, "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T17:54:46.169725", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "difference_summary": "labels: ['complexity:medium', 'epic:cub-b1f', 'model:sonnet', 'phase-6', 'test'] != ['phase-6', 'test', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:46:18.267231", "operation": "update_task", "task_id": "cub-b1f.3", "primary_result": {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "in_progress", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": "cub-20260128-204617", "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T20:46:18.201985Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "in_progress", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": "cub-20260128-204617", "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T20:46:18.265207", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['complexity:medium', 'epic:cub-b1f', 'model:sonnet', 'phase-6', 'test'] != ['phase-6', 'test', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:52:34.507551", "operation": "get_task", "task_id": "cub-b1f.3", "primary_result": {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "closed", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": "cub-20260128-204617", "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T20:51:37.069330Z", "closed_at": "2026-01-28T20:51:37.069330Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "in_progress", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": "cub-20260128-204617", "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T20:46:18.265207", "closed_at": null, "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['complexity:medium', 'epic:cub-b1f', 'model:sonnet', 'phase-6', 'test'] != ['phase-6', 'test', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:52:34.574551", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 38, "open": 37, "in_progress": 1, "closed": 0}, "secondary_result": {"total": 29, "open": 3, "in_progress": 1, "closed": 25}, "difference_summary": "total: 38 != 29; open: 37 != 3; closed: 0 != 25"}
{"timestamp": "2026-01-28T20:52:34.693083", "operation": "close_task", "task_id": "cub-b1f.3", "primary_result": {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "closed", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": "cub-20260128-204617", "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T20:52:34.623672Z", "closed_at": "2026-01-28T20:52:34.623672Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "closed", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": "cub-20260128-204617", "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T20:52:34.691040", "closed_at": "2026-01-28T20:52:34.691014", "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "[Closed: 2026-01-28T20:52:34.691043] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['complexity:medium', 'epic:cub-b1f', 'model:sonnet', 'phase-6', 'test'] != ['phase-6', 'test', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:52:34.757561", "operation": "get_task", "task_id": "cub-b1f.3", "primary_result": {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "closed", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": "cub-20260128-204617", "labels": ["complexity:medium", "epic:cub-b1f", "model:sonnet", "phase-6", "test"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:44.409728Z", "updated_at": "2026-01-28T20:52:34.623672Z", "closed_at": "2026-01-28T20:52:34.623672Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "closed", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": "cub-20260128-204617", "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T20:52:34.691040", "closed_at": "2026-01-28T20:52:34.691014", "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "[Closed: 2026-01-28T20:52:34.691043] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['complexity:medium', 'epic:cub-b1f', 'model:sonnet', 'phase-6', 'test'] != ['phase-6', 'test', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:52:44.161023", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}], "secondary_result": [{"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}], "difference_summary": "Task 0 (cub-b1f.1): labels: ['complexity:medium', 'docs', 'epic:cub-b1f', 'feature', 'model:sonnet', 'phase-6'] != ['phase-6', 'docs', 'feature', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1f; Task 1 (cub-b1f.2): labels: ['complexity:medium', 'docs', 'epic:cub-b1f', 'model:sonnet', 'phase-6'] != ['phase-6', 'docs', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1f"}
{"timestamp": "2026-01-28T20:52:44.218725", "operation": "get_task", "task_id": "cub-b1f.1", "primary_result": {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T17:54:44.607897Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, "secondary_result": {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "open", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": null, "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T17:54:46.169693", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, "difference_summary": "labels: ['complexity:medium', 'docs', 'epic:cub-b1f', 'feature', 'model:sonnet', 'phase-6'] != ['phase-6', 'docs', 'feature', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:52:44.347488", "operation": "update_task", "task_id": "cub-b1f.1", "primary_result": {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "in_progress", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": "cub-20260128-204617", "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T20:52:44.273791Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "in_progress", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": "cub-20260128-204617", "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T20:52:44.345937", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['complexity:medium', 'docs', 'epic:cub-b1f', 'feature', 'model:sonnet', 'phase-6'] != ['phase-6', 'docs', 'feature', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:52:52.204578", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 38, "open": 36, "in_progress": 2, "closed": 0}, "secondary_result": {"total": 29, "open": 2, "in_progress": 1, "closed": 26}, "difference_summary": "total: 38 != 29; open: 36 != 2; in_progress: 2 != 1; closed: 0 != 26"}
{"timestamp": "2026-01-28T20:52:52.287410", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "in_progress", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": "cub-20260128-204328", "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T20:43:29.037004Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "in_progress", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": "cub-20260128-204617", "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T20:52:50.388775Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}], "difference_summary": "List length mismatch: 20 != 2"}
{"timestamp": "2026-01-28T20:52:52.384055", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "in_progress", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": "cub-20260128-204328", "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T20:43:29.037004Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "in_progress", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": "cub-20260128-204617", "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T20:52:50.388775Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "closed", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["phase-1", "core", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407838", "updated_at": "2026-01-28T18:57:22.732005", "closed_at": "2026-01-28T18:57:22.732002", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T18:57:22.732007] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "closed", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["phase-2", "core", "refactor", "cleanup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407983", "updated_at": "2026-01-28T19:20:21.672421", "closed_at": "2026-01-28T19:20:21.672417", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:20:21.672422] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "closed", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["phase-3", "core", "architecture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408044", "updated_at": "2026-01-28T19:59:09.455587", "closed_at": "2026-01-28T19:59:09.455581", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:59:09.455589] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "closed", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["phase-4", "core", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408089", "updated_at": "2026-01-28T20:22:42.124609", "closed_at": "2026-01-28T20:22:42.124605", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T20:22:42.124610] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "closed", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T20:46:13.750875", "closed_at": "2026-01-28T20:46:13.750871", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T20:46:13.750876] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169408", "updated_at": "2026-01-28T19:02:20.690087", "closed_at": "2026-01-28T19:02:20.690062", "acceptance_criteria": ["Zero Rich imports in `core/review/`", "`cli/review/display.py` handles all review rendering", "`cub review` command output unchanged from user's perspective", "Tests pass"], "notes": "[Closed: 2026-01-28T19:02:20.690089] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "closed", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T19:12:49.833208", "closed_at": "2026-01-28T19:12:49.833201", "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "[Closed: 2026-01-28T19:12:49.833211] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T19:16:59.892654", "closed_at": "2026-01-28T19:16:59.892650", "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "[Closed: 2026-01-28T19:16:59.892655] Completed by autonomous execution", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "closed", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T19:18:27.819752", "closed_at": "2026-01-28T19:18:27.819748", "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "[Closed: 2026-01-28T19:18:27.819754] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "closed", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T19:20:10.863075", "closed_at": "2026-01-28T19:20:10.863070", "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "[Closed: 2026-01-28T19:20:10.863078] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "closed", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1c.2", "cub-b1c.3", "cub-b1c.4"], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169509", "updated_at": "2026-01-28T19:30:32.960816", "closed_at": "2026-01-28T19:30:32.960778", "acceptance_criteria": ["`RunService` provides the complete API for task execution", "`cli/run.py` only calls `RunService`, not domain modules directly", "Service is stateless \u2014 configuration passed in, no globals", "Tests verify service orchestration"], "notes": "[Closed: 2026-01-28T19:30:32.960820] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "closed", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T19:43:16.990826", "closed_at": "2026-01-28T19:43:16.990819", "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T19:43:16.990832] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "closed", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T19:49:58.382182", "closed_at": "2026-01-28T19:49:58.382177", "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "[Closed: 2026-01-28T19:49:58.382184] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "closed", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T19:58:57.828806", "closed_at": "2026-01-28T19:58:57.828802", "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "[Closed: 2026-01-28T19:58:57.828808] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "closed", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium", "blocking"], "depends_on": [], "blocks": ["cub-b1d.2", "cub-b1d.3"], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169582", "updated_at": "2026-01-28T20:09:46.523423", "closed_at": "2026-01-28T20:09:46.523370", "acceptance_criteria": ["All four sources produce relevant suggestions from real project data", "`TaskSource` detects the 9 stale epics in current project", "`GitSource` detects unpushed work and stale branches", "`MilestoneSource` infers 0.30 alpha target from sketches/CHANGELOG", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T20:09:46.523427] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "closed", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T20:15:09.194747", "closed_at": "2026-01-28T20:15:09.194743", "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "[Closed: 2026-01-28T20:15:09.194749] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "closed", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:22:32.062910", "closed_at": "2026-01-28T20:22:32.062906", "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "[Closed: 2026-01-28T20:22:32.062912] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "closed", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T20:31:26.493282", "closed_at": "2026-01-28T20:31:26.493257", "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "[Closed: 2026-01-28T20:31:26.493284] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "closed", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T20:37:11.972618", "closed_at": "2026-01-28T20:37:11.972614", "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "[Closed: 2026-01-28T20:37:11.972622] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "closed", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T20:46:03.745287", "closed_at": "2026-01-28T20:46:03.745282", "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "[Closed: 2026-01-28T20:46:03.745289] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "in_progress", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": "cub-20260128-204617", "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T20:52:44.345937", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "closed", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": "cub-20260128-204617", "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T20:52:34.691040", "closed_at": "2026-01-28T20:52:34.691014", "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "[Closed: 2026-01-28T20:52:34.691043] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 38 != 29"}
{"timestamp": "2026-01-28T20:52:52.501581", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "in_progress", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": "cub-20260128-204328", "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T20:43:29.037004Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "in_progress", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": "cub-20260128-204617", "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T20:52:50.388775Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}], "difference_summary": "List length mismatch: 20 != 2"}
{"timestamp": "2026-01-28T20:54:38.088243", "operation": "get_task", "task_id": "cub-b1f.1", "primary_result": {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "closed", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": "cub-20260128-204617", "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T20:54:21.558447Z", "closed_at": "2026-01-28T20:54:21.558447Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "in_progress", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": "cub-20260128-204617", "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T20:52:44.345937", "closed_at": null, "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['complexity:medium', 'docs', 'epic:cub-b1f', 'feature', 'model:sonnet', 'phase-6'] != ['phase-6', 'docs', 'feature', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:54:38.172641", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 37, "open": 36, "in_progress": 1, "closed": 0}, "secondary_result": {"total": 29, "open": 2, "in_progress": 1, "closed": 26}, "difference_summary": "total: 37 != 29; open: 36 != 2; closed: 0 != 26"}
{"timestamp": "2026-01-28T20:54:38.294094", "operation": "close_task", "task_id": "cub-b1f.1", "primary_result": {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "closed", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": "cub-20260128-204617", "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T20:54:38.235789Z", "closed_at": "2026-01-28T20:54:38.235789Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "closed", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": "cub-20260128-204617", "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T20:54:38.292608", "closed_at": "2026-01-28T20:54:38.292604", "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "[Closed: 2026-01-28T20:54:38.292610] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['complexity:medium', 'docs', 'epic:cub-b1f', 'feature', 'model:sonnet', 'phase-6'] != ['phase-6', 'docs', 'feature', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:54:38.354995", "operation": "get_task", "task_id": "cub-b1f.1", "primary_result": {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "closed", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": "cub-20260128-204617", "labels": ["complexity:medium", "docs", "epic:cub-b1f", "feature", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:44.409690Z", "updated_at": "2026-01-28T20:54:38.235789Z", "closed_at": "2026-01-28T20:54:38.235789Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "closed", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": "cub-20260128-204617", "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T20:54:38.292608", "closed_at": "2026-01-28T20:54:38.292604", "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "[Closed: 2026-01-28T20:54:38.292610] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['complexity:medium', 'docs', 'epic:cub-b1f', 'feature', 'model:sonnet', 'phase-6'] != ['phase-6', 'docs', 'feature', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:54:47.412262", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}], "secondary_result": [{"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}], "difference_summary": "Task 0 (cub-b1f.2): labels: ['complexity:medium', 'docs', 'epic:cub-b1f', 'model:sonnet', 'phase-6'] != ['phase-6', 'docs', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1f"}
{"timestamp": "2026-01-28T20:54:47.475027", "operation": "get_task", "task_id": "cub-b1f.2", "primary_result": {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T17:54:44.608321Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, "secondary_result": {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "open", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": null, "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T17:54:46.169710", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 2}, "difference_summary": "labels: ['complexity:medium', 'docs', 'epic:cub-b1f', 'model:sonnet', 'phase-6'] != ['phase-6', 'docs', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T20:54:47.605499", "operation": "update_task", "task_id": "cub-b1f.2", "primary_result": {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "in_progress", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": "cub-20260128-204617", "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T20:54:47.533732Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "in_progress", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": "cub-20260128-204617", "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T20:54:47.603233", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['complexity:medium', 'docs', 'epic:cub-b1f', 'model:sonnet', 'phase-6'] != ['phase-6', 'docs', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T21:01:34.450898", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "in_progress", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": "cub-20260128-204328", "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T20:43:29.037004Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "in_progress", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": "cub-20260128-204617", "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T20:54:53.770588Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "difference_summary": "List length mismatch: 19 != 1"}
{"timestamp": "2026-01-28T21:01:34.510532", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "in_progress", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": "cub-20260128-204328", "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T20:43:29.037004Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "in_progress", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": "cub-20260128-204617", "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T20:54:53.770588Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}], "secondary_result": [{"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "in_progress", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": "cub-20260128-204617", "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T20:54:47.603233", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}], "difference_summary": "List length mismatch: 2 != 1"}
{"timestamp": "2026-01-28T21:01:34.567904", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "difference_summary": "List length mismatch: 35 != 1"}
{"timestamp": "2026-01-28T21:01:34.681661", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "in_progress", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": "cub-20260128-204328", "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T20:43:29.037004Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "in_progress", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": "cub-20260128-204617", "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T20:54:53.770588Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "closed", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["phase-1", "core", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407838", "updated_at": "2026-01-28T18:57:22.732005", "closed_at": "2026-01-28T18:57:22.732002", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T18:57:22.732007] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "closed", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["phase-2", "core", "refactor", "cleanup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407983", "updated_at": "2026-01-28T19:20:21.672421", "closed_at": "2026-01-28T19:20:21.672417", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:20:21.672422] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "closed", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["phase-3", "core", "architecture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408044", "updated_at": "2026-01-28T19:59:09.455587", "closed_at": "2026-01-28T19:59:09.455581", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:59:09.455589] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "closed", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["phase-4", "core", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408089", "updated_at": "2026-01-28T20:22:42.124609", "closed_at": "2026-01-28T20:22:42.124605", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T20:22:42.124610] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "closed", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T20:46:13.750875", "closed_at": "2026-01-28T20:46:13.750871", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T20:46:13.750876] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169408", "updated_at": "2026-01-28T19:02:20.690087", "closed_at": "2026-01-28T19:02:20.690062", "acceptance_criteria": ["Zero Rich imports in `core/review/`", "`cli/review/display.py` handles all review rendering", "`cub review` command output unchanged from user's perspective", "Tests pass"], "notes": "[Closed: 2026-01-28T19:02:20.690089] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "closed", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T19:12:49.833208", "closed_at": "2026-01-28T19:12:49.833201", "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "[Closed: 2026-01-28T19:12:49.833211] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T19:16:59.892654", "closed_at": "2026-01-28T19:16:59.892650", "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "[Closed: 2026-01-28T19:16:59.892655] Completed by autonomous execution", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "closed", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T19:18:27.819752", "closed_at": "2026-01-28T19:18:27.819748", "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "[Closed: 2026-01-28T19:18:27.819754] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "closed", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T19:20:10.863075", "closed_at": "2026-01-28T19:20:10.863070", "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "[Closed: 2026-01-28T19:20:10.863078] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "closed", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1c.2", "cub-b1c.3", "cub-b1c.4"], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169509", "updated_at": "2026-01-28T19:30:32.960816", "closed_at": "2026-01-28T19:30:32.960778", "acceptance_criteria": ["`RunService` provides the complete API for task execution", "`cli/run.py` only calls `RunService`, not domain modules directly", "Service is stateless \u2014 configuration passed in, no globals", "Tests verify service orchestration"], "notes": "[Closed: 2026-01-28T19:30:32.960820] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "closed", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T19:43:16.990826", "closed_at": "2026-01-28T19:43:16.990819", "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T19:43:16.990832] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "closed", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T19:49:58.382182", "closed_at": "2026-01-28T19:49:58.382177", "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "[Closed: 2026-01-28T19:49:58.382184] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "closed", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T19:58:57.828806", "closed_at": "2026-01-28T19:58:57.828802", "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "[Closed: 2026-01-28T19:58:57.828808] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "closed", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium", "blocking"], "depends_on": [], "blocks": ["cub-b1d.2", "cub-b1d.3"], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169582", "updated_at": "2026-01-28T20:09:46.523423", "closed_at": "2026-01-28T20:09:46.523370", "acceptance_criteria": ["All four sources produce relevant suggestions from real project data", "`TaskSource` detects the 9 stale epics in current project", "`GitSource` detects unpushed work and stale branches", "`MilestoneSource` infers 0.30 alpha target from sketches/CHANGELOG", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T20:09:46.523427] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "closed", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T20:15:09.194747", "closed_at": "2026-01-28T20:15:09.194743", "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "[Closed: 2026-01-28T20:15:09.194749] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "closed", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:22:32.062910", "closed_at": "2026-01-28T20:22:32.062906", "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "[Closed: 2026-01-28T20:22:32.062912] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "closed", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T20:31:26.493282", "closed_at": "2026-01-28T20:31:26.493257", "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "[Closed: 2026-01-28T20:31:26.493284] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "closed", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T20:37:11.972618", "closed_at": "2026-01-28T20:37:11.972614", "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "[Closed: 2026-01-28T20:37:11.972622] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "closed", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T20:46:03.745287", "closed_at": "2026-01-28T20:46:03.745282", "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "[Closed: 2026-01-28T20:46:03.745289] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "closed", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": "cub-20260128-204617", "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T20:54:38.292608", "closed_at": "2026-01-28T20:54:38.292604", "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "[Closed: 2026-01-28T20:54:38.292610] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "in_progress", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": "cub-20260128-204617", "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T20:54:47.603233", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "closed", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": "cub-20260128-204617", "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T20:52:34.691040", "closed_at": "2026-01-28T20:52:34.691014", "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "[Closed: 2026-01-28T20:52:34.691043] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 37 != 29"}
{"timestamp": "2026-01-28T21:01:34.748207", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "closed", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T20:31:26.493282", "closed_at": "2026-01-28T20:31:26.493257", "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "[Closed: 2026-01-28T20:31:26.493284] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "closed", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T20:37:11.972618", "closed_at": "2026-01-28T20:37:11.972614", "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "[Closed: 2026-01-28T20:37:11.972622] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "closed", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T20:46:03.745287", "closed_at": "2026-01-28T20:46:03.745282", "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "[Closed: 2026-01-28T20:46:03.745289] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 3"}
{"timestamp": "2026-01-28T21:01:34.802265", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 5"}
{"timestamp": "2026-01-28T21:01:34.854370", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "closed", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T20:31:26.493282", "closed_at": "2026-01-28T20:31:26.493257", "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "[Closed: 2026-01-28T20:31:26.493284] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "closed", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T20:37:11.972618", "closed_at": "2026-01-28T20:37:11.972614", "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "[Closed: 2026-01-28T20:37:11.972622] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "closed", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T20:46:03.745287", "closed_at": "2026-01-28T20:46:03.745282", "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "[Closed: 2026-01-28T20:46:03.745289] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 3"}
{"timestamp": "2026-01-28T21:01:34.904952", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 5"}
{"timestamp": "2026-01-28T21:01:35.097641", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "closed", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium", "blocking"], "depends_on": [], "blocks": ["cub-b1d.2", "cub-b1d.3"], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169582", "updated_at": "2026-01-28T20:09:46.523423", "closed_at": "2026-01-28T20:09:46.523370", "acceptance_criteria": ["All four sources produce relevant suggestions from real project data", "`TaskSource` detects the 9 stale epics in current project", "`GitSource` detects unpushed work and stale branches", "`MilestoneSource` infers 0.30 alpha target from sketches/CHANGELOG", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T20:09:46.523427] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "closed", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T20:15:09.194747", "closed_at": "2026-01-28T20:15:09.194743", "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "[Closed: 2026-01-28T20:15:09.194749] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "closed", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:22:32.062910", "closed_at": "2026-01-28T20:22:32.062906", "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "[Closed: 2026-01-28T20:22:32.062912] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 3"}
{"timestamp": "2026-01-28T21:01:35.139808", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "closed", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1c.2", "cub-b1c.3", "cub-b1c.4"], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169509", "updated_at": "2026-01-28T19:30:32.960816", "closed_at": "2026-01-28T19:30:32.960778", "acceptance_criteria": ["`RunService` provides the complete API for task execution", "`cli/run.py` only calls `RunService`, not domain modules directly", "Service is stateless \u2014 configuration passed in, no globals", "Tests verify service orchestration"], "notes": "[Closed: 2026-01-28T19:30:32.960820] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "closed", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T19:43:16.990826", "closed_at": "2026-01-28T19:43:16.990819", "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T19:43:16.990832] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "closed", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T19:49:58.382182", "closed_at": "2026-01-28T19:49:58.382177", "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "[Closed: 2026-01-28T19:49:58.382184] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "closed", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T19:58:57.828806", "closed_at": "2026-01-28T19:58:57.828802", "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "[Closed: 2026-01-28T19:58:57.828808] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 4"}
{"timestamp": "2026-01-28T21:01:35.183516", "operation": "list_tasks", "task_id": null, "primary_result": "[]", "secondary_result": [{"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169408", "updated_at": "2026-01-28T19:02:20.690087", "closed_at": "2026-01-28T19:02:20.690062", "acceptance_criteria": ["Zero Rich imports in `core/review/`", "`cli/review/display.py` handles all review rendering", "`cub review` command output unchanged from user's perspective", "Tests pass"], "notes": "[Closed: 2026-01-28T19:02:20.690089] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "closed", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T19:12:49.833208", "closed_at": "2026-01-28T19:12:49.833201", "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "[Closed: 2026-01-28T19:12:49.833211] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T19:16:59.892654", "closed_at": "2026-01-28T19:16:59.892650", "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "[Closed: 2026-01-28T19:16:59.892655] Completed by autonomous execution", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "closed", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T19:18:27.819752", "closed_at": "2026-01-28T19:18:27.819748", "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "[Closed: 2026-01-28T19:18:27.819754] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "closed", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T19:20:10.863075", "closed_at": "2026-01-28T19:20:10.863070", "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "[Closed: 2026-01-28T19:20:10.863078] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 0 != 5"}
{"timestamp": "2026-01-28T21:01:35.364816", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}], "secondary_result": "[]", "difference_summary": "List length mismatch: 5 != 0"}
{"timestamp": "2026-01-28T21:01:35.459261", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "in_progress", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": "cub-20260128-204617", "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T20:54:53.770588Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}], "secondary_result": [{"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "closed", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": "cub-20260128-204617", "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T20:54:38.292608", "closed_at": "2026-01-28T20:54:38.292604", "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "[Closed: 2026-01-28T20:54:38.292610] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "in_progress", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": "cub-20260128-204617", "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T20:54:47.603233", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "closed", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": "cub-20260128-204617", "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T20:52:34.691040", "closed_at": "2026-01-28T20:52:34.691014", "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "[Closed: 2026-01-28T20:52:34.691043] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 1 != 3"}
{"timestamp": "2026-01-28T21:01:35.560311", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "secondary_result": "[]", "difference_summary": "List length mismatch: 3 != 0"}
{"timestamp": "2026-01-28T21:01:35.610224", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "secondary_result": "[]", "difference_summary": "List length mismatch: 3 != 0"}
{"timestamp": "2026-01-28T21:01:35.694227", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": "[]", "difference_summary": "List length mismatch: 3 != 0"}
{"timestamp": "2026-01-28T21:01:35.752413", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "in_progress", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": "cub-20260128-204328", "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T20:43:29.037004Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "in_progress", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": "cub-20260128-204617", "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T20:54:53.770588Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "closed", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["phase-1", "core", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407838", "updated_at": "2026-01-28T18:57:22.732005", "closed_at": "2026-01-28T18:57:22.732002", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T18:57:22.732007] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "closed", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["phase-2", "core", "refactor", "cleanup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.407983", "updated_at": "2026-01-28T19:20:21.672421", "closed_at": "2026-01-28T19:20:21.672417", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:20:21.672422] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "closed", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["phase-3", "core", "architecture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408044", "updated_at": "2026-01-28T19:59:09.455587", "closed_at": "2026-01-28T19:59:09.455581", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T19:59:09.455589] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "closed", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["phase-4", "core", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408089", "updated_at": "2026-01-28T20:22:42.124609", "closed_at": "2026-01-28T20:22:42.124605", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T20:22:42.124610] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "closed", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["phase-5", "cli", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408186", "updated_at": "2026-01-28T20:46:13.750875", "closed_at": "2026-01-28T20:46:13.750871", "acceptance_criteria": [], "notes": "[Closed: 2026-01-28T20:46:13.750876] All tasks completed", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "closed", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:47:30.640522", "closed_at": "2026-01-28T18:47:30.640516", "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "[Closed: 2026-01-28T18:47:30.640526] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "closed", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T18:57:10.834668", "closed_at": "2026-01-28T18:57:10.834664", "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "[Closed: 2026-01-28T18:57:10.834670] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.1", "title": "Move review reporter rendering to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/review/reporter.py` is the heaviest Rich violator \u2014 it's ~90% Rich rendering. The data models already exist in `core/review/models.py`. We need to split data preparation from rendering.\n\n**Implementation Steps:**\n1. Audit `core/review/reporter.py` to identify data preparation vs rendering\n2. Keep any data transformation logic in core; move to `core/review/formatter.py` if needed (returns structured data)\n3. Create `cli/review/display.py` with all Rich rendering (Panel, Table, Text)\n4. Update `cli/review.py` to call display functions instead of core reporter\n5. Remove Rich imports from `core/review/reporter.py` (or delete if fully moved)\n6. Update tests to verify data output, not rendered output\n\n**Files:** src/cub/core/review/reporter.py, src/cub/cli/review/display.py, src/cub/cli/review.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169408", "updated_at": "2026-01-28T19:02:20.690087", "closed_at": "2026-01-28T19:02:20.690062", "acceptance_criteria": ["Zero Rich imports in `core/review/`", "`cli/review/display.py` handles all review rendering", "`cub review` command output unchanged from user's perspective", "Tests pass"], "notes": "[Closed: 2026-01-28T19:02:20.690089] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.2", "title": "Remove Rich from core/pr/service.py and core/worktree/parallel.py", "status": "closed", "priority": "P1", "type": "task", "description": "Both modules use Rich Console for progress/status output. They should emit events or return data, letting the CLI layer handle display.\n\n**Implementation Steps:**\n1. In `core/pr/service.py`: replace `Console` usage with return values or Python logging\n2. In `core/worktree/parallel.py`: replace progress output with callback/event pattern\n3. Define callback protocols: `on_worker_start(task_id)`, `on_worker_complete(task_id, result)`\n4. Update `cli/pr.py` and `cli/worktree.py` to provide Rich-based callbacks\n5. Verify all PR and worktree commands work unchanged\n\n**Files:** src/cub/core/pr/service.py, src/cub/core/worktree/parallel.py, src/cub/cli/pr.py, src/cub/cli/worktree.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": ["cub-b1b.5"], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169430", "updated_at": "2026-01-28T19:12:49.833208", "closed_at": "2026-01-28T19:12:49.833201", "acceptance_criteria": ["Zero Rich imports in `core/pr/` and `core/worktree/`", "PR and worktree commands produce identical output", "Core modules use callbacks or return data for progress"], "notes": "[Closed: 2026-01-28T19:12:49.833211] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.3", "title": "Move bash_delegate to CLI layer", "status": "closed", "priority": "P1", "type": "task", "description": "`core/bash_delegate.py` imports Rich Console and calls `sys.exit()`. It's purely a CLI concern \u2014 delegating commands to the bash version of cub.\n\n**Implementation Steps:**\n1. Move `core/bash_delegate.py` to `cli/delegated/runner.py`\n2. Update imports in `cli/delegated.py` and `cli/__init__.py`\n3. Remove `core/bash_delegate.py`\n4. Verify delegated commands (prep, branch, etc.) still work\n\n**Files:** src/cub/core/bash_delegate.py, src/cub/cli/delegated/runner.py, src/cub/cli/delegated.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:sonnet", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169447", "updated_at": "2026-01-28T19:16:59.892654", "closed_at": "2026-01-28T19:16:59.892650", "acceptance_criteria": ["`core/bash_delegate.py` no longer exists", "Delegated commands work unchanged", "No Rich or sys.exit in any `core/` module"], "notes": "[Closed: 2026-01-28T19:16:59.892655] Completed by autonomous execution", "complexity_label": "low", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.4", "title": "Replace Rich logging in core/harness/hooks.py", "status": "closed", "priority": "P1", "type": "task", "description": "`core/harness/hooks.py` uses Rich for logging. It should use Python's standard `logging` module \u2014 hooks run in subprocess contexts where Rich may not be appropriate.\n\n**Implementation Steps:**\n1. Replace `from rich.console import Console` with `import logging`\n2. Replace `console.print()` calls with `logger.info()`, `logger.debug()`, etc.\n3. Configure logging format in hook entry point\n4. Verify hook forensics still work correctly\n\n**Files:** src/cub/core/harness/hooks.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169467", "updated_at": "2026-01-28T19:18:27.819752", "closed_at": "2026-01-28T19:18:27.819748", "acceptance_criteria": ["Zero Rich imports in `core/harness/hooks.py`", "Hook logging works in subprocess contexts", "Forensics JSONL output unchanged"], "notes": "[Closed: 2026-01-28T19:18:27.819754] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1b.5", "title": "Verify zero Rich imports in core and add CI gate", "status": "closed", "priority": "P1", "type": "task", "description": "Final verification that the boundary is clean, plus a CI check to prevent regression.\n\n**Implementation Steps:**\n1. Run `grep -r \"from rich\" src/cub/core/` and verify zero results\n2. Run `grep -r \"import rich\" src/cub/core/` and verify zero results\n3. Add a test that programmatically checks no Rich imports in core\n4. Verify `mypy src/cub` passes clean\n\n**Files:** tests/test_architecture.py", "assignee": "cub-20260128-185726", "labels": ["phase-2", "core", "cleanup", "model:haiku", "complexity:low"], "depends_on": [], "blocks": [], "parent": "cub-b1b", "created_at": "2026-01-28T17:54:46.169492", "updated_at": "2026-01-28T19:20:10.863075", "closed_at": "2026-01-28T19:20:10.863070", "acceptance_criteria": ["`grep -r \"from rich\\|import rich\" src/cub/core/` returns nothing", "Automated test enforces the boundary", "All commands work unchanged from user's perspective"], "notes": "[Closed: 2026-01-28T19:20:10.863078] Completed by autonomous execution", "complexity_label": "low", "model_label": "haiku", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.1", "title": "Create service layer foundation and RunService", "status": "closed", "priority": "P1", "type": "task", "description": "RunService wraps the newly-extracted `core/run/` package, providing the clean API that CLI and future interfaces call. This establishes the service layer pattern.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/__init__.py` package\n2. Create `src/cub/core/services/run.py` with `RunService` class\n3. `RunService.from_config(config)` factory method\n4. `RunService.execute(run_config) -> Iterator[RunEvent]` delegates to `core/run/loop.py`\n5. `RunService.run_once(task_id) -> RunResult` convenience method\n6. Refactor `cli/run.py` to use `RunService` instead of calling `core/run/` directly\n7. Write service-level integration tests\n\n**Files:** src/cub/core/services/__init__.py, src/cub/core/services/run.py, src/cub/cli/run.py, tests/test_service_run.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1c.2", "cub-b1c.3", "cub-b1c.4"], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169509", "updated_at": "2026-01-28T19:30:32.960816", "closed_at": "2026-01-28T19:30:32.960778", "acceptance_criteria": ["`RunService` provides the complete API for task execution", "`cli/run.py` only calls `RunService`, not domain modules directly", "Service is stateless \u2014 configuration passed in, no globals", "Tests verify service orchestration"], "notes": "[Closed: 2026-01-28T19:30:32.960820] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.2", "title": "Create StatusService and LedgerService", "status": "closed", "priority": "P1", "type": "task", "description": "StatusService aggregates project state from multiple sources. LedgerService wraps ledger reader/writer. Both are needed by the suggestion engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/status.py` with `StatusService`\n2. `summary() -> ProjectStats` \u2014 aggregate from tasks, ledger, git\n3. `progress(epic_id) -> EpicProgress` \u2014 epic-level progress\n4. Create `src/cub/core/services/ledger.py` with `LedgerService`\n5. `query(filters) -> list[LedgerEntry]`, `recent(n) -> list[LedgerEntry]`, `stats(period) -> LedgerStats`\n6. Define `ProjectStats`, `EpicProgress`, `LedgerStats` models\n7. Refactor `cli/status.py` and `cli/ledger.py` to use services\n\n**Files:** src/cub/core/services/status.py, src/cub/core/services/ledger.py, src/cub/core/services/models.py, src/cub/cli/status.py, src/cub/cli/ledger.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169529", "updated_at": "2026-01-28T19:43:16.990826", "closed_at": "2026-01-28T19:43:16.990819", "acceptance_criteria": ["`StatusService.summary()` returns structured project stats", "`LedgerService` wraps all ledger operations", "`cub status` and `cub ledger` commands work via services", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T19:43:16.990832] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.3", "title": "Create LaunchService for environment detection and harness launch", "status": "closed", "priority": "P1", "type": "task", "description": "LaunchService handles the core logic for bare `cub`: detect environment, determine if nested, launch harness with context. This is the service that `cli/default.py` will call.\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/__init__.py` package\n2. Create `src/cub/core/launch/detector.py` with `detect_environment() -> EnvironmentInfo`\n3. Check `CUB_SESSION_ACTIVE`, `CLAUDE_CODE`, `CLAUDE_PROJECT_DIR` env vars\n4. Create `src/cub/core/launch/launcher.py` with `launch_harness(config, context)`\n5. Implement harness binary resolution, flag assembly, `exec` call\n6. Create `src/cub/core/launch/models.py` with `EnvironmentInfo`, `LaunchConfig`\n7. Create `src/cub/core/services/launch.py` with `LaunchService` wrapper\n8. Write tests with mocked environment variables\n\n**Files:** src/cub/core/launch/detector.py, src/cub/core/launch/launcher.py, src/cub/core/launch/models.py, src/cub/core/services/launch.py, tests/test_launch.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169545", "updated_at": "2026-01-28T19:49:58.382182", "closed_at": "2026-01-28T19:49:58.382177", "acceptance_criteria": ["`detect_environment()` correctly identifies terminal, harness, and nested contexts", "`launch_harness()` assembles correct `claude` CLI invocation", "`--resume` and `--continue` flags pass through correctly", "`CUB_SESSION_ACTIVE` and `CUB_SESSION_ID` set in child environment", "Tests cover all three environment contexts"], "notes": "[Closed: 2026-01-28T19:49:58.382184] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1c.4", "title": "Enhance TaskService with ready(), stale_epics(), and claims", "status": "closed", "priority": "P1", "type": "task", "description": "TaskService already exists but needs additional methods for the suggestion engine and welcome message. `ready()` and `stale_epics()` are key data sources for suggestions.\n\n**Implementation Steps:**\n1. Add `ready() -> list[Task]` to TaskService \u2014 tasks with no blockers, ordered by priority\n2. Add `stale_epics() -> list[Epic]` \u2014 epics where all child tasks are closed but epic is open\n3. Add `claim(task_id, session_id) -> Task` \u2014 mark task as in-progress for a session\n4. Add `close(task_id, reason) -> Task` \u2014 close task with reason\n5. Ensure methods work with both beads and JSONL backends\n6. Write tests for each method with both backends\n\n**Files:** src/cub/core/tasks/service.py, tests/test_task_service.py", "assignee": "cub-20260128-192025", "labels": ["phase-3", "core", "architecture", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1c", "created_at": "2026-01-28T17:54:46.169561", "updated_at": "2026-01-28T19:58:57.828806", "closed_at": "2026-01-28T19:58:57.828802", "acceptance_criteria": ["`TaskService.ready()` returns correctly filtered and ordered tasks", "`TaskService.stale_epics()` detects epics ready to close", "Works with beads and JSONL backends", "Tests cover edge cases (no tasks, all blocked, mixed states)"], "notes": "[Closed: 2026-01-28T19:58:57.828808] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.1", "title": "Create suggestion models and data sources", "status": "closed", "priority": "P1", "type": "task", "description": "Define the data models for suggestions and implement the four data source adapters (tasks, git, ledger, milestones) that feed the ranking engine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/__init__.py` package\n2. Create `src/cub/core/suggestions/models.py` with `Suggestion`, `ProjectSnapshot`, `SuggestionCategory` enum\n3. Create `src/cub/core/suggestions/sources.py` with source protocol and implementations:\n4. Each source implements `get_suggestions() -> list[Suggestion]`\n5. Write tests with fixture data mirroring current cub project state\n\n**Files:** src/cub/core/suggestions/models.py, src/cub/core/suggestions/sources.py, tests/test_suggestions_sources.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium", "blocking"], "depends_on": [], "blocks": ["cub-b1d.2", "cub-b1d.3"], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169582", "updated_at": "2026-01-28T20:09:46.523423", "closed_at": "2026-01-28T20:09:46.523370", "acceptance_criteria": ["All four sources produce relevant suggestions from real project data", "`TaskSource` detects the 9 stale epics in current project", "`GitSource` detects unpushed work and stale branches", "`MilestoneSource` infers 0.30 alpha target from sketches/CHANGELOG", "Models are Pydantic, serializable"], "notes": "[Closed: 2026-01-28T20:09:46.523427] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.2", "title": "Implement ranking algorithm and engine", "status": "closed", "priority": "P1", "type": "task", "description": "The ranking algorithm scores and orders suggestions from all sources. The engine composes sources, applies ranking, and provides the public API.\n\n**Implementation Steps:**\n1. Create `src/cub/core/suggestions/ranking.py` with `rank_suggestions(suggestions) -> list[Suggestion]`\n2. Implement scoring: `base_priority \u00d7 urgency_multiplier \u00d7 recency_decay`\n3. Create `src/cub/core/suggestions/engine.py` with `SuggestionEngine` class\n4. `get_suggestions(limit) -> list[Suggestion]` \u2014 ranked list\n5. `get_welcome() -> WelcomeMessage` \u2014 stats + top suggestions + skills\n6. `get_next_action() -> Suggestion` \u2014 single best recommendation\n7. Write tests with deterministic fixture data to verify ranking order\n\n**Files:** src/cub/core/suggestions/ranking.py, src/cub/core/suggestions/engine.py, tests/test_suggestions_engine.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169599", "updated_at": "2026-01-28T20:15:09.194747", "closed_at": "2026-01-28T20:15:09.194743", "acceptance_criteria": ["Stale epic closure ranks above low-priority ready tasks", "P0 tasks rank above P2 tasks", "Milestone blockers rank high when release target detected", "`get_welcome()` produces a complete `WelcomeMessage` with stats", "Ranking is deterministic for same input"], "notes": "[Closed: 2026-01-28T20:15:09.194749] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1d.3", "title": "Wire SuggestionEngine into services and dogfood", "status": "closed", "priority": "P1", "type": "task", "description": "Connect the engine to real project data via services and validate it produces useful suggestions for the cub project itself.\n\n**Implementation Steps:**\n1. Create `src/cub/core/services/suggestions.py` as the service wrapper\n2. Wire `SuggestionEngine` to use `TaskService`, `LedgerService`, `StatusService`\n3. Add a CLI command for testing: `cub suggest` (or add to `cub status`)\n4. Run against the current cub project and verify suggestions are sensible\n5. Iterate on ranking weights based on dogfooding results\n6. Document the suggestion categories and their use cases\n\n**Files:** src/cub/core/services/suggestions.py, src/cub/cli/suggest.py, tests/test_suggestions_integration.py", "assignee": "cub-20260128-195914", "labels": ["phase-4", "core", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1d", "created_at": "2026-01-28T17:54:46.169615", "updated_at": "2026-01-28T20:22:32.062910", "closed_at": "2026-01-28T20:22:32.062906", "acceptance_criteria": ["`cub suggest` (or equivalent) produces useful output for cub project", "Suggestions include stale epics, ready tasks, and milestone awareness", "Output is human-readable and actionable", "Engine handles empty projects gracefully (new project with no tasks)"], "notes": "[Closed: 2026-01-28T20:22:32.062912] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e.1", "title": "Implement bare cub default command handler", "status": "closed", "priority": "P0", "type": "task", "description": "This is the primary user-facing deliverable. Bare `cub` detects the environment, generates a welcome message with suggestions, and either launches the harness (terminal) or shows inline status (nested/harness).\n\n**Implementation Steps:**\n1. Create `src/cub/cli/default.py` with the default command function\n2. Wire into `cli/__init__.py`: replace `no_args_is_help=True` with callback that invokes default\n3. Accept `--resume` and `--continue` flags\n4. Call `LaunchService.detect_environment()` to determine context\n5. If nested/harness: call `SuggestionEngine.get_welcome()`, render with Rich, exit\n6. If terminal: generate welcome, resolve harness, launch with `LaunchService.launch_harness()`\n7. Set `CUB_SESSION_ACTIVE=1` and `CUB_SESSION_ID` in launched harness environment\n8. Handle edge cases: no harness available, no project initialized, help flag\n\n**Files:** src/cub/cli/default.py, src/cub/cli/__init__.py, tests/test_default_command.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "feature", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1e.2", "cub-b1e.3"], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169633", "updated_at": "2026-01-28T20:31:26.493282", "closed_at": "2026-01-28T20:31:26.493257", "acceptance_criteria": ["`cub` (no args) launches Claude Code with welcome context", "`cub --resume` passes `--resume` to Claude Code", "`cub --continue` passes `--continue` to Claude Code", "`cub` inside Claude Code shows inline status + suggestions (no nesting)", "`cub` with no harness available shows helpful error", "`cub --help` still works (shows help, not default action)", "Welcome message includes project stats and top suggestion"], "notes": "[Closed: 2026-01-28T20:31:26.493284] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1e.2", "title": "Design and implement welcome message format", "status": "closed", "priority": "P1", "type": "task", "description": "The welcome message is the first thing users see. It needs to be concise, opinionated, and immediately useful. It renders differently in terminal (Rich formatting) vs inline (plain text for harness context).\n\n**Implementation Steps:**\n1. Create `src/cub/core/launch/welcome.py` with `generate_welcome(snapshot) -> WelcomeMessage`\n2. Design terminal format (Rich):\n3. Design harness context format (plain text for system prompt injection)\n4. Create Rich renderer in `cli/default.py` for terminal output\n5. Test with current cub project state\n\n**Files:** src/cub/core/launch/welcome.py, src/cub/cli/default.py, tests/test_welcome.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169652", "updated_at": "2026-01-28T20:37:11.972618", "closed_at": "2026-01-28T20:37:11.972614", "acceptance_criteria": ["Welcome message shows version, task counts, and last activity", "Top suggestion is opinionated with rationale and command", "Available skills listed for discoverability", "Terminal and harness formats both look good", "Handles empty project gracefully (no tasks, no history)"], "notes": "[Closed: 2026-01-28T20:37:11.972622] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1e.3", "title": "Integration testing and edge cases", "status": "closed", "priority": "P1", "type": "task", "description": "The bare cub command has many edge cases that need testing: no project, no harness, nested sessions, resume/continue, different backends.\n\n**Implementation Steps:**\n1. Write integration test: bare cub in fresh directory (no `.cub/`)\n2. Write integration test: bare cub with JSONL backend\n3. Write integration test: bare cub with beads backend\n4. Write integration test: bare cub with `CUB_SESSION_ACTIVE=1` set\n5. Write integration test: bare cub with `--resume`\n6. Write integration test: bare cub when no harness available\n7. Test that `cub --help` still shows help text\n8. Test that `cub <subcommand>` still routes to subcommands normally\n\n**Files:** tests/test_default_command_integration.py", "assignee": "cub-20260128-202245", "labels": ["phase-5", "cli", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1e", "created_at": "2026-01-28T17:54:46.169673", "updated_at": "2026-01-28T20:46:03.745287", "closed_at": "2026-01-28T20:46:03.745282", "acceptance_criteria": ["All integration tests pass", "No regressions in existing subcommand routing", "Edge cases produce helpful error messages, not crashes", "`--help` behavior preserved"], "notes": "[Closed: 2026-01-28T20:46:03.745289] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, {"id": "cub-b1f.1", "title": "Create /cub meta-skill for in-session discovery", "status": "closed", "priority": "P2", "type": "task", "description": "Users inside a harness session need to discover what cub skills are available. A `/cub` meta-skill lists available skills, common commands, and current project status.\n\n**Implementation Steps:**\n1. Create `.claude/commands/cub.md` as the meta-skill\n2. Include: list of available `/cub:*` skills with one-line descriptions\n3. Include: common `cub` CLI commands runnable via Bash (task ready, status, run)\n4. Include: brief explanation of modes (conversational, structured, supervised, autonomous)\n5. Include: dynamic project state (injected via template variables or by running `cub status`)\n\n**Files:** .claude/commands/cub.md", "assignee": "cub-20260128-204617", "labels": ["phase-6", "docs", "feature", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169693", "updated_at": "2026-01-28T20:54:38.292608", "closed_at": "2026-01-28T20:54:38.292604", "acceptance_criteria": ["`/cub` skill exists and is invocable from Claude Code", "Lists all available `/cub:*` skills", "Lists common CLI commands", "Provides enough context for a user to navigate cub's capabilities"], "notes": "[Closed: 2026-01-28T20:54:38.292610] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "in_progress", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": "cub-20260128-204617", "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T20:54:47.603233", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, {"id": "cub-b1f.3", "title": "End-to-end validation of full flow", "status": "closed", "priority": "P1", "type": "task", "description": "Final validation that the entire flow works: bare `cub` \u2192 harness \u2192 use skills \u2192 run tasks \u2192 exit. This is the acceptance test for the whole feature.\n\n**Implementation Steps:**\n1. Manual test: run `cub` from terminal, verify welcome + harness launch\n2. Manual test: inside harness, run `/cub` to see available skills\n3. Manual test: inside harness, run `/cub:spec` to start a spec\n4. Manual test: inside harness, run `cub task ready` to see tasks\n5. Manual test: inside harness, run `cub run --once` for foreground task\n6. Manual test: run `cub` inside the harness (verify nesting prevention)\n7. Document any issues found, create follow-up tasks if needed\n\n**Files:** (manual testing, no code changes expected)", "assignee": "cub-20260128-204617", "labels": ["phase-6", "test", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169724", "updated_at": "2026-01-28T20:52:34.691040", "closed_at": "2026-01-28T20:52:34.691014", "acceptance_criteria": ["Full flow works without crashes or confusing behavior", "Mode transitions feel natural", "Nesting prevention works correctly", "Any issues found are documented as follow-up tasks"], "notes": "[Closed: 2026-01-28T20:52:34.691043] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}], "difference_summary": "List length mismatch: 37 != 29"}
{"timestamp": "2026-01-28T21:01:35.808112", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "difference_summary": "List length mismatch: 35 != 1"}
{"timestamp": "2026-01-28T21:01:35.869479", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "in_progress", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": "cub-20260128-204328", "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T20:43:29.037004Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "in_progress", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": "cub-20260128-204617", "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T20:54:53.770588Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}], "secondary_result": [{"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "in_progress", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": "cub-20260128-204617", "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T20:54:47.603233", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}], "difference_summary": "List length mismatch: 2 != 1"}
{"timestamp": "2026-01-28T21:01:35.917289", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "in_progress", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": "cub-20260128-204328", "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T20:43:29.037004Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a", "title": "bare-cub #1: Core Run Extraction", "status": "open", "priority": "P0", "type": "epic", "description": "Extract ~2500 lines of business logic from `cli/run.py` into a new `core/run/` package. This is the highest-risk, highest-impact phase \u2014 it establishes the pattern that every subsequent phase follows. All existing tests must continue passing after each extraction step.", "assignee": null, "labels": ["core", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707841Z", "updated_at": "2026-01-28T17:54:43.875865Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1e", "title": "bare-cub #5: Bare Cub Command", "status": "open", "priority": "P0", "type": "epic", "description": "Implement the default command handler \u2014 the user-facing deliverable. When someone types `cub` with no subcommand, it launches the default harness with an opinionated welcome.", "assignee": null, "labels": ["cli", "feature", "phase-5"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707912Z", "updated_at": "2026-01-28T17:54:43.878390Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1b", "title": "bare-cub #2: Rich Boundary Cleanup", "status": "open", "priority": "P1", "type": "epic", "description": "Remove all Rich imports from `cub.core` modules. Core returns structured data; CLI renders it. This establishes the architectural rule that enables non-CLI interfaces.", "assignee": null, "labels": ["cleanup", "core", "phase-2", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707880Z", "updated_at": "2026-01-28T17:54:43.876551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1c", "title": "bare-cub #3: Service Layer", "status": "open", "priority": "P1", "type": "epic", "description": "Introduce `cub.core.services` as the public API surface. Services are thin orchestrators that compose domain operations. CLI modules are refactored to call services.", "assignee": null, "labels": ["architecture", "core", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707895Z", "updated_at": "2026-01-28T17:54:43.876987Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1d", "title": "bare-cub #4: Suggestion Engine", "status": "open", "priority": "P1", "type": "epic", "description": "Build the smart recommendation system that analyzes project state and produces ranked, opinionated suggestions for what to do next.", "assignee": null, "labels": ["core", "feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707904Z", "updated_at": "2026-01-28T17:54:43.877594Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["docs", "feature", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:43.707920Z", "updated_at": "2026-01-28T17:54:43.878976Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "in_progress", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": "cub-20260128-204617", "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T20:54:53.770588Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": [{"id": "cub-b1f", "title": "bare-cub #6: Skill Discovery & Documentation", "status": "open", "priority": "P2", "type": "epic", "description": "Make cub capabilities discoverable from within a harness session and document the new architecture.", "assignee": null, "labels": ["phase-6", "docs", "feature"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.408236", "updated_at": "2026-01-28T17:54:44.408236", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "difference_summary": "List length mismatch: 19 != 1"}
{"timestamp": "2026-01-28T21:05:02.921448", "operation": "get_task", "task_id": "cub-b1f.2", "primary_result": {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "closed", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": "cub-20260128-204617", "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T21:03:36.931776Z", "closed_at": "2026-01-28T21:03:36.931776Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "in_progress", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": "cub-20260128-204617", "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T20:54:47.603233", "closed_at": null, "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['complexity:medium', 'docs', 'epic:cub-b1f', 'model:sonnet', 'phase-6'] != ['phase-6', 'docs', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T21:05:02.970643", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 36, "open": 35, "in_progress": 1, "closed": 0}, "secondary_result": {"total": 29, "open": 1, "in_progress": 1, "closed": 27}, "difference_summary": "total: 36 != 29; open: 35 != 1; closed: 0 != 27"}
{"timestamp": "2026-01-28T21:05:03.068692", "operation": "close_task", "task_id": "cub-b1f.2", "primary_result": {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "closed", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": "cub-20260128-204617", "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T21:05:03.012003Z", "closed_at": "2026-01-28T21:05:03.012003Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "closed", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": "cub-20260128-204617", "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T21:05:03.067296", "closed_at": "2026-01-28T21:05:03.067292", "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "[Closed: 2026-01-28T21:05:03.067297] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['complexity:medium', 'docs', 'epic:cub-b1f', 'model:sonnet', 'phase-6'] != ['phase-6', 'docs', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T21:05:03.127836", "operation": "get_task", "task_id": "cub-b1f.2", "primary_result": {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "closed", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": "cub-20260128-204617", "labels": ["complexity:medium", "docs", "epic:cub-b1f", "model:sonnet", "phase-6"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:44.409708Z", "updated_at": "2026-01-28T21:05:03.012003Z", "closed_at": "2026-01-28T21:05:03.012003Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-b1f.2", "title": "Update CLAUDE.md with service architecture and skill reference", "status": "closed", "priority": "P2", "type": "task", "description": "CLAUDE.md needs to reflect the new core/interface architecture so that harness sessions (and agents) understand cub's structure. Also document available skills.\n\n**Implementation Steps:**\n1. Update CLAUDE.md architecture section to reflect service layer\n2. Add \"Available Skills\" section listing all `/cub:*` skills\n3. Add \"Cub Commands\" section with commonly-used CLI commands\n4. Update project structure diagram to show `core/services/`, `core/run/`, `core/suggestions/`, `core/launch/`\n5. Add note about bare `cub` behavior and nesting detection\n6. Remove any outdated references to old architecture\n\n**Files:** CLAUDE.md", "assignee": "cub-20260128-204617", "labels": ["phase-6", "docs", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1f", "created_at": "2026-01-28T17:54:46.169709", "updated_at": "2026-01-28T21:05:03.067296", "closed_at": "2026-01-28T21:05:03.067292", "acceptance_criteria": ["CLAUDE.md reflects current service layer architecture", "Skills section lists all available skills with descriptions", "Project structure diagram is accurate", "A harness session loading CLAUDE.md gets accurate information"], "notes": "[Closed: 2026-01-28T21:05:03.067297] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['complexity:medium', 'docs', 'epic:cub-b1f', 'model:sonnet', 'phase-6'] != ['phase-6', 'docs', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T21:05:14.396889", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 36, "open": 35, "in_progress": 1, "closed": 0}, "secondary_result": {"total": 29, "open": 1, "in_progress": 0, "closed": 28}, "difference_summary": "total: 36 != 29; open: 35 != 1; in_progress: 1 != 0; closed: 0 != 28"}
{"timestamp": "2026-01-29T02:05:57.770576", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 47, "open": 46, "in_progress": 1, "closed": 0}, "secondary_result": {"total": 41, "open": 41, "in_progress": 0, "closed": 0}, "difference_summary": "total: 47 != 41; open: 46 != 41; in_progress: 1 != 0"}
{"timestamp": "2026-01-29T02:05:57.822354", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-n6x.1", "title": "Fix label order comparison in backend divergence checks", "status": "open", "priority": "P2", "type": "task", "description": "The backend divergence detection compares task labels as ordered lists, causing false positives when labels appear in different orders between the beads backend (alphabetically sorted) and in-memory state. Since labels are semantically unordered, comparisons should use set equality instead, eliminating spurious warnings while maintaining detection of real label divergences.\n\n**Implementation Steps:**\n1. Locate backend divergence checks in `close_task()` and `get_task()` operations within the tasks backend implementation\n2. Convert label list comparisons to set comparisons (e.g., `set(a.labels) == set(b.labels)`)\n3. Update any helper functions or comparison logic that currently treat labels as ordered sequences\n4. Add test cases verifying set-based comparison with various label orderings (different permutations of the same labels)\n5. Run tests to confirm false positives are eliminated while real divergences are still detected", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313438Z", "updated_at": "2026-01-29T01:58:07.461695Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.2", "title": "Fix monitor command to work with beads backend", "status": "open", "priority": "P2", "type": "task", "description": "The `cub monitor` command fails with \"No active session found\" error because it was designed for a session-based architecture that has been replaced by beads-based task management. The monitor command needs to be updated to work with the current task backend system, displaying real-time progress on beads tasks instead of looking for legacy session state. This is a critical UX feature for autonomous execution visibility.\n\n**Implementation Steps:**\n1. Investigate current session/task state storage in codebase (check how `cub run` tracks execution, beads backend integration)\n2. Review `cub monitor` implementation to understand what \"active session\" lookup is attempting\n3. Determine appropriate data source for live task progress (beads task status, run loop state, or execution ledger)\n4. Refactor monitor to query beads backend and display real-time task progress\n5. Update help text and error messages to reflect beads-based monitoring\n6. Test monitor command during `cub run` execution to verify real-time updates\n7. Add fallback behavior when no tasks are running (clear message instead of error)", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313492Z", "updated_at": "2026-01-29T01:58:07.464071Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.3", "title": "Add post-command guidance messages to key cub workflows", "status": "open", "priority": "P2", "type": "task", "description": "Users new to cub lack clear direction after running commands, leaving them uncertain about next steps. Contextual guidance messages will improve onboarding and reduce friction by providing actionable next steps with concrete examples. This is a UX improvement focused on making cub more intuitive for new users.\n\n**Implementation Steps:**\n1. Create a guidance module (`cub/core/guidance.py`) with a `GuidanceProvider` class to generate contextual next-step messages based on command type and result\n2. Add guidance output to `cub init` command - display suggested next steps (create capture, run interview, start task) after successful initialization\n3. Add guidance output to `cub capture` command - suggest next steps (review capture, start interview, organize into spec) after capture creation\n4. Add guidance output to `cub spec` command - guide to next phase (detailed requirements, link to epic, schedule planning) after spec creation\n5. Implement `--quiet` flag support across these commands to suppress guidance messages when desired\n6. Format guidance using Rich tables/panels for readability and consistency\n7. Add tests for guidance module and verify all commands respect quiet flag", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313516Z", "updated_at": "2026-01-29T01:58:07.464703Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.4", "title": "Configure git upstream on feature branch creation", "status": "open", "priority": "P2", "type": "task", "description": "When build-plan creates a feature branch, it doesn't set upstream tracking, causing `git push` to fail with \"fatal: The current branch has no upstream branch.\" Users must manually run `git push --set-upstream origin <branch>` before subsequent pushes work. This friction breaks the autonomous workflow where agents should be able to push changes without manual git intervention.\n\n**Implementation Steps:**\n1. Locate the feature branch creation logic in build-plan (likely in `cub.core.launch` or a related module that handles git operations)\n2. After creating the local branch, immediately configure upstream tracking by either:", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313530Z", "updated_at": "2026-01-29T01:58:07.465351Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.5", "title": "Check completed steps before launching architect in plan run", "status": "open", "priority": "P2", "type": "task", "description": "The `cub plan run` command currently assumes architect should launch automatically upon exit, but this breaks workflows where earlier steps are incomplete or partially completed. Users need visibility into which prep pipeline steps (triage, architect, plan, bootstrap) have already been done so they can decide whether to continue, re-run a step, or skip ahead. The system should detect artifacts from previous runs and guide users through the pipeline intelligently rather than blindly advancing.\n\n**Implementation Steps:**\n1. Create a step detection function that checks for completion artifacts (triage markdown files, architect outputs, plan.jsonl, beads state) in the project\n2. Display a summary table showing which prep steps are completed, in-progress, or incomplete when exiting plan run\n3. Prompt the user with options: continue to next incomplete step, re-run a specific step, or exit\n4. Route the selected action back to the appropriate plan subcommand (orient, architect, plan, bootstrap)\n5. Handle edge cases: partial architect completion, missing intermediate steps, corrupted artifacts", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313540Z", "updated_at": "2026-01-29T01:58:07.465964Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.6", "title": "Add build failure detection and retry logic to cub pr", "status": "open", "priority": "P2", "type": "task", "description": "The `cub pr` command currently creates pull requests but has no visibility into CI check status or automated recovery from transient failures. This means flaky tests, rate limits, and temporary service issues require manual intervention, interrupting autonomous workflows. Adding automated failure detection and retry logic would enable self-healing PR workflows that handle common transient failures without manual handoff.\n\n**Implementation Steps:**\n1. Create `cub.core.services.pr_monitor` module to implement check polling and failure detection via `gh pr checks`\n2. Add retry configuration model to `cub.core.config` with timeout duration and max retry count parameters\n3. Extend `LaunchService` to support background PR monitoring while harness is active\n4. Implement check state machine: poll \u2192 detect failure \u2192 wait \u2192 retry \u2192 repeat or succeed\n5. Add `--retry-timeout` and `--no-retry` flags to `cub pr` command in `cub.cli.pr`\n6. Integrate check monitoring into session hooks to log retry history to session forensics\n7. Add check status and retry attempts to `cub.core.ledger` models for session ledger recording\n8. Write integration tests for check detection, retry triggering, and rate limit handling", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313550Z", "updated_at": "2026-01-29T01:58:07.466540Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.7", "title": "Ensure plan.json is created at pipeline start", "status": "open", "priority": "P2", "type": "task", "description": "plan.json is currently written during the orient stage rather than when the plan context is first created. If orient fails before calling ctx.save_plan(), there's no plan.json file to recover from. This reduces fault tolerance and prevents resumption in cases where early stage failures occur. Creating plan.json immediately after context initialization ensures a persistent checkpoint exists from the start.\n\n**Implementation Steps:**\n1. Locate PipelineConfig.run() and identify where PlanContext is created or loaded\n2. Add ctx.save_plan() call immediately after plan context initialization, before any stage runs\n3. Verify orient stage's existing ctx.save_plan() call at line 484 doesn't duplicate writes\n4. Run full test suite to ensure pipeline behavior remains unchanged\n5. Verify plan.json exists at project root before any stage execution begins", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313563Z", "updated_at": "2026-01-29T01:58:07.467200Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.8", "title": "Remove deprecated cub:triage and cub:plan skill commands", "status": "open", "priority": "P2", "type": "task", "description": "The cub:triage and cub:plan skill commands are no longer needed and create maintenance overhead. These commands were part of an earlier planning pipeline that has been superseded by other tooling. Removing them will reduce code complexity, eliminate dead skill registrations, and prevent confusion about available planning commands. This is a straightforward cleanup task with no backward compatibility concerns.\n\n**Implementation Steps:**\n1. Search the codebase for all references to `cub:triage` and `cub:plan` (skill definitions, command registrations, templates)\n2. Remove skill command definitions for `cub:triage` and `cub:plan` from skill/command template files\n3. Remove any `.claude/commands` configuration entries that register these skills\n4. Remove skill routing and registration code that supports these commands\n5. Search for any remaining references (comments, documentation, imports) and clean them up\n6. Verify no broken references remain by grepping for \"cub:triage\" and \"cub:plan\" across the codebase", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313572Z", "updated_at": "2026-01-29T01:58:07.467757Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "open", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313582Z", "updated_at": "2026-01-29T01:58:07.468436Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "open", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313625Z", "updated_at": "2026-01-29T01:58:07.462661Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "open", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313643Z", "updated_at": "2026-01-29T01:58:07.463381Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "secondary_result": [{"id": "cub-n6x.1", "title": "Fix label order comparison in backend divergence checks", "status": "open", "priority": "P2", "type": "task", "description": "The backend divergence detection compares task labels as ordered lists, causing false positives when labels appear in different orders between the beads backend (alphabetically sorted) and in-memory state. Since labels are semantically unordered, comparisons should use set equality instead, eliminating spurious warnings while maintaining detection of real label divergences.\n\n**Implementation Steps:**\n1. Locate backend divergence checks in `close_task()` and `get_task()` operations within the tasks backend implementation\n2. Convert label list comparisons to set comparisons (e.g., `set(a.labels) == set(b.labels)`)\n3. Update any helper functions or comparison logic that currently treat labels as ordered sequences\n4. Add test cases verifying set-based comparison with various label orderings (different permutations of the same labels)\n5. Run tests to confirm false positives are eliminated while real divergences are still detected", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.211916", "updated_at": "2026-01-29T01:58:08.211921", "closed_at": null, "acceptance_criteria": ["Backend divergence checks compare labels as sets, not lists", "False positives from label reordering are eliminated", "Real divergences (actual label additions/removals) are still detected", "No warnings logged when only label order differs", "Tests verify set-based comparison with various label orderings", "All existing tests pass with changes"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.2", "title": "Fix monitor command to work with beads backend", "status": "open", "priority": "P2", "type": "task", "description": "The `cub monitor` command fails with \"No active session found\" error because it was designed for a session-based architecture that has been replaced by beads-based task management. The monitor command needs to be updated to work with the current task backend system, displaying real-time progress on beads tasks instead of looking for legacy session state. This is a critical UX feature for autonomous execution visibility.\n\n**Implementation Steps:**\n1. Investigate current session/task state storage in codebase (check how `cub run` tracks execution, beads backend integration)\n2. Review `cub monitor` implementation to understand what \"active session\" lookup is attempting\n3. Determine appropriate data source for live task progress (beads task status, run loop state, or execution ledger)\n4. Refactor monitor to query beads backend and display real-time task progress\n5. Update help text and error messages to reflect beads-based monitoring\n6. Test monitor command during `cub run` execution to verify real-time updates\n7. Add fallback behavior when no tasks are running (clear message instead of error)", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212055", "updated_at": "2026-01-29T01:58:08.212056", "closed_at": null, "acceptance_criteria": ["`cub monitor` executes without \"No active session found\" error", "Command displays live task progress when `cub run` is executing", "Shows appropriate status message when no tasks are running", "Works with beads backend task management system", "Help text accurately describes monitoring beads tasks", "Works both standalone and during active `cub run` sessions"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.3", "title": "Add post-command guidance messages to key cub workflows", "status": "open", "priority": "P2", "type": "task", "description": "Users new to cub lack clear direction after running commands, leaving them uncertain about next steps. Contextual guidance messages will improve onboarding and reduce friction by providing actionable next steps with concrete examples. This is a UX improvement focused on making cub more intuitive for new users.\n\n**Implementation Steps:**\n1. Create a guidance module (`cub/core/guidance.py`) with a `GuidanceProvider` class to generate contextual next-step messages based on command type and result\n2. Add guidance output to `cub init` command - display suggested next steps (create capture, run interview, start task) after successful initialization\n3. Add guidance output to `cub capture` command - suggest next steps (review capture, start interview, organize into spec) after capture creation\n4. Add guidance output to `cub spec` command - guide to next phase (detailed requirements, link to epic, schedule planning) after spec creation\n5. Implement `--quiet` flag support across these commands to suppress guidance messages when desired\n6. Format guidance using Rich tables/panels for readability and consistency\n7. Add tests for guidance module and verify all commands respect quiet flag", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212115", "updated_at": "2026-01-29T01:58:08.212115", "closed_at": null, "acceptance_criteria": ["`cub init` displays 3-5 actionable next steps with copyable command examples after initialization", "`cub capture` displays 3-5 actionable next steps after successful capture creation", "`cub spec` displays 3-5 actionable next steps after successful spec creation", "All guidance messages respect `--quiet` flag and suppress output when enabled", "Guidance uses Rich formatting (tables or panels) for consistent, readable output", "Command examples in guidance are accurate and directly copyable", "All existing command behavior remains unchanged (guidance is additive only)", "Unit tests cover guidance message generation for each command type"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.4", "title": "Configure git upstream on feature branch creation", "status": "open", "priority": "P2", "type": "task", "description": "When build-plan creates a feature branch, it doesn't set upstream tracking, causing `git push` to fail with \"fatal: The current branch has no upstream branch.\" Users must manually run `git push --set-upstream origin <branch>` before subsequent pushes work. This friction breaks the autonomous workflow where agents should be able to push changes without manual git intervention.\n\n**Implementation Steps:**\n1. Locate the feature branch creation logic in build-plan (likely in `cub.core.launch` or a related module that handles git operations)\n2. After creating the local branch, immediately configure upstream tracking by either:", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212201", "updated_at": "2026-01-29T01:58:08.212202", "closed_at": null, "acceptance_criteria": ["Feature branches created by build-plan have upstream tracking configured", "`git push` works on new branches without `--set-upstream` flag", "Works for both new local branches and existing branches being pushed for first time", "Tests confirm upstream tracking is set and push operations succeed", "Documentation updated in CLAUDE.md"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.5", "title": "Check completed steps before launching architect in plan run", "status": "open", "priority": "P2", "type": "task", "description": "The `cub plan run` command currently assumes architect should launch automatically upon exit, but this breaks workflows where earlier steps are incomplete or partially completed. Users need visibility into which prep pipeline steps (triage, architect, plan, bootstrap) have already been done so they can decide whether to continue, re-run a step, or skip ahead. The system should detect artifacts from previous runs and guide users through the pipeline intelligently rather than blindly advancing.\n\n**Implementation Steps:**\n1. Create a step detection function that checks for completion artifacts (triage markdown files, architect outputs, plan.jsonl, beads state) in the project\n2. Display a summary table showing which prep steps are completed, in-progress, or incomplete when exiting plan run\n3. Prompt the user with options: continue to next incomplete step, re-run a specific step, or exit\n4. Route the selected action back to the appropriate plan subcommand (orient, architect, plan, bootstrap)\n5. Handle edge cases: partial architect completion, missing intermediate steps, corrupted artifacts", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212245", "updated_at": "2026-01-29T01:58:08.212246", "closed_at": null, "acceptance_criteria": ["Detects completion status of all four prep steps via artifact inspection", "Displays step summary before prompting for next action", "Offers user choice to continue, re-run, or exit (not forced into architect)", "Does not launch architect if earlier steps are incomplete", "Gracefully handles partial completion and corrupted artifacts"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.6", "title": "Add build failure detection and retry logic to cub pr", "status": "open", "priority": "P2", "type": "task", "description": "The `cub pr` command currently creates pull requests but has no visibility into CI check status or automated recovery from transient failures. This means flaky tests, rate limits, and temporary service issues require manual intervention, interrupting autonomous workflows. Adding automated failure detection and retry logic would enable self-healing PR workflows that handle common transient failures without manual handoff.\n\n**Implementation Steps:**\n1. Create `cub.core.services.pr_monitor` module to implement check polling and failure detection via `gh pr checks`\n2. Add retry configuration model to `cub.core.config` with timeout duration and max retry count parameters\n3. Extend `LaunchService` to support background PR monitoring while harness is active\n4. Implement check state machine: poll \u2192 detect failure \u2192 wait \u2192 retry \u2192 repeat or succeed\n5. Add `--retry-timeout` and `--no-retry` flags to `cub pr` command in `cub.cli.pr`\n6. Integrate check monitoring into session hooks to log retry history to session forensics\n7. Add check status and retry attempts to `cub.core.ledger` models for session ledger recording\n8. Write integration tests for check detection, retry triggering, and rate limit handling", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212294", "updated_at": "2026-01-29T01:58:08.212295", "closed_at": null, "acceptance_criteria": ["`cub pr` detects PR check failures via `gh pr checks` polling", "Automatic retry timer (default 10 minutes, configurable) activates when failures detected", "`--retry-timeout` flag accepts duration strings (e.g., `5m`, `30s`)", "`--no-retry` flag disables automatic retry behavior for all check types", "Failed checks are re-triggered via `gh pr checks --rerun` or equivalent", "Session forensics (`.cub/ledger/forensics/{session_id}.jsonl`) logs all check statuses and retry attempts with timestamps", "Max retries (default 3) prevents infinite loop; stops retrying after limit reached", "Handles `gh` API rate limiting and network errors gracefully with exponential backoff", "Works with both draft PRs (`--draft`) and regular PRs"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.7", "title": "Ensure plan.json is created at pipeline start", "status": "open", "priority": "P2", "type": "task", "description": "plan.json is currently written during the orient stage rather than when the plan context is first created. If orient fails before calling ctx.save_plan(), there's no plan.json file to recover from. This reduces fault tolerance and prevents resumption in cases where early stage failures occur. Creating plan.json immediately after context initialization ensures a persistent checkpoint exists from the start.\n\n**Implementation Steps:**\n1. Locate PipelineConfig.run() and identify where PlanContext is created or loaded\n2. Add ctx.save_plan() call immediately after plan context initialization, before any stage runs\n3. Verify orient stage's existing ctx.save_plan() call at line 484 doesn't duplicate writes\n4. Run full test suite to ensure pipeline behavior remains unchanged\n5. Verify plan.json exists at project root before any stage execution begins", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212336", "updated_at": "2026-01-29T01:58:08.212336", "closed_at": null, "acceptance_criteria": ["plan.json is created immediately after plan context initialization", "plan.json exists before orient stage executes", "All existing tests pass with no behavioral changes", "Plan data is recoverable/resumable even if orient fails early"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.8", "title": "Remove deprecated cub:triage and cub:plan skill commands", "status": "open", "priority": "P2", "type": "task", "description": "The cub:triage and cub:plan skill commands are no longer needed and create maintenance overhead. These commands were part of an earlier planning pipeline that has been superseded by other tooling. Removing them will reduce code complexity, eliminate dead skill registrations, and prevent confusion about available planning commands. This is a straightforward cleanup task with no backward compatibility concerns.\n\n**Implementation Steps:**\n1. Search the codebase for all references to `cub:triage` and `cub:plan` (skill definitions, command registrations, templates)\n2. Remove skill command definitions for `cub:triage` and `cub:plan` from skill/command template files\n3. Remove any `.claude/commands` configuration entries that register these skills\n4. Remove skill routing and registration code that supports these commands\n5. Search for any remaining references (comments, documentation, imports) and clean them up\n6. Verify no broken references remain by grepping for \"cub:triage\" and \"cub:plan\" across the codebase", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212370", "updated_at": "2026-01-29T01:58:08.212371", "closed_at": null, "acceptance_criteria": ["`cub:triage` no longer appears in any templates, configuration files, or code", "`cub:plan` no longer appears in any templates, configuration files, or code", "All skill registration/routing code that handled these commands is removed", "Remaining skills and commands continue to function correctly (verify with `cub --help`)", "No broken imports or dangling references to removed skill definitions", "Git status shows only the intended removals (no accidental changes)"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "open", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212407", "updated_at": "2026-01-29T01:58:08.212407", "closed_at": null, "acceptance_criteria": ["Headline box displays harness backend name when available", "Headline box displays model name when available", "Other explicit configuration specs are included if applicable", "Layout remains readable without excessive line wrapping", "Unconfigured specs are omitted gracefully (no \"None\", \"N/A\", or blank values shown)", "Changes work in both `cub run` and direct session contexts", "Existing tests pass and new tests cover headline rendering scenarios"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "open", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212440", "updated_at": "2026-01-29T01:58:08.212440", "closed_at": null, "acceptance_criteria": ["Each streamed message is followed by exactly one newline character", "Output is readable with clear visual separation between consecutive messages", "Non-stream output (`cub run` without `--stream`) is unaffected", "Works correctly with all harness backends (claude, codex, gemini, opencode)", "No duplicate blank lines or extra whitespace introduced", "Existing tests still pass and new behavior is tested"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "open", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212476", "updated_at": "2026-01-29T01:58:08.212477", "closed_at": null, "acceptance_criteria": ["Progress indicator displays \"[current/total]\" format for each item", "Item title or brief summary appears alongside progress update", "Updates appear incrementally as each item completes processing", "No measurable latency increase compared to current implementation", "Output uses Rich console consistent with other cub commands", "Works correctly with punchlist files of varying sizes (3-50+ items)"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "difference_summary": "Task 0 (cub-n6x.1): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 1 (cub-n6x.10): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 2 (cub-n6x.11): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 3 (cub-n6x.2): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 4 (cub-n6x.3): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 5 (cub-n6x.4): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 6 (cub-n6x.5): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 7 (cub-n6x.6): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 8 (cub-n6x.7): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 9 (cub-n6x.8): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 10 (cub-n6x.9): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x"}
{"timestamp": "2026-01-29T02:05:57.882063", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-n6x.1", "title": "Fix label order comparison in backend divergence checks", "status": "open", "priority": "P2", "type": "task", "description": "The backend divergence detection compares task labels as ordered lists, causing false positives when labels appear in different orders between the beads backend (alphabetically sorted) and in-memory state. Since labels are semantically unordered, comparisons should use set equality instead, eliminating spurious warnings while maintaining detection of real label divergences.\n\n**Implementation Steps:**\n1. Locate backend divergence checks in `close_task()` and `get_task()` operations within the tasks backend implementation\n2. Convert label list comparisons to set comparisons (e.g., `set(a.labels) == set(b.labels)`)\n3. Update any helper functions or comparison logic that currently treat labels as ordered sequences\n4. Add test cases verifying set-based comparison with various label orderings (different permutations of the same labels)\n5. Run tests to confirm false positives are eliminated while real divergences are still detected", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313438Z", "updated_at": "2026-01-29T01:58:07.461695Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.2", "title": "Fix monitor command to work with beads backend", "status": "open", "priority": "P2", "type": "task", "description": "The `cub monitor` command fails with \"No active session found\" error because it was designed for a session-based architecture that has been replaced by beads-based task management. The monitor command needs to be updated to work with the current task backend system, displaying real-time progress on beads tasks instead of looking for legacy session state. This is a critical UX feature for autonomous execution visibility.\n\n**Implementation Steps:**\n1. Investigate current session/task state storage in codebase (check how `cub run` tracks execution, beads backend integration)\n2. Review `cub monitor` implementation to understand what \"active session\" lookup is attempting\n3. Determine appropriate data source for live task progress (beads task status, run loop state, or execution ledger)\n4. Refactor monitor to query beads backend and display real-time task progress\n5. Update help text and error messages to reflect beads-based monitoring\n6. Test monitor command during `cub run` execution to verify real-time updates\n7. Add fallback behavior when no tasks are running (clear message instead of error)", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313492Z", "updated_at": "2026-01-29T01:58:07.464071Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.3", "title": "Add post-command guidance messages to key cub workflows", "status": "open", "priority": "P2", "type": "task", "description": "Users new to cub lack clear direction after running commands, leaving them uncertain about next steps. Contextual guidance messages will improve onboarding and reduce friction by providing actionable next steps with concrete examples. This is a UX improvement focused on making cub more intuitive for new users.\n\n**Implementation Steps:**\n1. Create a guidance module (`cub/core/guidance.py`) with a `GuidanceProvider` class to generate contextual next-step messages based on command type and result\n2. Add guidance output to `cub init` command - display suggested next steps (create capture, run interview, start task) after successful initialization\n3. Add guidance output to `cub capture` command - suggest next steps (review capture, start interview, organize into spec) after capture creation\n4. Add guidance output to `cub spec` command - guide to next phase (detailed requirements, link to epic, schedule planning) after spec creation\n5. Implement `--quiet` flag support across these commands to suppress guidance messages when desired\n6. Format guidance using Rich tables/panels for readability and consistency\n7. Add tests for guidance module and verify all commands respect quiet flag", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313516Z", "updated_at": "2026-01-29T01:58:07.464703Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.4", "title": "Configure git upstream on feature branch creation", "status": "open", "priority": "P2", "type": "task", "description": "When build-plan creates a feature branch, it doesn't set upstream tracking, causing `git push` to fail with \"fatal: The current branch has no upstream branch.\" Users must manually run `git push --set-upstream origin <branch>` before subsequent pushes work. This friction breaks the autonomous workflow where agents should be able to push changes without manual git intervention.\n\n**Implementation Steps:**\n1. Locate the feature branch creation logic in build-plan (likely in `cub.core.launch` or a related module that handles git operations)\n2. After creating the local branch, immediately configure upstream tracking by either:", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313530Z", "updated_at": "2026-01-29T01:58:07.465351Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.5", "title": "Check completed steps before launching architect in plan run", "status": "open", "priority": "P2", "type": "task", "description": "The `cub plan run` command currently assumes architect should launch automatically upon exit, but this breaks workflows where earlier steps are incomplete or partially completed. Users need visibility into which prep pipeline steps (triage, architect, plan, bootstrap) have already been done so they can decide whether to continue, re-run a step, or skip ahead. The system should detect artifacts from previous runs and guide users through the pipeline intelligently rather than blindly advancing.\n\n**Implementation Steps:**\n1. Create a step detection function that checks for completion artifacts (triage markdown files, architect outputs, plan.jsonl, beads state) in the project\n2. Display a summary table showing which prep steps are completed, in-progress, or incomplete when exiting plan run\n3. Prompt the user with options: continue to next incomplete step, re-run a specific step, or exit\n4. Route the selected action back to the appropriate plan subcommand (orient, architect, plan, bootstrap)\n5. Handle edge cases: partial architect completion, missing intermediate steps, corrupted artifacts", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313540Z", "updated_at": "2026-01-29T01:58:07.465964Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.6", "title": "Add build failure detection and retry logic to cub pr", "status": "open", "priority": "P2", "type": "task", "description": "The `cub pr` command currently creates pull requests but has no visibility into CI check status or automated recovery from transient failures. This means flaky tests, rate limits, and temporary service issues require manual intervention, interrupting autonomous workflows. Adding automated failure detection and retry logic would enable self-healing PR workflows that handle common transient failures without manual handoff.\n\n**Implementation Steps:**\n1. Create `cub.core.services.pr_monitor` module to implement check polling and failure detection via `gh pr checks`\n2. Add retry configuration model to `cub.core.config` with timeout duration and max retry count parameters\n3. Extend `LaunchService` to support background PR monitoring while harness is active\n4. Implement check state machine: poll \u2192 detect failure \u2192 wait \u2192 retry \u2192 repeat or succeed\n5. Add `--retry-timeout` and `--no-retry` flags to `cub pr` command in `cub.cli.pr`\n6. Integrate check monitoring into session hooks to log retry history to session forensics\n7. Add check status and retry attempts to `cub.core.ledger` models for session ledger recording\n8. Write integration tests for check detection, retry triggering, and rate limit handling", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313550Z", "updated_at": "2026-01-29T01:58:07.466540Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.7", "title": "Ensure plan.json is created at pipeline start", "status": "open", "priority": "P2", "type": "task", "description": "plan.json is currently written during the orient stage rather than when the plan context is first created. If orient fails before calling ctx.save_plan(), there's no plan.json file to recover from. This reduces fault tolerance and prevents resumption in cases where early stage failures occur. Creating plan.json immediately after context initialization ensures a persistent checkpoint exists from the start.\n\n**Implementation Steps:**\n1. Locate PipelineConfig.run() and identify where PlanContext is created or loaded\n2. Add ctx.save_plan() call immediately after plan context initialization, before any stage runs\n3. Verify orient stage's existing ctx.save_plan() call at line 484 doesn't duplicate writes\n4. Run full test suite to ensure pipeline behavior remains unchanged\n5. Verify plan.json exists at project root before any stage execution begins", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313563Z", "updated_at": "2026-01-29T01:58:07.467200Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.8", "title": "Remove deprecated cub:triage and cub:plan skill commands", "status": "open", "priority": "P2", "type": "task", "description": "The cub:triage and cub:plan skill commands are no longer needed and create maintenance overhead. These commands were part of an earlier planning pipeline that has been superseded by other tooling. Removing them will reduce code complexity, eliminate dead skill registrations, and prevent confusion about available planning commands. This is a straightforward cleanup task with no backward compatibility concerns.\n\n**Implementation Steps:**\n1. Search the codebase for all references to `cub:triage` and `cub:plan` (skill definitions, command registrations, templates)\n2. Remove skill command definitions for `cub:triage` and `cub:plan` from skill/command template files\n3. Remove any `.claude/commands` configuration entries that register these skills\n4. Remove skill routing and registration code that supports these commands\n5. Search for any remaining references (comments, documentation, imports) and clean them up\n6. Verify no broken references remain by grepping for \"cub:triage\" and \"cub:plan\" across the codebase", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313572Z", "updated_at": "2026-01-29T01:58:07.467757Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "open", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313582Z", "updated_at": "2026-01-29T01:58:07.468436Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "open", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313625Z", "updated_at": "2026-01-29T01:58:07.462661Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "open", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313643Z", "updated_at": "2026-01-29T01:58:07.463381Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "secondary_result": [{"id": "cub-n6x.1", "title": "Fix label order comparison in backend divergence checks", "status": "open", "priority": "P2", "type": "task", "description": "The backend divergence detection compares task labels as ordered lists, causing false positives when labels appear in different orders between the beads backend (alphabetically sorted) and in-memory state. Since labels are semantically unordered, comparisons should use set equality instead, eliminating spurious warnings while maintaining detection of real label divergences.\n\n**Implementation Steps:**\n1. Locate backend divergence checks in `close_task()` and `get_task()` operations within the tasks backend implementation\n2. Convert label list comparisons to set comparisons (e.g., `set(a.labels) == set(b.labels)`)\n3. Update any helper functions or comparison logic that currently treat labels as ordered sequences\n4. Add test cases verifying set-based comparison with various label orderings (different permutations of the same labels)\n5. Run tests to confirm false positives are eliminated while real divergences are still detected", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.211916", "updated_at": "2026-01-29T01:58:08.211921", "closed_at": null, "acceptance_criteria": ["Backend divergence checks compare labels as sets, not lists", "False positives from label reordering are eliminated", "Real divergences (actual label additions/removals) are still detected", "No warnings logged when only label order differs", "Tests verify set-based comparison with various label orderings", "All existing tests pass with changes"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.2", "title": "Fix monitor command to work with beads backend", "status": "open", "priority": "P2", "type": "task", "description": "The `cub monitor` command fails with \"No active session found\" error because it was designed for a session-based architecture that has been replaced by beads-based task management. The monitor command needs to be updated to work with the current task backend system, displaying real-time progress on beads tasks instead of looking for legacy session state. This is a critical UX feature for autonomous execution visibility.\n\n**Implementation Steps:**\n1. Investigate current session/task state storage in codebase (check how `cub run` tracks execution, beads backend integration)\n2. Review `cub monitor` implementation to understand what \"active session\" lookup is attempting\n3. Determine appropriate data source for live task progress (beads task status, run loop state, or execution ledger)\n4. Refactor monitor to query beads backend and display real-time task progress\n5. Update help text and error messages to reflect beads-based monitoring\n6. Test monitor command during `cub run` execution to verify real-time updates\n7. Add fallback behavior when no tasks are running (clear message instead of error)", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212055", "updated_at": "2026-01-29T01:58:08.212056", "closed_at": null, "acceptance_criteria": ["`cub monitor` executes without \"No active session found\" error", "Command displays live task progress when `cub run` is executing", "Shows appropriate status message when no tasks are running", "Works with beads backend task management system", "Help text accurately describes monitoring beads tasks", "Works both standalone and during active `cub run` sessions"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.3", "title": "Add post-command guidance messages to key cub workflows", "status": "open", "priority": "P2", "type": "task", "description": "Users new to cub lack clear direction after running commands, leaving them uncertain about next steps. Contextual guidance messages will improve onboarding and reduce friction by providing actionable next steps with concrete examples. This is a UX improvement focused on making cub more intuitive for new users.\n\n**Implementation Steps:**\n1. Create a guidance module (`cub/core/guidance.py`) with a `GuidanceProvider` class to generate contextual next-step messages based on command type and result\n2. Add guidance output to `cub init` command - display suggested next steps (create capture, run interview, start task) after successful initialization\n3. Add guidance output to `cub capture` command - suggest next steps (review capture, start interview, organize into spec) after capture creation\n4. Add guidance output to `cub spec` command - guide to next phase (detailed requirements, link to epic, schedule planning) after spec creation\n5. Implement `--quiet` flag support across these commands to suppress guidance messages when desired\n6. Format guidance using Rich tables/panels for readability and consistency\n7. Add tests for guidance module and verify all commands respect quiet flag", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212115", "updated_at": "2026-01-29T01:58:08.212115", "closed_at": null, "acceptance_criteria": ["`cub init` displays 3-5 actionable next steps with copyable command examples after initialization", "`cub capture` displays 3-5 actionable next steps after successful capture creation", "`cub spec` displays 3-5 actionable next steps after successful spec creation", "All guidance messages respect `--quiet` flag and suppress output when enabled", "Guidance uses Rich formatting (tables or panels) for consistent, readable output", "Command examples in guidance are accurate and directly copyable", "All existing command behavior remains unchanged (guidance is additive only)", "Unit tests cover guidance message generation for each command type"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.4", "title": "Configure git upstream on feature branch creation", "status": "open", "priority": "P2", "type": "task", "description": "When build-plan creates a feature branch, it doesn't set upstream tracking, causing `git push` to fail with \"fatal: The current branch has no upstream branch.\" Users must manually run `git push --set-upstream origin <branch>` before subsequent pushes work. This friction breaks the autonomous workflow where agents should be able to push changes without manual git intervention.\n\n**Implementation Steps:**\n1. Locate the feature branch creation logic in build-plan (likely in `cub.core.launch` or a related module that handles git operations)\n2. After creating the local branch, immediately configure upstream tracking by either:", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212201", "updated_at": "2026-01-29T01:58:08.212202", "closed_at": null, "acceptance_criteria": ["Feature branches created by build-plan have upstream tracking configured", "`git push` works on new branches without `--set-upstream` flag", "Works for both new local branches and existing branches being pushed for first time", "Tests confirm upstream tracking is set and push operations succeed", "Documentation updated in CLAUDE.md"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.5", "title": "Check completed steps before launching architect in plan run", "status": "open", "priority": "P2", "type": "task", "description": "The `cub plan run` command currently assumes architect should launch automatically upon exit, but this breaks workflows where earlier steps are incomplete or partially completed. Users need visibility into which prep pipeline steps (triage, architect, plan, bootstrap) have already been done so they can decide whether to continue, re-run a step, or skip ahead. The system should detect artifacts from previous runs and guide users through the pipeline intelligently rather than blindly advancing.\n\n**Implementation Steps:**\n1. Create a step detection function that checks for completion artifacts (triage markdown files, architect outputs, plan.jsonl, beads state) in the project\n2. Display a summary table showing which prep steps are completed, in-progress, or incomplete when exiting plan run\n3. Prompt the user with options: continue to next incomplete step, re-run a specific step, or exit\n4. Route the selected action back to the appropriate plan subcommand (orient, architect, plan, bootstrap)\n5. Handle edge cases: partial architect completion, missing intermediate steps, corrupted artifacts", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212245", "updated_at": "2026-01-29T01:58:08.212246", "closed_at": null, "acceptance_criteria": ["Detects completion status of all four prep steps via artifact inspection", "Displays step summary before prompting for next action", "Offers user choice to continue, re-run, or exit (not forced into architect)", "Does not launch architect if earlier steps are incomplete", "Gracefully handles partial completion and corrupted artifacts"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.6", "title": "Add build failure detection and retry logic to cub pr", "status": "open", "priority": "P2", "type": "task", "description": "The `cub pr` command currently creates pull requests but has no visibility into CI check status or automated recovery from transient failures. This means flaky tests, rate limits, and temporary service issues require manual intervention, interrupting autonomous workflows. Adding automated failure detection and retry logic would enable self-healing PR workflows that handle common transient failures without manual handoff.\n\n**Implementation Steps:**\n1. Create `cub.core.services.pr_monitor` module to implement check polling and failure detection via `gh pr checks`\n2. Add retry configuration model to `cub.core.config` with timeout duration and max retry count parameters\n3. Extend `LaunchService` to support background PR monitoring while harness is active\n4. Implement check state machine: poll \u2192 detect failure \u2192 wait \u2192 retry \u2192 repeat or succeed\n5. Add `--retry-timeout` and `--no-retry` flags to `cub pr` command in `cub.cli.pr`\n6. Integrate check monitoring into session hooks to log retry history to session forensics\n7. Add check status and retry attempts to `cub.core.ledger` models for session ledger recording\n8. Write integration tests for check detection, retry triggering, and rate limit handling", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212294", "updated_at": "2026-01-29T01:58:08.212295", "closed_at": null, "acceptance_criteria": ["`cub pr` detects PR check failures via `gh pr checks` polling", "Automatic retry timer (default 10 minutes, configurable) activates when failures detected", "`--retry-timeout` flag accepts duration strings (e.g., `5m`, `30s`)", "`--no-retry` flag disables automatic retry behavior for all check types", "Failed checks are re-triggered via `gh pr checks --rerun` or equivalent", "Session forensics (`.cub/ledger/forensics/{session_id}.jsonl`) logs all check statuses and retry attempts with timestamps", "Max retries (default 3) prevents infinite loop; stops retrying after limit reached", "Handles `gh` API rate limiting and network errors gracefully with exponential backoff", "Works with both draft PRs (`--draft`) and regular PRs"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.7", "title": "Ensure plan.json is created at pipeline start", "status": "open", "priority": "P2", "type": "task", "description": "plan.json is currently written during the orient stage rather than when the plan context is first created. If orient fails before calling ctx.save_plan(), there's no plan.json file to recover from. This reduces fault tolerance and prevents resumption in cases where early stage failures occur. Creating plan.json immediately after context initialization ensures a persistent checkpoint exists from the start.\n\n**Implementation Steps:**\n1. Locate PipelineConfig.run() and identify where PlanContext is created or loaded\n2. Add ctx.save_plan() call immediately after plan context initialization, before any stage runs\n3. Verify orient stage's existing ctx.save_plan() call at line 484 doesn't duplicate writes\n4. Run full test suite to ensure pipeline behavior remains unchanged\n5. Verify plan.json exists at project root before any stage execution begins", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212336", "updated_at": "2026-01-29T01:58:08.212336", "closed_at": null, "acceptance_criteria": ["plan.json is created immediately after plan context initialization", "plan.json exists before orient stage executes", "All existing tests pass with no behavioral changes", "Plan data is recoverable/resumable even if orient fails early"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.8", "title": "Remove deprecated cub:triage and cub:plan skill commands", "status": "open", "priority": "P2", "type": "task", "description": "The cub:triage and cub:plan skill commands are no longer needed and create maintenance overhead. These commands were part of an earlier planning pipeline that has been superseded by other tooling. Removing them will reduce code complexity, eliminate dead skill registrations, and prevent confusion about available planning commands. This is a straightforward cleanup task with no backward compatibility concerns.\n\n**Implementation Steps:**\n1. Search the codebase for all references to `cub:triage` and `cub:plan` (skill definitions, command registrations, templates)\n2. Remove skill command definitions for `cub:triage` and `cub:plan` from skill/command template files\n3. Remove any `.claude/commands` configuration entries that register these skills\n4. Remove skill routing and registration code that supports these commands\n5. Search for any remaining references (comments, documentation, imports) and clean them up\n6. Verify no broken references remain by grepping for \"cub:triage\" and \"cub:plan\" across the codebase", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212370", "updated_at": "2026-01-29T01:58:08.212371", "closed_at": null, "acceptance_criteria": ["`cub:triage` no longer appears in any templates, configuration files, or code", "`cub:plan` no longer appears in any templates, configuration files, or code", "All skill registration/routing code that handled these commands is removed", "Remaining skills and commands continue to function correctly (verify with `cub --help`)", "No broken imports or dangling references to removed skill definitions", "Git status shows only the intended removals (no accidental changes)"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "open", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212407", "updated_at": "2026-01-29T01:58:08.212407", "closed_at": null, "acceptance_criteria": ["Headline box displays harness backend name when available", "Headline box displays model name when available", "Other explicit configuration specs are included if applicable", "Layout remains readable without excessive line wrapping", "Unconfigured specs are omitted gracefully (no \"None\", \"N/A\", or blank values shown)", "Changes work in both `cub run` and direct session contexts", "Existing tests pass and new tests cover headline rendering scenarios"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "open", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212440", "updated_at": "2026-01-29T01:58:08.212440", "closed_at": null, "acceptance_criteria": ["Each streamed message is followed by exactly one newline character", "Output is readable with clear visual separation between consecutive messages", "Non-stream output (`cub run` without `--stream`) is unaffected", "Works correctly with all harness backends (claude, codex, gemini, opencode)", "No duplicate blank lines or extra whitespace introduced", "Existing tests still pass and new behavior is tested"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "open", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212476", "updated_at": "2026-01-29T01:58:08.212477", "closed_at": null, "acceptance_criteria": ["Progress indicator displays \"[current/total]\" format for each item", "Item title or brief summary appears alongside progress update", "Updates appear incrementally as each item completes processing", "No measurable latency increase compared to current implementation", "Output uses Rich console consistent with other cub commands", "Works correctly with punchlist files of varying sizes (3-50+ items)"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "difference_summary": "Task 0 (cub-n6x.1): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 1 (cub-n6x.10): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 2 (cub-n6x.11): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 3 (cub-n6x.2): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 4 (cub-n6x.3): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 5 (cub-n6x.4): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 6 (cub-n6x.5): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 7 (cub-n6x.6): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 8 (cub-n6x.7): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 9 (cub-n6x.8): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 10 (cub-n6x.9): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x"}
{"timestamp": "2026-01-29T02:05:57.929633", "operation": "get_task", "task_id": "cub-n6x.1", "primary_result": {"id": "cub-n6x.1", "title": "Fix label order comparison in backend divergence checks", "status": "open", "priority": "P2", "type": "task", "description": "The backend divergence detection compares task labels as ordered lists, causing false positives when labels appear in different orders between the beads backend (alphabetically sorted) and in-memory state. Since labels are semantically unordered, comparisons should use set equality instead, eliminating spurious warnings while maintaining detection of real label divergences.\n\n**Implementation Steps:**\n1. Locate backend divergence checks in `close_task()` and `get_task()` operations within the tasks backend implementation\n2. Convert label list comparisons to set comparisons (e.g., `set(a.labels) == set(b.labels)`)\n3. Update any helper functions or comparison logic that currently treat labels as ordered sequences\n4. Add test cases verifying set-based comparison with various label orderings (different permutations of the same labels)\n5. Run tests to confirm false positives are eliminated while real divergences are still detected", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313438Z", "updated_at": "2026-01-29T01:58:07.461695Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.1", "title": "Fix label order comparison in backend divergence checks", "status": "open", "priority": "P2", "type": "task", "description": "The backend divergence detection compares task labels as ordered lists, causing false positives when labels appear in different orders between the beads backend (alphabetically sorted) and in-memory state. Since labels are semantically unordered, comparisons should use set equality instead, eliminating spurious warnings while maintaining detection of real label divergences.\n\n**Implementation Steps:**\n1. Locate backend divergence checks in `close_task()` and `get_task()` operations within the tasks backend implementation\n2. Convert label list comparisons to set comparisons (e.g., `set(a.labels) == set(b.labels)`)\n3. Update any helper functions or comparison logic that currently treat labels as ordered sequences\n4. Add test cases verifying set-based comparison with various label orderings (different permutations of the same labels)\n5. Run tests to confirm false positives are eliminated while real divergences are still detected", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.211916", "updated_at": "2026-01-29T01:58:08.211921", "closed_at": null, "acceptance_criteria": ["Backend divergence checks compare labels as sets, not lists", "False positives from label reordering are eliminated", "Real divergences (actual label additions/removals) are still detected", "No warnings logged when only label order differs", "Tests verify set-based comparison with various label orderings", "All existing tests pass with changes"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:05:58.027345", "operation": "update_task", "task_id": "cub-n6x.1", "primary_result": {"id": "cub-n6x.1", "title": "Fix label order comparison in backend divergence checks", "status": "in_progress", "priority": "P2", "type": "task", "description": "The backend divergence detection compares task labels as ordered lists, causing false positives when labels appear in different orders between the beads backend (alphabetically sorted) and in-memory state. Since labels are semantically unordered, comparisons should use set equality instead, eliminating spurious warnings while maintaining detection of real label divergences.\n\n**Implementation Steps:**\n1. Locate backend divergence checks in `close_task()` and `get_task()` operations within the tasks backend implementation\n2. Convert label list comparisons to set comparisons (e.g., `set(a.labels) == set(b.labels)`)\n3. Update any helper functions or comparison logic that currently treat labels as ordered sequences\n4. Add test cases verifying set-based comparison with various label orderings (different permutations of the same labels)\n5. Run tests to confirm false positives are eliminated while real divergences are still detected", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313438Z", "updated_at": "2026-01-29T02:05:57.973450Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.1", "title": "Fix label order comparison in backend divergence checks", "status": "in_progress", "priority": "P2", "type": "task", "description": "The backend divergence detection compares task labels as ordered lists, causing false positives when labels appear in different orders between the beads backend (alphabetically sorted) and in-memory state. Since labels are semantically unordered, comparisons should use set equality instead, eliminating spurious warnings while maintaining detection of real label divergences.\n\n**Implementation Steps:**\n1. Locate backend divergence checks in `close_task()` and `get_task()` operations within the tasks backend implementation\n2. Convert label list comparisons to set comparisons (e.g., `set(a.labels) == set(b.labels)`)\n3. Update any helper functions or comparison logic that currently treat labels as ordered sequences\n4. Add test cases verifying set-based comparison with various label orderings (different permutations of the same labels)\n5. Run tests to confirm false positives are eliminated while real divergences are still detected", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.211916", "updated_at": "2026-01-29T02:05:58.025103", "closed_at": null, "acceptance_criteria": ["Backend divergence checks compare labels as sets, not lists", "False positives from label reordering are eliminated", "Real divergences (actual label additions/removals) are still detected", "No warnings logged when only label order differs", "Tests verify set-based comparison with various label orderings", "All existing tests pass with changes"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:08:28.296876", "operation": "get_task", "task_id": "cub-n6x.1", "primary_result": {"id": "cub-n6x.1", "title": "Fix label order comparison in backend divergence checks", "status": "closed", "priority": "P2", "type": "task", "description": "The backend divergence detection compares task labels as ordered lists, causing false positives when labels appear in different orders between the beads backend (alphabetically sorted) and in-memory state. Since labels are semantically unordered, comparisons should use set equality instead, eliminating spurious warnings while maintaining detection of real label divergences.\n\n**Implementation Steps:**\n1. Locate backend divergence checks in `close_task()` and `get_task()` operations within the tasks backend implementation\n2. Convert label list comparisons to set comparisons (e.g., `set(a.labels) == set(b.labels)`)\n3. Update any helper functions or comparison logic that currently treat labels as ordered sequences\n4. Add test cases verifying set-based comparison with various label orderings (different permutations of the same labels)\n5. Run tests to confirm false positives are eliminated while real divergences are still detected", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313438Z", "updated_at": "2026-01-29T02:08:16.829583Z", "closed_at": "2026-01-29T02:08:16.829583Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.1", "title": "Fix label order comparison in backend divergence checks", "status": "in_progress", "priority": "P2", "type": "task", "description": "The backend divergence detection compares task labels as ordered lists, causing false positives when labels appear in different orders between the beads backend (alphabetically sorted) and in-memory state. Since labels are semantically unordered, comparisons should use set equality instead, eliminating spurious warnings while maintaining detection of real label divergences.\n\n**Implementation Steps:**\n1. Locate backend divergence checks in `close_task()` and `get_task()` operations within the tasks backend implementation\n2. Convert label list comparisons to set comparisons (e.g., `set(a.labels) == set(b.labels)`)\n3. Update any helper functions or comparison logic that currently treat labels as ordered sequences\n4. Add test cases verifying set-based comparison with various label orderings (different permutations of the same labels)\n5. Run tests to confirm false positives are eliminated while real divergences are still detected", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.211916", "updated_at": "2026-01-29T02:05:58.025103", "closed_at": null, "acceptance_criteria": ["Backend divergence checks compare labels as sets, not lists", "False positives from label reordering are eliminated", "Real divergences (actual label additions/removals) are still detected", "No warnings logged when only label order differs", "Tests verify set-based comparison with various label orderings", "All existing tests pass with changes"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:08:28.352774", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 46, "open": 45, "in_progress": 1, "closed": 0}, "secondary_result": {"total": 41, "open": 40, "in_progress": 1, "closed": 0}, "difference_summary": "total: 46 != 41; open: 45 != 40"}
{"timestamp": "2026-01-29T02:08:28.459108", "operation": "close_task", "task_id": "cub-n6x.1", "primary_result": {"id": "cub-n6x.1", "title": "Fix label order comparison in backend divergence checks", "status": "closed", "priority": "P2", "type": "task", "description": "The backend divergence detection compares task labels as ordered lists, causing false positives when labels appear in different orders between the beads backend (alphabetically sorted) and in-memory state. Since labels are semantically unordered, comparisons should use set equality instead, eliminating spurious warnings while maintaining detection of real label divergences.\n\n**Implementation Steps:**\n1. Locate backend divergence checks in `close_task()` and `get_task()` operations within the tasks backend implementation\n2. Convert label list comparisons to set comparisons (e.g., `set(a.labels) == set(b.labels)`)\n3. Update any helper functions or comparison logic that currently treat labels as ordered sequences\n4. Add test cases verifying set-based comparison with various label orderings (different permutations of the same labels)\n5. Run tests to confirm false positives are eliminated while real divergences are still detected", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313438Z", "updated_at": "2026-01-29T02:08:28.402625Z", "closed_at": "2026-01-29T02:08:28.402625Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.1", "title": "Fix label order comparison in backend divergence checks", "status": "closed", "priority": "P2", "type": "task", "description": "The backend divergence detection compares task labels as ordered lists, causing false positives when labels appear in different orders between the beads backend (alphabetically sorted) and in-memory state. Since labels are semantically unordered, comparisons should use set equality instead, eliminating spurious warnings while maintaining detection of real label divergences.\n\n**Implementation Steps:**\n1. Locate backend divergence checks in `close_task()` and `get_task()` operations within the tasks backend implementation\n2. Convert label list comparisons to set comparisons (e.g., `set(a.labels) == set(b.labels)`)\n3. Update any helper functions or comparison logic that currently treat labels as ordered sequences\n4. Add test cases verifying set-based comparison with various label orderings (different permutations of the same labels)\n5. Run tests to confirm false positives are eliminated while real divergences are still detected", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.211916", "updated_at": "2026-01-29T02:08:28.457008", "closed_at": "2026-01-29T02:08:28.456981", "acceptance_criteria": ["Backend divergence checks compare labels as sets, not lists", "False positives from label reordering are eliminated", "Real divergences (actual label additions/removals) are still detected", "No warnings logged when only label order differs", "Tests verify set-based comparison with various label orderings", "All existing tests pass with changes"], "notes": "[Closed: 2026-01-29T02:08:28.457011] Completed by autonomous execution", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:08:28.526357", "operation": "get_task", "task_id": "cub-n6x.1", "primary_result": {"id": "cub-n6x.1", "title": "Fix label order comparison in backend divergence checks", "status": "closed", "priority": "P2", "type": "task", "description": "The backend divergence detection compares task labels as ordered lists, causing false positives when labels appear in different orders between the beads backend (alphabetically sorted) and in-memory state. Since labels are semantically unordered, comparisons should use set equality instead, eliminating spurious warnings while maintaining detection of real label divergences.\n\n**Implementation Steps:**\n1. Locate backend divergence checks in `close_task()` and `get_task()` operations within the tasks backend implementation\n2. Convert label list comparisons to set comparisons (e.g., `set(a.labels) == set(b.labels)`)\n3. Update any helper functions or comparison logic that currently treat labels as ordered sequences\n4. Add test cases verifying set-based comparison with various label orderings (different permutations of the same labels)\n5. Run tests to confirm false positives are eliminated while real divergences are still detected", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313438Z", "updated_at": "2026-01-29T02:08:28.402625Z", "closed_at": "2026-01-29T02:08:28.402625Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.1", "title": "Fix label order comparison in backend divergence checks", "status": "closed", "priority": "P2", "type": "task", "description": "The backend divergence detection compares task labels as ordered lists, causing false positives when labels appear in different orders between the beads backend (alphabetically sorted) and in-memory state. Since labels are semantically unordered, comparisons should use set equality instead, eliminating spurious warnings while maintaining detection of real label divergences.\n\n**Implementation Steps:**\n1. Locate backend divergence checks in `close_task()` and `get_task()` operations within the tasks backend implementation\n2. Convert label list comparisons to set comparisons (e.g., `set(a.labels) == set(b.labels)`)\n3. Update any helper functions or comparison logic that currently treat labels as ordered sequences\n4. Add test cases verifying set-based comparison with various label orderings (different permutations of the same labels)\n5. Run tests to confirm false positives are eliminated while real divergences are still detected", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.211916", "updated_at": "2026-01-29T02:08:28.457008", "closed_at": "2026-01-29T02:08:28.456981", "acceptance_criteria": ["Backend divergence checks compare labels as sets, not lists", "False positives from label reordering are eliminated", "Real divergences (actual label additions/removals) are still detected", "No warnings logged when only label order differs", "Tests verify set-based comparison with various label orderings", "All existing tests pass with changes"], "notes": "[Closed: 2026-01-29T02:08:28.457011] Completed by autonomous execution", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:08:36.936037", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-n6x.2", "title": "Fix monitor command to work with beads backend", "status": "open", "priority": "P2", "type": "task", "description": "The `cub monitor` command fails with \"No active session found\" error because it was designed for a session-based architecture that has been replaced by beads-based task management. The monitor command needs to be updated to work with the current task backend system, displaying real-time progress on beads tasks instead of looking for legacy session state. This is a critical UX feature for autonomous execution visibility.\n\n**Implementation Steps:**\n1. Investigate current session/task state storage in codebase (check how `cub run` tracks execution, beads backend integration)\n2. Review `cub monitor` implementation to understand what \"active session\" lookup is attempting\n3. Determine appropriate data source for live task progress (beads task status, run loop state, or execution ledger)\n4. Refactor monitor to query beads backend and display real-time task progress\n5. Update help text and error messages to reflect beads-based monitoring\n6. Test monitor command during `cub run` execution to verify real-time updates\n7. Add fallback behavior when no tasks are running (clear message instead of error)", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313492Z", "updated_at": "2026-01-29T01:58:07.464071Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.3", "title": "Add post-command guidance messages to key cub workflows", "status": "open", "priority": "P2", "type": "task", "description": "Users new to cub lack clear direction after running commands, leaving them uncertain about next steps. Contextual guidance messages will improve onboarding and reduce friction by providing actionable next steps with concrete examples. This is a UX improvement focused on making cub more intuitive for new users.\n\n**Implementation Steps:**\n1. Create a guidance module (`cub/core/guidance.py`) with a `GuidanceProvider` class to generate contextual next-step messages based on command type and result\n2. Add guidance output to `cub init` command - display suggested next steps (create capture, run interview, start task) after successful initialization\n3. Add guidance output to `cub capture` command - suggest next steps (review capture, start interview, organize into spec) after capture creation\n4. Add guidance output to `cub spec` command - guide to next phase (detailed requirements, link to epic, schedule planning) after spec creation\n5. Implement `--quiet` flag support across these commands to suppress guidance messages when desired\n6. Format guidance using Rich tables/panels for readability and consistency\n7. Add tests for guidance module and verify all commands respect quiet flag", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313516Z", "updated_at": "2026-01-29T01:58:07.464703Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.4", "title": "Configure git upstream on feature branch creation", "status": "open", "priority": "P2", "type": "task", "description": "When build-plan creates a feature branch, it doesn't set upstream tracking, causing `git push` to fail with \"fatal: The current branch has no upstream branch.\" Users must manually run `git push --set-upstream origin <branch>` before subsequent pushes work. This friction breaks the autonomous workflow where agents should be able to push changes without manual git intervention.\n\n**Implementation Steps:**\n1. Locate the feature branch creation logic in build-plan (likely in `cub.core.launch` or a related module that handles git operations)\n2. After creating the local branch, immediately configure upstream tracking by either:", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313530Z", "updated_at": "2026-01-29T01:58:07.465351Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.5", "title": "Check completed steps before launching architect in plan run", "status": "open", "priority": "P2", "type": "task", "description": "The `cub plan run` command currently assumes architect should launch automatically upon exit, but this breaks workflows where earlier steps are incomplete or partially completed. Users need visibility into which prep pipeline steps (triage, architect, plan, bootstrap) have already been done so they can decide whether to continue, re-run a step, or skip ahead. The system should detect artifacts from previous runs and guide users through the pipeline intelligently rather than blindly advancing.\n\n**Implementation Steps:**\n1. Create a step detection function that checks for completion artifacts (triage markdown files, architect outputs, plan.jsonl, beads state) in the project\n2. Display a summary table showing which prep steps are completed, in-progress, or incomplete when exiting plan run\n3. Prompt the user with options: continue to next incomplete step, re-run a specific step, or exit\n4. Route the selected action back to the appropriate plan subcommand (orient, architect, plan, bootstrap)\n5. Handle edge cases: partial architect completion, missing intermediate steps, corrupted artifacts", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313540Z", "updated_at": "2026-01-29T01:58:07.465964Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.6", "title": "Add build failure detection and retry logic to cub pr", "status": "open", "priority": "P2", "type": "task", "description": "The `cub pr` command currently creates pull requests but has no visibility into CI check status or automated recovery from transient failures. This means flaky tests, rate limits, and temporary service issues require manual intervention, interrupting autonomous workflows. Adding automated failure detection and retry logic would enable self-healing PR workflows that handle common transient failures without manual handoff.\n\n**Implementation Steps:**\n1. Create `cub.core.services.pr_monitor` module to implement check polling and failure detection via `gh pr checks`\n2. Add retry configuration model to `cub.core.config` with timeout duration and max retry count parameters\n3. Extend `LaunchService` to support background PR monitoring while harness is active\n4. Implement check state machine: poll \u2192 detect failure \u2192 wait \u2192 retry \u2192 repeat or succeed\n5. Add `--retry-timeout` and `--no-retry` flags to `cub pr` command in `cub.cli.pr`\n6. Integrate check monitoring into session hooks to log retry history to session forensics\n7. Add check status and retry attempts to `cub.core.ledger` models for session ledger recording\n8. Write integration tests for check detection, retry triggering, and rate limit handling", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313550Z", "updated_at": "2026-01-29T01:58:07.466540Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.7", "title": "Ensure plan.json is created at pipeline start", "status": "open", "priority": "P2", "type": "task", "description": "plan.json is currently written during the orient stage rather than when the plan context is first created. If orient fails before calling ctx.save_plan(), there's no plan.json file to recover from. This reduces fault tolerance and prevents resumption in cases where early stage failures occur. Creating plan.json immediately after context initialization ensures a persistent checkpoint exists from the start.\n\n**Implementation Steps:**\n1. Locate PipelineConfig.run() and identify where PlanContext is created or loaded\n2. Add ctx.save_plan() call immediately after plan context initialization, before any stage runs\n3. Verify orient stage's existing ctx.save_plan() call at line 484 doesn't duplicate writes\n4. Run full test suite to ensure pipeline behavior remains unchanged\n5. Verify plan.json exists at project root before any stage execution begins", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313563Z", "updated_at": "2026-01-29T01:58:07.467200Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.8", "title": "Remove deprecated cub:triage and cub:plan skill commands", "status": "open", "priority": "P2", "type": "task", "description": "The cub:triage and cub:plan skill commands are no longer needed and create maintenance overhead. These commands were part of an earlier planning pipeline that has been superseded by other tooling. Removing them will reduce code complexity, eliminate dead skill registrations, and prevent confusion about available planning commands. This is a straightforward cleanup task with no backward compatibility concerns.\n\n**Implementation Steps:**\n1. Search the codebase for all references to `cub:triage` and `cub:plan` (skill definitions, command registrations, templates)\n2. Remove skill command definitions for `cub:triage` and `cub:plan` from skill/command template files\n3. Remove any `.claude/commands` configuration entries that register these skills\n4. Remove skill routing and registration code that supports these commands\n5. Search for any remaining references (comments, documentation, imports) and clean them up\n6. Verify no broken references remain by grepping for \"cub:triage\" and \"cub:plan\" across the codebase", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313572Z", "updated_at": "2026-01-29T01:58:07.467757Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "open", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313582Z", "updated_at": "2026-01-29T01:58:07.468436Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "open", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313625Z", "updated_at": "2026-01-29T01:58:07.462661Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "open", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313643Z", "updated_at": "2026-01-29T01:58:07.463381Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "secondary_result": [{"id": "cub-n6x.2", "title": "Fix monitor command to work with beads backend", "status": "open", "priority": "P2", "type": "task", "description": "The `cub monitor` command fails with \"No active session found\" error because it was designed for a session-based architecture that has been replaced by beads-based task management. The monitor command needs to be updated to work with the current task backend system, displaying real-time progress on beads tasks instead of looking for legacy session state. This is a critical UX feature for autonomous execution visibility.\n\n**Implementation Steps:**\n1. Investigate current session/task state storage in codebase (check how `cub run` tracks execution, beads backend integration)\n2. Review `cub monitor` implementation to understand what \"active session\" lookup is attempting\n3. Determine appropriate data source for live task progress (beads task status, run loop state, or execution ledger)\n4. Refactor monitor to query beads backend and display real-time task progress\n5. Update help text and error messages to reflect beads-based monitoring\n6. Test monitor command during `cub run` execution to verify real-time updates\n7. Add fallback behavior when no tasks are running (clear message instead of error)", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212055", "updated_at": "2026-01-29T01:58:08.212056", "closed_at": null, "acceptance_criteria": ["`cub monitor` executes without \"No active session found\" error", "Command displays live task progress when `cub run` is executing", "Shows appropriate status message when no tasks are running", "Works with beads backend task management system", "Help text accurately describes monitoring beads tasks", "Works both standalone and during active `cub run` sessions"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.3", "title": "Add post-command guidance messages to key cub workflows", "status": "open", "priority": "P2", "type": "task", "description": "Users new to cub lack clear direction after running commands, leaving them uncertain about next steps. Contextual guidance messages will improve onboarding and reduce friction by providing actionable next steps with concrete examples. This is a UX improvement focused on making cub more intuitive for new users.\n\n**Implementation Steps:**\n1. Create a guidance module (`cub/core/guidance.py`) with a `GuidanceProvider` class to generate contextual next-step messages based on command type and result\n2. Add guidance output to `cub init` command - display suggested next steps (create capture, run interview, start task) after successful initialization\n3. Add guidance output to `cub capture` command - suggest next steps (review capture, start interview, organize into spec) after capture creation\n4. Add guidance output to `cub spec` command - guide to next phase (detailed requirements, link to epic, schedule planning) after spec creation\n5. Implement `--quiet` flag support across these commands to suppress guidance messages when desired\n6. Format guidance using Rich tables/panels for readability and consistency\n7. Add tests for guidance module and verify all commands respect quiet flag", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212115", "updated_at": "2026-01-29T01:58:08.212115", "closed_at": null, "acceptance_criteria": ["`cub init` displays 3-5 actionable next steps with copyable command examples after initialization", "`cub capture` displays 3-5 actionable next steps after successful capture creation", "`cub spec` displays 3-5 actionable next steps after successful spec creation", "All guidance messages respect `--quiet` flag and suppress output when enabled", "Guidance uses Rich formatting (tables or panels) for consistent, readable output", "Command examples in guidance are accurate and directly copyable", "All existing command behavior remains unchanged (guidance is additive only)", "Unit tests cover guidance message generation for each command type"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.4", "title": "Configure git upstream on feature branch creation", "status": "open", "priority": "P2", "type": "task", "description": "When build-plan creates a feature branch, it doesn't set upstream tracking, causing `git push` to fail with \"fatal: The current branch has no upstream branch.\" Users must manually run `git push --set-upstream origin <branch>` before subsequent pushes work. This friction breaks the autonomous workflow where agents should be able to push changes without manual git intervention.\n\n**Implementation Steps:**\n1. Locate the feature branch creation logic in build-plan (likely in `cub.core.launch` or a related module that handles git operations)\n2. After creating the local branch, immediately configure upstream tracking by either:", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212201", "updated_at": "2026-01-29T01:58:08.212202", "closed_at": null, "acceptance_criteria": ["Feature branches created by build-plan have upstream tracking configured", "`git push` works on new branches without `--set-upstream` flag", "Works for both new local branches and existing branches being pushed for first time", "Tests confirm upstream tracking is set and push operations succeed", "Documentation updated in CLAUDE.md"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.5", "title": "Check completed steps before launching architect in plan run", "status": "open", "priority": "P2", "type": "task", "description": "The `cub plan run` command currently assumes architect should launch automatically upon exit, but this breaks workflows where earlier steps are incomplete or partially completed. Users need visibility into which prep pipeline steps (triage, architect, plan, bootstrap) have already been done so they can decide whether to continue, re-run a step, or skip ahead. The system should detect artifacts from previous runs and guide users through the pipeline intelligently rather than blindly advancing.\n\n**Implementation Steps:**\n1. Create a step detection function that checks for completion artifacts (triage markdown files, architect outputs, plan.jsonl, beads state) in the project\n2. Display a summary table showing which prep steps are completed, in-progress, or incomplete when exiting plan run\n3. Prompt the user with options: continue to next incomplete step, re-run a specific step, or exit\n4. Route the selected action back to the appropriate plan subcommand (orient, architect, plan, bootstrap)\n5. Handle edge cases: partial architect completion, missing intermediate steps, corrupted artifacts", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212245", "updated_at": "2026-01-29T01:58:08.212246", "closed_at": null, "acceptance_criteria": ["Detects completion status of all four prep steps via artifact inspection", "Displays step summary before prompting for next action", "Offers user choice to continue, re-run, or exit (not forced into architect)", "Does not launch architect if earlier steps are incomplete", "Gracefully handles partial completion and corrupted artifacts"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.6", "title": "Add build failure detection and retry logic to cub pr", "status": "open", "priority": "P2", "type": "task", "description": "The `cub pr` command currently creates pull requests but has no visibility into CI check status or automated recovery from transient failures. This means flaky tests, rate limits, and temporary service issues require manual intervention, interrupting autonomous workflows. Adding automated failure detection and retry logic would enable self-healing PR workflows that handle common transient failures without manual handoff.\n\n**Implementation Steps:**\n1. Create `cub.core.services.pr_monitor` module to implement check polling and failure detection via `gh pr checks`\n2. Add retry configuration model to `cub.core.config` with timeout duration and max retry count parameters\n3. Extend `LaunchService` to support background PR monitoring while harness is active\n4. Implement check state machine: poll \u2192 detect failure \u2192 wait \u2192 retry \u2192 repeat or succeed\n5. Add `--retry-timeout` and `--no-retry` flags to `cub pr` command in `cub.cli.pr`\n6. Integrate check monitoring into session hooks to log retry history to session forensics\n7. Add check status and retry attempts to `cub.core.ledger` models for session ledger recording\n8. Write integration tests for check detection, retry triggering, and rate limit handling", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212294", "updated_at": "2026-01-29T01:58:08.212295", "closed_at": null, "acceptance_criteria": ["`cub pr` detects PR check failures via `gh pr checks` polling", "Automatic retry timer (default 10 minutes, configurable) activates when failures detected", "`--retry-timeout` flag accepts duration strings (e.g., `5m`, `30s`)", "`--no-retry` flag disables automatic retry behavior for all check types", "Failed checks are re-triggered via `gh pr checks --rerun` or equivalent", "Session forensics (`.cub/ledger/forensics/{session_id}.jsonl`) logs all check statuses and retry attempts with timestamps", "Max retries (default 3) prevents infinite loop; stops retrying after limit reached", "Handles `gh` API rate limiting and network errors gracefully with exponential backoff", "Works with both draft PRs (`--draft`) and regular PRs"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.7", "title": "Ensure plan.json is created at pipeline start", "status": "open", "priority": "P2", "type": "task", "description": "plan.json is currently written during the orient stage rather than when the plan context is first created. If orient fails before calling ctx.save_plan(), there's no plan.json file to recover from. This reduces fault tolerance and prevents resumption in cases where early stage failures occur. Creating plan.json immediately after context initialization ensures a persistent checkpoint exists from the start.\n\n**Implementation Steps:**\n1. Locate PipelineConfig.run() and identify where PlanContext is created or loaded\n2. Add ctx.save_plan() call immediately after plan context initialization, before any stage runs\n3. Verify orient stage's existing ctx.save_plan() call at line 484 doesn't duplicate writes\n4. Run full test suite to ensure pipeline behavior remains unchanged\n5. Verify plan.json exists at project root before any stage execution begins", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212336", "updated_at": "2026-01-29T01:58:08.212336", "closed_at": null, "acceptance_criteria": ["plan.json is created immediately after plan context initialization", "plan.json exists before orient stage executes", "All existing tests pass with no behavioral changes", "Plan data is recoverable/resumable even if orient fails early"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.8", "title": "Remove deprecated cub:triage and cub:plan skill commands", "status": "open", "priority": "P2", "type": "task", "description": "The cub:triage and cub:plan skill commands are no longer needed and create maintenance overhead. These commands were part of an earlier planning pipeline that has been superseded by other tooling. Removing them will reduce code complexity, eliminate dead skill registrations, and prevent confusion about available planning commands. This is a straightforward cleanup task with no backward compatibility concerns.\n\n**Implementation Steps:**\n1. Search the codebase for all references to `cub:triage` and `cub:plan` (skill definitions, command registrations, templates)\n2. Remove skill command definitions for `cub:triage` and `cub:plan` from skill/command template files\n3. Remove any `.claude/commands` configuration entries that register these skills\n4. Remove skill routing and registration code that supports these commands\n5. Search for any remaining references (comments, documentation, imports) and clean them up\n6. Verify no broken references remain by grepping for \"cub:triage\" and \"cub:plan\" across the codebase", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212370", "updated_at": "2026-01-29T01:58:08.212371", "closed_at": null, "acceptance_criteria": ["`cub:triage` no longer appears in any templates, configuration files, or code", "`cub:plan` no longer appears in any templates, configuration files, or code", "All skill registration/routing code that handled these commands is removed", "Remaining skills and commands continue to function correctly (verify with `cub --help`)", "No broken imports or dangling references to removed skill definitions", "Git status shows only the intended removals (no accidental changes)"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "open", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212407", "updated_at": "2026-01-29T01:58:08.212407", "closed_at": null, "acceptance_criteria": ["Headline box displays harness backend name when available", "Headline box displays model name when available", "Other explicit configuration specs are included if applicable", "Layout remains readable without excessive line wrapping", "Unconfigured specs are omitted gracefully (no \"None\", \"N/A\", or blank values shown)", "Changes work in both `cub run` and direct session contexts", "Existing tests pass and new tests cover headline rendering scenarios"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "open", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212440", "updated_at": "2026-01-29T01:58:08.212440", "closed_at": null, "acceptance_criteria": ["Each streamed message is followed by exactly one newline character", "Output is readable with clear visual separation between consecutive messages", "Non-stream output (`cub run` without `--stream`) is unaffected", "Works correctly with all harness backends (claude, codex, gemini, opencode)", "No duplicate blank lines or extra whitespace introduced", "Existing tests still pass and new behavior is tested"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "open", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212476", "updated_at": "2026-01-29T01:58:08.212477", "closed_at": null, "acceptance_criteria": ["Progress indicator displays \"[current/total]\" format for each item", "Item title or brief summary appears alongside progress update", "Updates appear incrementally as each item completes processing", "No measurable latency increase compared to current implementation", "Output uses Rich console consistent with other cub commands", "Works correctly with punchlist files of varying sizes (3-50+ items)"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "difference_summary": "Task 0 (cub-n6x.10): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 1 (cub-n6x.11): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 2 (cub-n6x.2): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 3 (cub-n6x.3): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 4 (cub-n6x.4): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 5 (cub-n6x.5): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 6 (cub-n6x.6): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 7 (cub-n6x.7): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 8 (cub-n6x.8): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 9 (cub-n6x.9): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x"}
{"timestamp": "2026-01-29T02:08:36.984694", "operation": "get_task", "task_id": "cub-n6x.2", "primary_result": {"id": "cub-n6x.2", "title": "Fix monitor command to work with beads backend", "status": "open", "priority": "P2", "type": "task", "description": "The `cub monitor` command fails with \"No active session found\" error because it was designed for a session-based architecture that has been replaced by beads-based task management. The monitor command needs to be updated to work with the current task backend system, displaying real-time progress on beads tasks instead of looking for legacy session state. This is a critical UX feature for autonomous execution visibility.\n\n**Implementation Steps:**\n1. Investigate current session/task state storage in codebase (check how `cub run` tracks execution, beads backend integration)\n2. Review `cub monitor` implementation to understand what \"active session\" lookup is attempting\n3. Determine appropriate data source for live task progress (beads task status, run loop state, or execution ledger)\n4. Refactor monitor to query beads backend and display real-time task progress\n5. Update help text and error messages to reflect beads-based monitoring\n6. Test monitor command during `cub run` execution to verify real-time updates\n7. Add fallback behavior when no tasks are running (clear message instead of error)", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313492Z", "updated_at": "2026-01-29T01:58:07.464071Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.2", "title": "Fix monitor command to work with beads backend", "status": "open", "priority": "P2", "type": "task", "description": "The `cub monitor` command fails with \"No active session found\" error because it was designed for a session-based architecture that has been replaced by beads-based task management. The monitor command needs to be updated to work with the current task backend system, displaying real-time progress on beads tasks instead of looking for legacy session state. This is a critical UX feature for autonomous execution visibility.\n\n**Implementation Steps:**\n1. Investigate current session/task state storage in codebase (check how `cub run` tracks execution, beads backend integration)\n2. Review `cub monitor` implementation to understand what \"active session\" lookup is attempting\n3. Determine appropriate data source for live task progress (beads task status, run loop state, or execution ledger)\n4. Refactor monitor to query beads backend and display real-time task progress\n5. Update help text and error messages to reflect beads-based monitoring\n6. Test monitor command during `cub run` execution to verify real-time updates\n7. Add fallback behavior when no tasks are running (clear message instead of error)", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212055", "updated_at": "2026-01-29T01:58:08.212056", "closed_at": null, "acceptance_criteria": ["`cub monitor` executes without \"No active session found\" error", "Command displays live task progress when `cub run` is executing", "Shows appropriate status message when no tasks are running", "Works with beads backend task management system", "Help text accurately describes monitoring beads tasks", "Works both standalone and during active `cub run` sessions"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:08:37.100302", "operation": "update_task", "task_id": "cub-n6x.2", "primary_result": {"id": "cub-n6x.2", "title": "Fix monitor command to work with beads backend", "status": "in_progress", "priority": "P2", "type": "task", "description": "The `cub monitor` command fails with \"No active session found\" error because it was designed for a session-based architecture that has been replaced by beads-based task management. The monitor command needs to be updated to work with the current task backend system, displaying real-time progress on beads tasks instead of looking for legacy session state. This is a critical UX feature for autonomous execution visibility.\n\n**Implementation Steps:**\n1. Investigate current session/task state storage in codebase (check how `cub run` tracks execution, beads backend integration)\n2. Review `cub monitor` implementation to understand what \"active session\" lookup is attempting\n3. Determine appropriate data source for live task progress (beads task status, run loop state, or execution ledger)\n4. Refactor monitor to query beads backend and display real-time task progress\n5. Update help text and error messages to reflect beads-based monitoring\n6. Test monitor command during `cub run` execution to verify real-time updates\n7. Add fallback behavior when no tasks are running (clear message instead of error)", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313492Z", "updated_at": "2026-01-29T02:08:37.031385Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.2", "title": "Fix monitor command to work with beads backend", "status": "in_progress", "priority": "P2", "type": "task", "description": "The `cub monitor` command fails with \"No active session found\" error because it was designed for a session-based architecture that has been replaced by beads-based task management. The monitor command needs to be updated to work with the current task backend system, displaying real-time progress on beads tasks instead of looking for legacy session state. This is a critical UX feature for autonomous execution visibility.\n\n**Implementation Steps:**\n1. Investigate current session/task state storage in codebase (check how `cub run` tracks execution, beads backend integration)\n2. Review `cub monitor` implementation to understand what \"active session\" lookup is attempting\n3. Determine appropriate data source for live task progress (beads task status, run loop state, or execution ledger)\n4. Refactor monitor to query beads backend and display real-time task progress\n5. Update help text and error messages to reflect beads-based monitoring\n6. Test monitor command during `cub run` execution to verify real-time updates\n7. Add fallback behavior when no tasks are running (clear message instead of error)", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212055", "updated_at": "2026-01-29T02:08:37.097773", "closed_at": null, "acceptance_criteria": ["`cub monitor` executes without \"No active session found\" error", "Command displays live task progress when `cub run` is executing", "Shows appropriate status message when no tasks are running", "Works with beads backend task management system", "Help text accurately describes monitoring beads tasks", "Works both standalone and during active `cub run` sessions"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:15:26.586199", "operation": "get_task", "task_id": "cub-n6x.2", "primary_result": {"id": "cub-n6x.2", "title": "Fix monitor command to work with beads backend", "status": "closed", "priority": "P2", "type": "task", "description": "The `cub monitor` command fails with \"No active session found\" error because it was designed for a session-based architecture that has been replaced by beads-based task management. The monitor command needs to be updated to work with the current task backend system, displaying real-time progress on beads tasks instead of looking for legacy session state. This is a critical UX feature for autonomous execution visibility.\n\n**Implementation Steps:**\n1. Investigate current session/task state storage in codebase (check how `cub run` tracks execution, beads backend integration)\n2. Review `cub monitor` implementation to understand what \"active session\" lookup is attempting\n3. Determine appropriate data source for live task progress (beads task status, run loop state, or execution ledger)\n4. Refactor monitor to query beads backend and display real-time task progress\n5. Update help text and error messages to reflect beads-based monitoring\n6. Test monitor command during `cub run` execution to verify real-time updates\n7. Add fallback behavior when no tasks are running (clear message instead of error)", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313492Z", "updated_at": "2026-01-29T02:15:01.084854Z", "closed_at": "2026-01-29T02:15:01.084854Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.2", "title": "Fix monitor command to work with beads backend", "status": "in_progress", "priority": "P2", "type": "task", "description": "The `cub monitor` command fails with \"No active session found\" error because it was designed for a session-based architecture that has been replaced by beads-based task management. The monitor command needs to be updated to work with the current task backend system, displaying real-time progress on beads tasks instead of looking for legacy session state. This is a critical UX feature for autonomous execution visibility.\n\n**Implementation Steps:**\n1. Investigate current session/task state storage in codebase (check how `cub run` tracks execution, beads backend integration)\n2. Review `cub monitor` implementation to understand what \"active session\" lookup is attempting\n3. Determine appropriate data source for live task progress (beads task status, run loop state, or execution ledger)\n4. Refactor monitor to query beads backend and display real-time task progress\n5. Update help text and error messages to reflect beads-based monitoring\n6. Test monitor command during `cub run` execution to verify real-time updates\n7. Add fallback behavior when no tasks are running (clear message instead of error)", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212055", "updated_at": "2026-01-29T02:08:37.097773", "closed_at": null, "acceptance_criteria": ["`cub monitor` executes without \"No active session found\" error", "Command displays live task progress when `cub run` is executing", "Shows appropriate status message when no tasks are running", "Works with beads backend task management system", "Help text accurately describes monitoring beads tasks", "Works both standalone and during active `cub run` sessions"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:15:26.636345", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 45, "open": 44, "in_progress": 1, "closed": 0}, "secondary_result": {"total": 41, "open": 39, "in_progress": 1, "closed": 1}, "difference_summary": "total: 45 != 41; open: 44 != 39; closed: 0 != 1"}
{"timestamp": "2026-01-29T02:15:26.738909", "operation": "close_task", "task_id": "cub-n6x.2", "primary_result": {"id": "cub-n6x.2", "title": "Fix monitor command to work with beads backend", "status": "closed", "priority": "P2", "type": "task", "description": "The `cub monitor` command fails with \"No active session found\" error because it was designed for a session-based architecture that has been replaced by beads-based task management. The monitor command needs to be updated to work with the current task backend system, displaying real-time progress on beads tasks instead of looking for legacy session state. This is a critical UX feature for autonomous execution visibility.\n\n**Implementation Steps:**\n1. Investigate current session/task state storage in codebase (check how `cub run` tracks execution, beads backend integration)\n2. Review `cub monitor` implementation to understand what \"active session\" lookup is attempting\n3. Determine appropriate data source for live task progress (beads task status, run loop state, or execution ledger)\n4. Refactor monitor to query beads backend and display real-time task progress\n5. Update help text and error messages to reflect beads-based monitoring\n6. Test monitor command during `cub run` execution to verify real-time updates\n7. Add fallback behavior when no tasks are running (clear message instead of error)", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313492Z", "updated_at": "2026-01-29T02:15:26.679321Z", "closed_at": "2026-01-29T02:15:26.679321Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.2", "title": "Fix monitor command to work with beads backend", "status": "closed", "priority": "P2", "type": "task", "description": "The `cub monitor` command fails with \"No active session found\" error because it was designed for a session-based architecture that has been replaced by beads-based task management. The monitor command needs to be updated to work with the current task backend system, displaying real-time progress on beads tasks instead of looking for legacy session state. This is a critical UX feature for autonomous execution visibility.\n\n**Implementation Steps:**\n1. Investigate current session/task state storage in codebase (check how `cub run` tracks execution, beads backend integration)\n2. Review `cub monitor` implementation to understand what \"active session\" lookup is attempting\n3. Determine appropriate data source for live task progress (beads task status, run loop state, or execution ledger)\n4. Refactor monitor to query beads backend and display real-time task progress\n5. Update help text and error messages to reflect beads-based monitoring\n6. Test monitor command during `cub run` execution to verify real-time updates\n7. Add fallback behavior when no tasks are running (clear message instead of error)", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212055", "updated_at": "2026-01-29T02:15:26.736391", "closed_at": "2026-01-29T02:15:26.736386", "acceptance_criteria": ["`cub monitor` executes without \"No active session found\" error", "Command displays live task progress when `cub run` is executing", "Shows appropriate status message when no tasks are running", "Works with beads backend task management system", "Help text accurately describes monitoring beads tasks", "Works both standalone and during active `cub run` sessions"], "notes": "[Closed: 2026-01-29T02:15:26.736394] Completed by autonomous execution", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:15:26.807287", "operation": "get_task", "task_id": "cub-n6x.2", "primary_result": {"id": "cub-n6x.2", "title": "Fix monitor command to work with beads backend", "status": "closed", "priority": "P2", "type": "task", "description": "The `cub monitor` command fails with \"No active session found\" error because it was designed for a session-based architecture that has been replaced by beads-based task management. The monitor command needs to be updated to work with the current task backend system, displaying real-time progress on beads tasks instead of looking for legacy session state. This is a critical UX feature for autonomous execution visibility.\n\n**Implementation Steps:**\n1. Investigate current session/task state storage in codebase (check how `cub run` tracks execution, beads backend integration)\n2. Review `cub monitor` implementation to understand what \"active session\" lookup is attempting\n3. Determine appropriate data source for live task progress (beads task status, run loop state, or execution ledger)\n4. Refactor monitor to query beads backend and display real-time task progress\n5. Update help text and error messages to reflect beads-based monitoring\n6. Test monitor command during `cub run` execution to verify real-time updates\n7. Add fallback behavior when no tasks are running (clear message instead of error)", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313492Z", "updated_at": "2026-01-29T02:15:26.679321Z", "closed_at": "2026-01-29T02:15:26.679321Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.2", "title": "Fix monitor command to work with beads backend", "status": "closed", "priority": "P2", "type": "task", "description": "The `cub monitor` command fails with \"No active session found\" error because it was designed for a session-based architecture that has been replaced by beads-based task management. The monitor command needs to be updated to work with the current task backend system, displaying real-time progress on beads tasks instead of looking for legacy session state. This is a critical UX feature for autonomous execution visibility.\n\n**Implementation Steps:**\n1. Investigate current session/task state storage in codebase (check how `cub run` tracks execution, beads backend integration)\n2. Review `cub monitor` implementation to understand what \"active session\" lookup is attempting\n3. Determine appropriate data source for live task progress (beads task status, run loop state, or execution ledger)\n4. Refactor monitor to query beads backend and display real-time task progress\n5. Update help text and error messages to reflect beads-based monitoring\n6. Test monitor command during `cub run` execution to verify real-time updates\n7. Add fallback behavior when no tasks are running (clear message instead of error)", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212055", "updated_at": "2026-01-29T02:15:26.736391", "closed_at": "2026-01-29T02:15:26.736386", "acceptance_criteria": ["`cub monitor` executes without \"No active session found\" error", "Command displays live task progress when `cub run` is executing", "Shows appropriate status message when no tasks are running", "Works with beads backend task management system", "Help text accurately describes monitoring beads tasks", "Works both standalone and during active `cub run` sessions"], "notes": "[Closed: 2026-01-29T02:15:26.736394] Completed by autonomous execution", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:15:35.561310", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-n6x.3", "title": "Add post-command guidance messages to key cub workflows", "status": "open", "priority": "P2", "type": "task", "description": "Users new to cub lack clear direction after running commands, leaving them uncertain about next steps. Contextual guidance messages will improve onboarding and reduce friction by providing actionable next steps with concrete examples. This is a UX improvement focused on making cub more intuitive for new users.\n\n**Implementation Steps:**\n1. Create a guidance module (`cub/core/guidance.py`) with a `GuidanceProvider` class to generate contextual next-step messages based on command type and result\n2. Add guidance output to `cub init` command - display suggested next steps (create capture, run interview, start task) after successful initialization\n3. Add guidance output to `cub capture` command - suggest next steps (review capture, start interview, organize into spec) after capture creation\n4. Add guidance output to `cub spec` command - guide to next phase (detailed requirements, link to epic, schedule planning) after spec creation\n5. Implement `--quiet` flag support across these commands to suppress guidance messages when desired\n6. Format guidance using Rich tables/panels for readability and consistency\n7. Add tests for guidance module and verify all commands respect quiet flag", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313516Z", "updated_at": "2026-01-29T01:58:07.464703Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.4", "title": "Configure git upstream on feature branch creation", "status": "open", "priority": "P2", "type": "task", "description": "When build-plan creates a feature branch, it doesn't set upstream tracking, causing `git push` to fail with \"fatal: The current branch has no upstream branch.\" Users must manually run `git push --set-upstream origin <branch>` before subsequent pushes work. This friction breaks the autonomous workflow where agents should be able to push changes without manual git intervention.\n\n**Implementation Steps:**\n1. Locate the feature branch creation logic in build-plan (likely in `cub.core.launch` or a related module that handles git operations)\n2. After creating the local branch, immediately configure upstream tracking by either:", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313530Z", "updated_at": "2026-01-29T01:58:07.465351Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.5", "title": "Check completed steps before launching architect in plan run", "status": "open", "priority": "P2", "type": "task", "description": "The `cub plan run` command currently assumes architect should launch automatically upon exit, but this breaks workflows where earlier steps are incomplete or partially completed. Users need visibility into which prep pipeline steps (triage, architect, plan, bootstrap) have already been done so they can decide whether to continue, re-run a step, or skip ahead. The system should detect artifacts from previous runs and guide users through the pipeline intelligently rather than blindly advancing.\n\n**Implementation Steps:**\n1. Create a step detection function that checks for completion artifacts (triage markdown files, architect outputs, plan.jsonl, beads state) in the project\n2. Display a summary table showing which prep steps are completed, in-progress, or incomplete when exiting plan run\n3. Prompt the user with options: continue to next incomplete step, re-run a specific step, or exit\n4. Route the selected action back to the appropriate plan subcommand (orient, architect, plan, bootstrap)\n5. Handle edge cases: partial architect completion, missing intermediate steps, corrupted artifacts", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313540Z", "updated_at": "2026-01-29T01:58:07.465964Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.6", "title": "Add build failure detection and retry logic to cub pr", "status": "open", "priority": "P2", "type": "task", "description": "The `cub pr` command currently creates pull requests but has no visibility into CI check status or automated recovery from transient failures. This means flaky tests, rate limits, and temporary service issues require manual intervention, interrupting autonomous workflows. Adding automated failure detection and retry logic would enable self-healing PR workflows that handle common transient failures without manual handoff.\n\n**Implementation Steps:**\n1. Create `cub.core.services.pr_monitor` module to implement check polling and failure detection via `gh pr checks`\n2. Add retry configuration model to `cub.core.config` with timeout duration and max retry count parameters\n3. Extend `LaunchService` to support background PR monitoring while harness is active\n4. Implement check state machine: poll \u2192 detect failure \u2192 wait \u2192 retry \u2192 repeat or succeed\n5. Add `--retry-timeout` and `--no-retry` flags to `cub pr` command in `cub.cli.pr`\n6. Integrate check monitoring into session hooks to log retry history to session forensics\n7. Add check status and retry attempts to `cub.core.ledger` models for session ledger recording\n8. Write integration tests for check detection, retry triggering, and rate limit handling", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313550Z", "updated_at": "2026-01-29T01:58:07.466540Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.7", "title": "Ensure plan.json is created at pipeline start", "status": "open", "priority": "P2", "type": "task", "description": "plan.json is currently written during the orient stage rather than when the plan context is first created. If orient fails before calling ctx.save_plan(), there's no plan.json file to recover from. This reduces fault tolerance and prevents resumption in cases where early stage failures occur. Creating plan.json immediately after context initialization ensures a persistent checkpoint exists from the start.\n\n**Implementation Steps:**\n1. Locate PipelineConfig.run() and identify where PlanContext is created or loaded\n2. Add ctx.save_plan() call immediately after plan context initialization, before any stage runs\n3. Verify orient stage's existing ctx.save_plan() call at line 484 doesn't duplicate writes\n4. Run full test suite to ensure pipeline behavior remains unchanged\n5. Verify plan.json exists at project root before any stage execution begins", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313563Z", "updated_at": "2026-01-29T01:58:07.467200Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.8", "title": "Remove deprecated cub:triage and cub:plan skill commands", "status": "open", "priority": "P2", "type": "task", "description": "The cub:triage and cub:plan skill commands are no longer needed and create maintenance overhead. These commands were part of an earlier planning pipeline that has been superseded by other tooling. Removing them will reduce code complexity, eliminate dead skill registrations, and prevent confusion about available planning commands. This is a straightforward cleanup task with no backward compatibility concerns.\n\n**Implementation Steps:**\n1. Search the codebase for all references to `cub:triage` and `cub:plan` (skill definitions, command registrations, templates)\n2. Remove skill command definitions for `cub:triage` and `cub:plan` from skill/command template files\n3. Remove any `.claude/commands` configuration entries that register these skills\n4. Remove skill routing and registration code that supports these commands\n5. Search for any remaining references (comments, documentation, imports) and clean them up\n6. Verify no broken references remain by grepping for \"cub:triage\" and \"cub:plan\" across the codebase", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313572Z", "updated_at": "2026-01-29T01:58:07.467757Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "open", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313582Z", "updated_at": "2026-01-29T01:58:07.468436Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "open", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313625Z", "updated_at": "2026-01-29T01:58:07.462661Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "open", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313643Z", "updated_at": "2026-01-29T01:58:07.463381Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "secondary_result": [{"id": "cub-n6x.3", "title": "Add post-command guidance messages to key cub workflows", "status": "open", "priority": "P2", "type": "task", "description": "Users new to cub lack clear direction after running commands, leaving them uncertain about next steps. Contextual guidance messages will improve onboarding and reduce friction by providing actionable next steps with concrete examples. This is a UX improvement focused on making cub more intuitive for new users.\n\n**Implementation Steps:**\n1. Create a guidance module (`cub/core/guidance.py`) with a `GuidanceProvider` class to generate contextual next-step messages based on command type and result\n2. Add guidance output to `cub init` command - display suggested next steps (create capture, run interview, start task) after successful initialization\n3. Add guidance output to `cub capture` command - suggest next steps (review capture, start interview, organize into spec) after capture creation\n4. Add guidance output to `cub spec` command - guide to next phase (detailed requirements, link to epic, schedule planning) after spec creation\n5. Implement `--quiet` flag support across these commands to suppress guidance messages when desired\n6. Format guidance using Rich tables/panels for readability and consistency\n7. Add tests for guidance module and verify all commands respect quiet flag", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212115", "updated_at": "2026-01-29T01:58:08.212115", "closed_at": null, "acceptance_criteria": ["`cub init` displays 3-5 actionable next steps with copyable command examples after initialization", "`cub capture` displays 3-5 actionable next steps after successful capture creation", "`cub spec` displays 3-5 actionable next steps after successful spec creation", "All guidance messages respect `--quiet` flag and suppress output when enabled", "Guidance uses Rich formatting (tables or panels) for consistent, readable output", "Command examples in guidance are accurate and directly copyable", "All existing command behavior remains unchanged (guidance is additive only)", "Unit tests cover guidance message generation for each command type"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.4", "title": "Configure git upstream on feature branch creation", "status": "open", "priority": "P2", "type": "task", "description": "When build-plan creates a feature branch, it doesn't set upstream tracking, causing `git push` to fail with \"fatal: The current branch has no upstream branch.\" Users must manually run `git push --set-upstream origin <branch>` before subsequent pushes work. This friction breaks the autonomous workflow where agents should be able to push changes without manual git intervention.\n\n**Implementation Steps:**\n1. Locate the feature branch creation logic in build-plan (likely in `cub.core.launch` or a related module that handles git operations)\n2. After creating the local branch, immediately configure upstream tracking by either:", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212201", "updated_at": "2026-01-29T01:58:08.212202", "closed_at": null, "acceptance_criteria": ["Feature branches created by build-plan have upstream tracking configured", "`git push` works on new branches without `--set-upstream` flag", "Works for both new local branches and existing branches being pushed for first time", "Tests confirm upstream tracking is set and push operations succeed", "Documentation updated in CLAUDE.md"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.5", "title": "Check completed steps before launching architect in plan run", "status": "open", "priority": "P2", "type": "task", "description": "The `cub plan run` command currently assumes architect should launch automatically upon exit, but this breaks workflows where earlier steps are incomplete or partially completed. Users need visibility into which prep pipeline steps (triage, architect, plan, bootstrap) have already been done so they can decide whether to continue, re-run a step, or skip ahead. The system should detect artifacts from previous runs and guide users through the pipeline intelligently rather than blindly advancing.\n\n**Implementation Steps:**\n1. Create a step detection function that checks for completion artifacts (triage markdown files, architect outputs, plan.jsonl, beads state) in the project\n2. Display a summary table showing which prep steps are completed, in-progress, or incomplete when exiting plan run\n3. Prompt the user with options: continue to next incomplete step, re-run a specific step, or exit\n4. Route the selected action back to the appropriate plan subcommand (orient, architect, plan, bootstrap)\n5. Handle edge cases: partial architect completion, missing intermediate steps, corrupted artifacts", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212245", "updated_at": "2026-01-29T01:58:08.212246", "closed_at": null, "acceptance_criteria": ["Detects completion status of all four prep steps via artifact inspection", "Displays step summary before prompting for next action", "Offers user choice to continue, re-run, or exit (not forced into architect)", "Does not launch architect if earlier steps are incomplete", "Gracefully handles partial completion and corrupted artifacts"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.6", "title": "Add build failure detection and retry logic to cub pr", "status": "open", "priority": "P2", "type": "task", "description": "The `cub pr` command currently creates pull requests but has no visibility into CI check status or automated recovery from transient failures. This means flaky tests, rate limits, and temporary service issues require manual intervention, interrupting autonomous workflows. Adding automated failure detection and retry logic would enable self-healing PR workflows that handle common transient failures without manual handoff.\n\n**Implementation Steps:**\n1. Create `cub.core.services.pr_monitor` module to implement check polling and failure detection via `gh pr checks`\n2. Add retry configuration model to `cub.core.config` with timeout duration and max retry count parameters\n3. Extend `LaunchService` to support background PR monitoring while harness is active\n4. Implement check state machine: poll \u2192 detect failure \u2192 wait \u2192 retry \u2192 repeat or succeed\n5. Add `--retry-timeout` and `--no-retry` flags to `cub pr` command in `cub.cli.pr`\n6. Integrate check monitoring into session hooks to log retry history to session forensics\n7. Add check status and retry attempts to `cub.core.ledger` models for session ledger recording\n8. Write integration tests for check detection, retry triggering, and rate limit handling", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212294", "updated_at": "2026-01-29T01:58:08.212295", "closed_at": null, "acceptance_criteria": ["`cub pr` detects PR check failures via `gh pr checks` polling", "Automatic retry timer (default 10 minutes, configurable) activates when failures detected", "`--retry-timeout` flag accepts duration strings (e.g., `5m`, `30s`)", "`--no-retry` flag disables automatic retry behavior for all check types", "Failed checks are re-triggered via `gh pr checks --rerun` or equivalent", "Session forensics (`.cub/ledger/forensics/{session_id}.jsonl`) logs all check statuses and retry attempts with timestamps", "Max retries (default 3) prevents infinite loop; stops retrying after limit reached", "Handles `gh` API rate limiting and network errors gracefully with exponential backoff", "Works with both draft PRs (`--draft`) and regular PRs"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.7", "title": "Ensure plan.json is created at pipeline start", "status": "open", "priority": "P2", "type": "task", "description": "plan.json is currently written during the orient stage rather than when the plan context is first created. If orient fails before calling ctx.save_plan(), there's no plan.json file to recover from. This reduces fault tolerance and prevents resumption in cases where early stage failures occur. Creating plan.json immediately after context initialization ensures a persistent checkpoint exists from the start.\n\n**Implementation Steps:**\n1. Locate PipelineConfig.run() and identify where PlanContext is created or loaded\n2. Add ctx.save_plan() call immediately after plan context initialization, before any stage runs\n3. Verify orient stage's existing ctx.save_plan() call at line 484 doesn't duplicate writes\n4. Run full test suite to ensure pipeline behavior remains unchanged\n5. Verify plan.json exists at project root before any stage execution begins", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212336", "updated_at": "2026-01-29T01:58:08.212336", "closed_at": null, "acceptance_criteria": ["plan.json is created immediately after plan context initialization", "plan.json exists before orient stage executes", "All existing tests pass with no behavioral changes", "Plan data is recoverable/resumable even if orient fails early"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.8", "title": "Remove deprecated cub:triage and cub:plan skill commands", "status": "open", "priority": "P2", "type": "task", "description": "The cub:triage and cub:plan skill commands are no longer needed and create maintenance overhead. These commands were part of an earlier planning pipeline that has been superseded by other tooling. Removing them will reduce code complexity, eliminate dead skill registrations, and prevent confusion about available planning commands. This is a straightforward cleanup task with no backward compatibility concerns.\n\n**Implementation Steps:**\n1. Search the codebase for all references to `cub:triage` and `cub:plan` (skill definitions, command registrations, templates)\n2. Remove skill command definitions for `cub:triage` and `cub:plan` from skill/command template files\n3. Remove any `.claude/commands` configuration entries that register these skills\n4. Remove skill routing and registration code that supports these commands\n5. Search for any remaining references (comments, documentation, imports) and clean them up\n6. Verify no broken references remain by grepping for \"cub:triage\" and \"cub:plan\" across the codebase", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212370", "updated_at": "2026-01-29T01:58:08.212371", "closed_at": null, "acceptance_criteria": ["`cub:triage` no longer appears in any templates, configuration files, or code", "`cub:plan` no longer appears in any templates, configuration files, or code", "All skill registration/routing code that handled these commands is removed", "Remaining skills and commands continue to function correctly (verify with `cub --help`)", "No broken imports or dangling references to removed skill definitions", "Git status shows only the intended removals (no accidental changes)"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "open", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212407", "updated_at": "2026-01-29T01:58:08.212407", "closed_at": null, "acceptance_criteria": ["Headline box displays harness backend name when available", "Headline box displays model name when available", "Other explicit configuration specs are included if applicable", "Layout remains readable without excessive line wrapping", "Unconfigured specs are omitted gracefully (no \"None\", \"N/A\", or blank values shown)", "Changes work in both `cub run` and direct session contexts", "Existing tests pass and new tests cover headline rendering scenarios"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "open", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212440", "updated_at": "2026-01-29T01:58:08.212440", "closed_at": null, "acceptance_criteria": ["Each streamed message is followed by exactly one newline character", "Output is readable with clear visual separation between consecutive messages", "Non-stream output (`cub run` without `--stream`) is unaffected", "Works correctly with all harness backends (claude, codex, gemini, opencode)", "No duplicate blank lines or extra whitespace introduced", "Existing tests still pass and new behavior is tested"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "open", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212476", "updated_at": "2026-01-29T01:58:08.212477", "closed_at": null, "acceptance_criteria": ["Progress indicator displays \"[current/total]\" format for each item", "Item title or brief summary appears alongside progress update", "Updates appear incrementally as each item completes processing", "No measurable latency increase compared to current implementation", "Output uses Rich console consistent with other cub commands", "Works correctly with punchlist files of varying sizes (3-50+ items)"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "difference_summary": "Task 0 (cub-n6x.10): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 1 (cub-n6x.11): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 2 (cub-n6x.3): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 3 (cub-n6x.4): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 4 (cub-n6x.5): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 5 (cub-n6x.6): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 6 (cub-n6x.7): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 7 (cub-n6x.8): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 8 (cub-n6x.9): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x"}
{"timestamp": "2026-01-29T02:15:35.649310", "operation": "get_task", "task_id": "cub-n6x.3", "primary_result": {"id": "cub-n6x.3", "title": "Add post-command guidance messages to key cub workflows", "status": "open", "priority": "P2", "type": "task", "description": "Users new to cub lack clear direction after running commands, leaving them uncertain about next steps. Contextual guidance messages will improve onboarding and reduce friction by providing actionable next steps with concrete examples. This is a UX improvement focused on making cub more intuitive for new users.\n\n**Implementation Steps:**\n1. Create a guidance module (`cub/core/guidance.py`) with a `GuidanceProvider` class to generate contextual next-step messages based on command type and result\n2. Add guidance output to `cub init` command - display suggested next steps (create capture, run interview, start task) after successful initialization\n3. Add guidance output to `cub capture` command - suggest next steps (review capture, start interview, organize into spec) after capture creation\n4. Add guidance output to `cub spec` command - guide to next phase (detailed requirements, link to epic, schedule planning) after spec creation\n5. Implement `--quiet` flag support across these commands to suppress guidance messages when desired\n6. Format guidance using Rich tables/panels for readability and consistency\n7. Add tests for guidance module and verify all commands respect quiet flag", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313516Z", "updated_at": "2026-01-29T01:58:07.464703Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.3", "title": "Add post-command guidance messages to key cub workflows", "status": "open", "priority": "P2", "type": "task", "description": "Users new to cub lack clear direction after running commands, leaving them uncertain about next steps. Contextual guidance messages will improve onboarding and reduce friction by providing actionable next steps with concrete examples. This is a UX improvement focused on making cub more intuitive for new users.\n\n**Implementation Steps:**\n1. Create a guidance module (`cub/core/guidance.py`) with a `GuidanceProvider` class to generate contextual next-step messages based on command type and result\n2. Add guidance output to `cub init` command - display suggested next steps (create capture, run interview, start task) after successful initialization\n3. Add guidance output to `cub capture` command - suggest next steps (review capture, start interview, organize into spec) after capture creation\n4. Add guidance output to `cub spec` command - guide to next phase (detailed requirements, link to epic, schedule planning) after spec creation\n5. Implement `--quiet` flag support across these commands to suppress guidance messages when desired\n6. Format guidance using Rich tables/panels for readability and consistency\n7. Add tests for guidance module and verify all commands respect quiet flag", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212115", "updated_at": "2026-01-29T01:58:08.212115", "closed_at": null, "acceptance_criteria": ["`cub init` displays 3-5 actionable next steps with copyable command examples after initialization", "`cub capture` displays 3-5 actionable next steps after successful capture creation", "`cub spec` displays 3-5 actionable next steps after successful spec creation", "All guidance messages respect `--quiet` flag and suppress output when enabled", "Guidance uses Rich formatting (tables or panels) for consistent, readable output", "Command examples in guidance are accurate and directly copyable", "All existing command behavior remains unchanged (guidance is additive only)", "Unit tests cover guidance message generation for each command type"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:15:35.742440", "operation": "update_task", "task_id": "cub-n6x.3", "primary_result": {"id": "cub-n6x.3", "title": "Add post-command guidance messages to key cub workflows", "status": "in_progress", "priority": "P2", "type": "task", "description": "Users new to cub lack clear direction after running commands, leaving them uncertain about next steps. Contextual guidance messages will improve onboarding and reduce friction by providing actionable next steps with concrete examples. This is a UX improvement focused on making cub more intuitive for new users.\n\n**Implementation Steps:**\n1. Create a guidance module (`cub/core/guidance.py`) with a `GuidanceProvider` class to generate contextual next-step messages based on command type and result\n2. Add guidance output to `cub init` command - display suggested next steps (create capture, run interview, start task) after successful initialization\n3. Add guidance output to `cub capture` command - suggest next steps (review capture, start interview, organize into spec) after capture creation\n4. Add guidance output to `cub spec` command - guide to next phase (detailed requirements, link to epic, schedule planning) after spec creation\n5. Implement `--quiet` flag support across these commands to suppress guidance messages when desired\n6. Format guidance using Rich tables/panels for readability and consistency\n7. Add tests for guidance module and verify all commands respect quiet flag", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313516Z", "updated_at": "2026-01-29T02:15:35.692238Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.3", "title": "Add post-command guidance messages to key cub workflows", "status": "in_progress", "priority": "P2", "type": "task", "description": "Users new to cub lack clear direction after running commands, leaving them uncertain about next steps. Contextual guidance messages will improve onboarding and reduce friction by providing actionable next steps with concrete examples. This is a UX improvement focused on making cub more intuitive for new users.\n\n**Implementation Steps:**\n1. Create a guidance module (`cub/core/guidance.py`) with a `GuidanceProvider` class to generate contextual next-step messages based on command type and result\n2. Add guidance output to `cub init` command - display suggested next steps (create capture, run interview, start task) after successful initialization\n3. Add guidance output to `cub capture` command - suggest next steps (review capture, start interview, organize into spec) after capture creation\n4. Add guidance output to `cub spec` command - guide to next phase (detailed requirements, link to epic, schedule planning) after spec creation\n5. Implement `--quiet` flag support across these commands to suppress guidance messages when desired\n6. Format guidance using Rich tables/panels for readability and consistency\n7. Add tests for guidance module and verify all commands respect quiet flag", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212115", "updated_at": "2026-01-29T02:15:35.740870", "closed_at": null, "acceptance_criteria": ["`cub init` displays 3-5 actionable next steps with copyable command examples after initialization", "`cub capture` displays 3-5 actionable next steps after successful capture creation", "`cub spec` displays 3-5 actionable next steps after successful spec creation", "All guidance messages respect `--quiet` flag and suppress output when enabled", "Guidance uses Rich formatting (tables or panels) for consistent, readable output", "Command examples in guidance are accurate and directly copyable", "All existing command behavior remains unchanged (guidance is additive only)", "Unit tests cover guidance message generation for each command type"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:25:16.298680", "operation": "get_task", "task_id": "cub-n6x.3", "primary_result": {"id": "cub-n6x.3", "title": "Add post-command guidance messages to key cub workflows", "status": "closed", "priority": "P2", "type": "task", "description": "Users new to cub lack clear direction after running commands, leaving them uncertain about next steps. Contextual guidance messages will improve onboarding and reduce friction by providing actionable next steps with concrete examples. This is a UX improvement focused on making cub more intuitive for new users.\n\n**Implementation Steps:**\n1. Create a guidance module (`cub/core/guidance.py`) with a `GuidanceProvider` class to generate contextual next-step messages based on command type and result\n2. Add guidance output to `cub init` command - display suggested next steps (create capture, run interview, start task) after successful initialization\n3. Add guidance output to `cub capture` command - suggest next steps (review capture, start interview, organize into spec) after capture creation\n4. Add guidance output to `cub spec` command - guide to next phase (detailed requirements, link to epic, schedule planning) after spec creation\n5. Implement `--quiet` flag support across these commands to suppress guidance messages when desired\n6. Format guidance using Rich tables/panels for readability and consistency\n7. Add tests for guidance module and verify all commands respect quiet flag", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313516Z", "updated_at": "2026-01-29T02:24:51.093335Z", "closed_at": "2026-01-29T02:24:51.093335Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.3", "title": "Add post-command guidance messages to key cub workflows", "status": "in_progress", "priority": "P2", "type": "task", "description": "Users new to cub lack clear direction after running commands, leaving them uncertain about next steps. Contextual guidance messages will improve onboarding and reduce friction by providing actionable next steps with concrete examples. This is a UX improvement focused on making cub more intuitive for new users.\n\n**Implementation Steps:**\n1. Create a guidance module (`cub/core/guidance.py`) with a `GuidanceProvider` class to generate contextual next-step messages based on command type and result\n2. Add guidance output to `cub init` command - display suggested next steps (create capture, run interview, start task) after successful initialization\n3. Add guidance output to `cub capture` command - suggest next steps (review capture, start interview, organize into spec) after capture creation\n4. Add guidance output to `cub spec` command - guide to next phase (detailed requirements, link to epic, schedule planning) after spec creation\n5. Implement `--quiet` flag support across these commands to suppress guidance messages when desired\n6. Format guidance using Rich tables/panels for readability and consistency\n7. Add tests for guidance module and verify all commands respect quiet flag", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212115", "updated_at": "2026-01-29T02:15:35.740870", "closed_at": null, "acceptance_criteria": ["`cub init` displays 3-5 actionable next steps with copyable command examples after initialization", "`cub capture` displays 3-5 actionable next steps after successful capture creation", "`cub spec` displays 3-5 actionable next steps after successful spec creation", "All guidance messages respect `--quiet` flag and suppress output when enabled", "Guidance uses Rich formatting (tables or panels) for consistent, readable output", "Command examples in guidance are accurate and directly copyable", "All existing command behavior remains unchanged (guidance is additive only)", "Unit tests cover guidance message generation for each command type"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:25:16.345818", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 44, "open": 43, "in_progress": 1, "closed": 0}, "secondary_result": {"total": 41, "open": 38, "in_progress": 1, "closed": 2}, "difference_summary": "total: 44 != 41; open: 43 != 38; closed: 0 != 2"}
{"timestamp": "2026-01-29T02:25:16.447195", "operation": "close_task", "task_id": "cub-n6x.3", "primary_result": {"id": "cub-n6x.3", "title": "Add post-command guidance messages to key cub workflows", "status": "closed", "priority": "P2", "type": "task", "description": "Users new to cub lack clear direction after running commands, leaving them uncertain about next steps. Contextual guidance messages will improve onboarding and reduce friction by providing actionable next steps with concrete examples. This is a UX improvement focused on making cub more intuitive for new users.\n\n**Implementation Steps:**\n1. Create a guidance module (`cub/core/guidance.py`) with a `GuidanceProvider` class to generate contextual next-step messages based on command type and result\n2. Add guidance output to `cub init` command - display suggested next steps (create capture, run interview, start task) after successful initialization\n3. Add guidance output to `cub capture` command - suggest next steps (review capture, start interview, organize into spec) after capture creation\n4. Add guidance output to `cub spec` command - guide to next phase (detailed requirements, link to epic, schedule planning) after spec creation\n5. Implement `--quiet` flag support across these commands to suppress guidance messages when desired\n6. Format guidance using Rich tables/panels for readability and consistency\n7. Add tests for guidance module and verify all commands respect quiet flag", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313516Z", "updated_at": "2026-01-29T02:25:16.390275Z", "closed_at": "2026-01-29T02:25:16.390275Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.3", "title": "Add post-command guidance messages to key cub workflows", "status": "closed", "priority": "P2", "type": "task", "description": "Users new to cub lack clear direction after running commands, leaving them uncertain about next steps. Contextual guidance messages will improve onboarding and reduce friction by providing actionable next steps with concrete examples. This is a UX improvement focused on making cub more intuitive for new users.\n\n**Implementation Steps:**\n1. Create a guidance module (`cub/core/guidance.py`) with a `GuidanceProvider` class to generate contextual next-step messages based on command type and result\n2. Add guidance output to `cub init` command - display suggested next steps (create capture, run interview, start task) after successful initialization\n3. Add guidance output to `cub capture` command - suggest next steps (review capture, start interview, organize into spec) after capture creation\n4. Add guidance output to `cub spec` command - guide to next phase (detailed requirements, link to epic, schedule planning) after spec creation\n5. Implement `--quiet` flag support across these commands to suppress guidance messages when desired\n6. Format guidance using Rich tables/panels for readability and consistency\n7. Add tests for guidance module and verify all commands respect quiet flag", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212115", "updated_at": "2026-01-29T02:25:16.444933", "closed_at": "2026-01-29T02:25:16.444929", "acceptance_criteria": ["`cub init` displays 3-5 actionable next steps with copyable command examples after initialization", "`cub capture` displays 3-5 actionable next steps after successful capture creation", "`cub spec` displays 3-5 actionable next steps after successful spec creation", "All guidance messages respect `--quiet` flag and suppress output when enabled", "Guidance uses Rich formatting (tables or panels) for consistent, readable output", "Command examples in guidance are accurate and directly copyable", "All existing command behavior remains unchanged (guidance is additive only)", "Unit tests cover guidance message generation for each command type"], "notes": "[Closed: 2026-01-29T02:25:16.444934] Completed by autonomous execution", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:25:16.506463", "operation": "get_task", "task_id": "cub-n6x.3", "primary_result": {"id": "cub-n6x.3", "title": "Add post-command guidance messages to key cub workflows", "status": "closed", "priority": "P2", "type": "task", "description": "Users new to cub lack clear direction after running commands, leaving them uncertain about next steps. Contextual guidance messages will improve onboarding and reduce friction by providing actionable next steps with concrete examples. This is a UX improvement focused on making cub more intuitive for new users.\n\n**Implementation Steps:**\n1. Create a guidance module (`cub/core/guidance.py`) with a `GuidanceProvider` class to generate contextual next-step messages based on command type and result\n2. Add guidance output to `cub init` command - display suggested next steps (create capture, run interview, start task) after successful initialization\n3. Add guidance output to `cub capture` command - suggest next steps (review capture, start interview, organize into spec) after capture creation\n4. Add guidance output to `cub spec` command - guide to next phase (detailed requirements, link to epic, schedule planning) after spec creation\n5. Implement `--quiet` flag support across these commands to suppress guidance messages when desired\n6. Format guidance using Rich tables/panels for readability and consistency\n7. Add tests for guidance module and verify all commands respect quiet flag", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313516Z", "updated_at": "2026-01-29T02:25:16.390275Z", "closed_at": "2026-01-29T02:25:16.390275Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.3", "title": "Add post-command guidance messages to key cub workflows", "status": "closed", "priority": "P2", "type": "task", "description": "Users new to cub lack clear direction after running commands, leaving them uncertain about next steps. Contextual guidance messages will improve onboarding and reduce friction by providing actionable next steps with concrete examples. This is a UX improvement focused on making cub more intuitive for new users.\n\n**Implementation Steps:**\n1. Create a guidance module (`cub/core/guidance.py`) with a `GuidanceProvider` class to generate contextual next-step messages based on command type and result\n2. Add guidance output to `cub init` command - display suggested next steps (create capture, run interview, start task) after successful initialization\n3. Add guidance output to `cub capture` command - suggest next steps (review capture, start interview, organize into spec) after capture creation\n4. Add guidance output to `cub spec` command - guide to next phase (detailed requirements, link to epic, schedule planning) after spec creation\n5. Implement `--quiet` flag support across these commands to suppress guidance messages when desired\n6. Format guidance using Rich tables/panels for readability and consistency\n7. Add tests for guidance module and verify all commands respect quiet flag", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212115", "updated_at": "2026-01-29T02:25:16.444933", "closed_at": "2026-01-29T02:25:16.444929", "acceptance_criteria": ["`cub init` displays 3-5 actionable next steps with copyable command examples after initialization", "`cub capture` displays 3-5 actionable next steps after successful capture creation", "`cub spec` displays 3-5 actionable next steps after successful spec creation", "All guidance messages respect `--quiet` flag and suppress output when enabled", "Guidance uses Rich formatting (tables or panels) for consistent, readable output", "Command examples in guidance are accurate and directly copyable", "All existing command behavior remains unchanged (guidance is additive only)", "Unit tests cover guidance message generation for each command type"], "notes": "[Closed: 2026-01-29T02:25:16.444934] Completed by autonomous execution", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:25:27.627999", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-n6x.4", "title": "Configure git upstream on feature branch creation", "status": "open", "priority": "P2", "type": "task", "description": "When build-plan creates a feature branch, it doesn't set upstream tracking, causing `git push` to fail with \"fatal: The current branch has no upstream branch.\" Users must manually run `git push --set-upstream origin <branch>` before subsequent pushes work. This friction breaks the autonomous workflow where agents should be able to push changes without manual git intervention.\n\n**Implementation Steps:**\n1. Locate the feature branch creation logic in build-plan (likely in `cub.core.launch` or a related module that handles git operations)\n2. After creating the local branch, immediately configure upstream tracking by either:", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313530Z", "updated_at": "2026-01-29T01:58:07.465351Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.5", "title": "Check completed steps before launching architect in plan run", "status": "open", "priority": "P2", "type": "task", "description": "The `cub plan run` command currently assumes architect should launch automatically upon exit, but this breaks workflows where earlier steps are incomplete or partially completed. Users need visibility into which prep pipeline steps (triage, architect, plan, bootstrap) have already been done so they can decide whether to continue, re-run a step, or skip ahead. The system should detect artifacts from previous runs and guide users through the pipeline intelligently rather than blindly advancing.\n\n**Implementation Steps:**\n1. Create a step detection function that checks for completion artifacts (triage markdown files, architect outputs, plan.jsonl, beads state) in the project\n2. Display a summary table showing which prep steps are completed, in-progress, or incomplete when exiting plan run\n3. Prompt the user with options: continue to next incomplete step, re-run a specific step, or exit\n4. Route the selected action back to the appropriate plan subcommand (orient, architect, plan, bootstrap)\n5. Handle edge cases: partial architect completion, missing intermediate steps, corrupted artifacts", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313540Z", "updated_at": "2026-01-29T01:58:07.465964Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.6", "title": "Add build failure detection and retry logic to cub pr", "status": "open", "priority": "P2", "type": "task", "description": "The `cub pr` command currently creates pull requests but has no visibility into CI check status or automated recovery from transient failures. This means flaky tests, rate limits, and temporary service issues require manual intervention, interrupting autonomous workflows. Adding automated failure detection and retry logic would enable self-healing PR workflows that handle common transient failures without manual handoff.\n\n**Implementation Steps:**\n1. Create `cub.core.services.pr_monitor` module to implement check polling and failure detection via `gh pr checks`\n2. Add retry configuration model to `cub.core.config` with timeout duration and max retry count parameters\n3. Extend `LaunchService` to support background PR monitoring while harness is active\n4. Implement check state machine: poll \u2192 detect failure \u2192 wait \u2192 retry \u2192 repeat or succeed\n5. Add `--retry-timeout` and `--no-retry` flags to `cub pr` command in `cub.cli.pr`\n6. Integrate check monitoring into session hooks to log retry history to session forensics\n7. Add check status and retry attempts to `cub.core.ledger` models for session ledger recording\n8. Write integration tests for check detection, retry triggering, and rate limit handling", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313550Z", "updated_at": "2026-01-29T01:58:07.466540Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.7", "title": "Ensure plan.json is created at pipeline start", "status": "open", "priority": "P2", "type": "task", "description": "plan.json is currently written during the orient stage rather than when the plan context is first created. If orient fails before calling ctx.save_plan(), there's no plan.json file to recover from. This reduces fault tolerance and prevents resumption in cases where early stage failures occur. Creating plan.json immediately after context initialization ensures a persistent checkpoint exists from the start.\n\n**Implementation Steps:**\n1. Locate PipelineConfig.run() and identify where PlanContext is created or loaded\n2. Add ctx.save_plan() call immediately after plan context initialization, before any stage runs\n3. Verify orient stage's existing ctx.save_plan() call at line 484 doesn't duplicate writes\n4. Run full test suite to ensure pipeline behavior remains unchanged\n5. Verify plan.json exists at project root before any stage execution begins", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313563Z", "updated_at": "2026-01-29T01:58:07.467200Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.8", "title": "Remove deprecated cub:triage and cub:plan skill commands", "status": "open", "priority": "P2", "type": "task", "description": "The cub:triage and cub:plan skill commands are no longer needed and create maintenance overhead. These commands were part of an earlier planning pipeline that has been superseded by other tooling. Removing them will reduce code complexity, eliminate dead skill registrations, and prevent confusion about available planning commands. This is a straightforward cleanup task with no backward compatibility concerns.\n\n**Implementation Steps:**\n1. Search the codebase for all references to `cub:triage` and `cub:plan` (skill definitions, command registrations, templates)\n2. Remove skill command definitions for `cub:triage` and `cub:plan` from skill/command template files\n3. Remove any `.claude/commands` configuration entries that register these skills\n4. Remove skill routing and registration code that supports these commands\n5. Search for any remaining references (comments, documentation, imports) and clean them up\n6. Verify no broken references remain by grepping for \"cub:triage\" and \"cub:plan\" across the codebase", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313572Z", "updated_at": "2026-01-29T01:58:07.467757Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "open", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313582Z", "updated_at": "2026-01-29T01:58:07.468436Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "open", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313625Z", "updated_at": "2026-01-29T01:58:07.462661Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "open", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313643Z", "updated_at": "2026-01-29T01:58:07.463381Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "secondary_result": [{"id": "cub-n6x.4", "title": "Configure git upstream on feature branch creation", "status": "open", "priority": "P2", "type": "task", "description": "When build-plan creates a feature branch, it doesn't set upstream tracking, causing `git push` to fail with \"fatal: The current branch has no upstream branch.\" Users must manually run `git push --set-upstream origin <branch>` before subsequent pushes work. This friction breaks the autonomous workflow where agents should be able to push changes without manual git intervention.\n\n**Implementation Steps:**\n1. Locate the feature branch creation logic in build-plan (likely in `cub.core.launch` or a related module that handles git operations)\n2. After creating the local branch, immediately configure upstream tracking by either:", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212201", "updated_at": "2026-01-29T01:58:08.212202", "closed_at": null, "acceptance_criteria": ["Feature branches created by build-plan have upstream tracking configured", "`git push` works on new branches without `--set-upstream` flag", "Works for both new local branches and existing branches being pushed for first time", "Tests confirm upstream tracking is set and push operations succeed", "Documentation updated in CLAUDE.md"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.5", "title": "Check completed steps before launching architect in plan run", "status": "open", "priority": "P2", "type": "task", "description": "The `cub plan run` command currently assumes architect should launch automatically upon exit, but this breaks workflows where earlier steps are incomplete or partially completed. Users need visibility into which prep pipeline steps (triage, architect, plan, bootstrap) have already been done so they can decide whether to continue, re-run a step, or skip ahead. The system should detect artifacts from previous runs and guide users through the pipeline intelligently rather than blindly advancing.\n\n**Implementation Steps:**\n1. Create a step detection function that checks for completion artifacts (triage markdown files, architect outputs, plan.jsonl, beads state) in the project\n2. Display a summary table showing which prep steps are completed, in-progress, or incomplete when exiting plan run\n3. Prompt the user with options: continue to next incomplete step, re-run a specific step, or exit\n4. Route the selected action back to the appropriate plan subcommand (orient, architect, plan, bootstrap)\n5. Handle edge cases: partial architect completion, missing intermediate steps, corrupted artifacts", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212245", "updated_at": "2026-01-29T01:58:08.212246", "closed_at": null, "acceptance_criteria": ["Detects completion status of all four prep steps via artifact inspection", "Displays step summary before prompting for next action", "Offers user choice to continue, re-run, or exit (not forced into architect)", "Does not launch architect if earlier steps are incomplete", "Gracefully handles partial completion and corrupted artifacts"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.6", "title": "Add build failure detection and retry logic to cub pr", "status": "open", "priority": "P2", "type": "task", "description": "The `cub pr` command currently creates pull requests but has no visibility into CI check status or automated recovery from transient failures. This means flaky tests, rate limits, and temporary service issues require manual intervention, interrupting autonomous workflows. Adding automated failure detection and retry logic would enable self-healing PR workflows that handle common transient failures without manual handoff.\n\n**Implementation Steps:**\n1. Create `cub.core.services.pr_monitor` module to implement check polling and failure detection via `gh pr checks`\n2. Add retry configuration model to `cub.core.config` with timeout duration and max retry count parameters\n3. Extend `LaunchService` to support background PR monitoring while harness is active\n4. Implement check state machine: poll \u2192 detect failure \u2192 wait \u2192 retry \u2192 repeat or succeed\n5. Add `--retry-timeout` and `--no-retry` flags to `cub pr` command in `cub.cli.pr`\n6. Integrate check monitoring into session hooks to log retry history to session forensics\n7. Add check status and retry attempts to `cub.core.ledger` models for session ledger recording\n8. Write integration tests for check detection, retry triggering, and rate limit handling", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212294", "updated_at": "2026-01-29T01:58:08.212295", "closed_at": null, "acceptance_criteria": ["`cub pr` detects PR check failures via `gh pr checks` polling", "Automatic retry timer (default 10 minutes, configurable) activates when failures detected", "`--retry-timeout` flag accepts duration strings (e.g., `5m`, `30s`)", "`--no-retry` flag disables automatic retry behavior for all check types", "Failed checks are re-triggered via `gh pr checks --rerun` or equivalent", "Session forensics (`.cub/ledger/forensics/{session_id}.jsonl`) logs all check statuses and retry attempts with timestamps", "Max retries (default 3) prevents infinite loop; stops retrying after limit reached", "Handles `gh` API rate limiting and network errors gracefully with exponential backoff", "Works with both draft PRs (`--draft`) and regular PRs"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.7", "title": "Ensure plan.json is created at pipeline start", "status": "open", "priority": "P2", "type": "task", "description": "plan.json is currently written during the orient stage rather than when the plan context is first created. If orient fails before calling ctx.save_plan(), there's no plan.json file to recover from. This reduces fault tolerance and prevents resumption in cases where early stage failures occur. Creating plan.json immediately after context initialization ensures a persistent checkpoint exists from the start.\n\n**Implementation Steps:**\n1. Locate PipelineConfig.run() and identify where PlanContext is created or loaded\n2. Add ctx.save_plan() call immediately after plan context initialization, before any stage runs\n3. Verify orient stage's existing ctx.save_plan() call at line 484 doesn't duplicate writes\n4. Run full test suite to ensure pipeline behavior remains unchanged\n5. Verify plan.json exists at project root before any stage execution begins", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212336", "updated_at": "2026-01-29T01:58:08.212336", "closed_at": null, "acceptance_criteria": ["plan.json is created immediately after plan context initialization", "plan.json exists before orient stage executes", "All existing tests pass with no behavioral changes", "Plan data is recoverable/resumable even if orient fails early"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.8", "title": "Remove deprecated cub:triage and cub:plan skill commands", "status": "open", "priority": "P2", "type": "task", "description": "The cub:triage and cub:plan skill commands are no longer needed and create maintenance overhead. These commands were part of an earlier planning pipeline that has been superseded by other tooling. Removing them will reduce code complexity, eliminate dead skill registrations, and prevent confusion about available planning commands. This is a straightforward cleanup task with no backward compatibility concerns.\n\n**Implementation Steps:**\n1. Search the codebase for all references to `cub:triage` and `cub:plan` (skill definitions, command registrations, templates)\n2. Remove skill command definitions for `cub:triage` and `cub:plan` from skill/command template files\n3. Remove any `.claude/commands` configuration entries that register these skills\n4. Remove skill routing and registration code that supports these commands\n5. Search for any remaining references (comments, documentation, imports) and clean them up\n6. Verify no broken references remain by grepping for \"cub:triage\" and \"cub:plan\" across the codebase", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212370", "updated_at": "2026-01-29T01:58:08.212371", "closed_at": null, "acceptance_criteria": ["`cub:triage` no longer appears in any templates, configuration files, or code", "`cub:plan` no longer appears in any templates, configuration files, or code", "All skill registration/routing code that handled these commands is removed", "Remaining skills and commands continue to function correctly (verify with `cub --help`)", "No broken imports or dangling references to removed skill definitions", "Git status shows only the intended removals (no accidental changes)"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "open", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212407", "updated_at": "2026-01-29T01:58:08.212407", "closed_at": null, "acceptance_criteria": ["Headline box displays harness backend name when available", "Headline box displays model name when available", "Other explicit configuration specs are included if applicable", "Layout remains readable without excessive line wrapping", "Unconfigured specs are omitted gracefully (no \"None\", \"N/A\", or blank values shown)", "Changes work in both `cub run` and direct session contexts", "Existing tests pass and new tests cover headline rendering scenarios"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "open", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212440", "updated_at": "2026-01-29T01:58:08.212440", "closed_at": null, "acceptance_criteria": ["Each streamed message is followed by exactly one newline character", "Output is readable with clear visual separation between consecutive messages", "Non-stream output (`cub run` without `--stream`) is unaffected", "Works correctly with all harness backends (claude, codex, gemini, opencode)", "No duplicate blank lines or extra whitespace introduced", "Existing tests still pass and new behavior is tested"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "open", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212476", "updated_at": "2026-01-29T01:58:08.212477", "closed_at": null, "acceptance_criteria": ["Progress indicator displays \"[current/total]\" format for each item", "Item title or brief summary appears alongside progress update", "Updates appear incrementally as each item completes processing", "No measurable latency increase compared to current implementation", "Output uses Rich console consistent with other cub commands", "Works correctly with punchlist files of varying sizes (3-50+ items)"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "difference_summary": "Task 0 (cub-n6x.10): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 1 (cub-n6x.11): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 2 (cub-n6x.4): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 3 (cub-n6x.5): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 4 (cub-n6x.6): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 5 (cub-n6x.7): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 6 (cub-n6x.8): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 7 (cub-n6x.9): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x"}
{"timestamp": "2026-01-29T02:25:27.683580", "operation": "get_task", "task_id": "cub-n6x.4", "primary_result": {"id": "cub-n6x.4", "title": "Configure git upstream on feature branch creation", "status": "open", "priority": "P2", "type": "task", "description": "When build-plan creates a feature branch, it doesn't set upstream tracking, causing `git push` to fail with \"fatal: The current branch has no upstream branch.\" Users must manually run `git push --set-upstream origin <branch>` before subsequent pushes work. This friction breaks the autonomous workflow where agents should be able to push changes without manual git intervention.\n\n**Implementation Steps:**\n1. Locate the feature branch creation logic in build-plan (likely in `cub.core.launch` or a related module that handles git operations)\n2. After creating the local branch, immediately configure upstream tracking by either:", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313530Z", "updated_at": "2026-01-29T01:58:07.465351Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.4", "title": "Configure git upstream on feature branch creation", "status": "open", "priority": "P2", "type": "task", "description": "When build-plan creates a feature branch, it doesn't set upstream tracking, causing `git push` to fail with \"fatal: The current branch has no upstream branch.\" Users must manually run `git push --set-upstream origin <branch>` before subsequent pushes work. This friction breaks the autonomous workflow where agents should be able to push changes without manual git intervention.\n\n**Implementation Steps:**\n1. Locate the feature branch creation logic in build-plan (likely in `cub.core.launch` or a related module that handles git operations)\n2. After creating the local branch, immediately configure upstream tracking by either:", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212201", "updated_at": "2026-01-29T01:58:08.212202", "closed_at": null, "acceptance_criteria": ["Feature branches created by build-plan have upstream tracking configured", "`git push` works on new branches without `--set-upstream` flag", "Works for both new local branches and existing branches being pushed for first time", "Tests confirm upstream tracking is set and push operations succeed", "Documentation updated in CLAUDE.md"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:25:27.805521", "operation": "update_task", "task_id": "cub-n6x.4", "primary_result": {"id": "cub-n6x.4", "title": "Configure git upstream on feature branch creation", "status": "in_progress", "priority": "P2", "type": "task", "description": "When build-plan creates a feature branch, it doesn't set upstream tracking, causing `git push` to fail with \"fatal: The current branch has no upstream branch.\" Users must manually run `git push --set-upstream origin <branch>` before subsequent pushes work. This friction breaks the autonomous workflow where agents should be able to push changes without manual git intervention.\n\n**Implementation Steps:**\n1. Locate the feature branch creation logic in build-plan (likely in `cub.core.launch` or a related module that handles git operations)\n2. After creating the local branch, immediately configure upstream tracking by either:", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313530Z", "updated_at": "2026-01-29T02:25:27.738996Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.4", "title": "Configure git upstream on feature branch creation", "status": "in_progress", "priority": "P2", "type": "task", "description": "When build-plan creates a feature branch, it doesn't set upstream tracking, causing `git push` to fail with \"fatal: The current branch has no upstream branch.\" Users must manually run `git push --set-upstream origin <branch>` before subsequent pushes work. This friction breaks the autonomous workflow where agents should be able to push changes without manual git intervention.\n\n**Implementation Steps:**\n1. Locate the feature branch creation logic in build-plan (likely in `cub.core.launch` or a related module that handles git operations)\n2. After creating the local branch, immediately configure upstream tracking by either:", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212201", "updated_at": "2026-01-29T02:25:27.803631", "closed_at": null, "acceptance_criteria": ["Feature branches created by build-plan have upstream tracking configured", "`git push` works on new branches without `--set-upstream` flag", "Works for both new local branches and existing branches being pushed for first time", "Tests confirm upstream tracking is set and push operations succeed", "Documentation updated in CLAUDE.md"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:30:47.060184", "operation": "get_task", "task_id": "cub-n6x.4", "primary_result": {"id": "cub-n6x.4", "title": "Configure git upstream on feature branch creation", "status": "closed", "priority": "P2", "type": "task", "description": "When build-plan creates a feature branch, it doesn't set upstream tracking, causing `git push` to fail with \"fatal: The current branch has no upstream branch.\" Users must manually run `git push --set-upstream origin <branch>` before subsequent pushes work. This friction breaks the autonomous workflow where agents should be able to push changes without manual git intervention.\n\n**Implementation Steps:**\n1. Locate the feature branch creation logic in build-plan (likely in `cub.core.launch` or a related module that handles git operations)\n2. After creating the local branch, immediately configure upstream tracking by either:", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313530Z", "updated_at": "2026-01-29T02:30:33.182843Z", "closed_at": "2026-01-29T02:30:33.182843Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.4", "title": "Configure git upstream on feature branch creation", "status": "in_progress", "priority": "P2", "type": "task", "description": "When build-plan creates a feature branch, it doesn't set upstream tracking, causing `git push` to fail with \"fatal: The current branch has no upstream branch.\" Users must manually run `git push --set-upstream origin <branch>` before subsequent pushes work. This friction breaks the autonomous workflow where agents should be able to push changes without manual git intervention.\n\n**Implementation Steps:**\n1. Locate the feature branch creation logic in build-plan (likely in `cub.core.launch` or a related module that handles git operations)\n2. After creating the local branch, immediately configure upstream tracking by either:", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212201", "updated_at": "2026-01-29T02:25:27.803631", "closed_at": null, "acceptance_criteria": ["Feature branches created by build-plan have upstream tracking configured", "`git push` works on new branches without `--set-upstream` flag", "Works for both new local branches and existing branches being pushed for first time", "Tests confirm upstream tracking is set and push operations succeed", "Documentation updated in CLAUDE.md"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:30:47.110426", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 43, "open": 42, "in_progress": 1, "closed": 0}, "secondary_result": {"total": 41, "open": 37, "in_progress": 1, "closed": 3}, "difference_summary": "total: 43 != 41; open: 42 != 37; closed: 0 != 3"}
{"timestamp": "2026-01-29T02:30:47.205485", "operation": "close_task", "task_id": "cub-n6x.4", "primary_result": {"id": "cub-n6x.4", "title": "Configure git upstream on feature branch creation", "status": "closed", "priority": "P2", "type": "task", "description": "When build-plan creates a feature branch, it doesn't set upstream tracking, causing `git push` to fail with \"fatal: The current branch has no upstream branch.\" Users must manually run `git push --set-upstream origin <branch>` before subsequent pushes work. This friction breaks the autonomous workflow where agents should be able to push changes without manual git intervention.\n\n**Implementation Steps:**\n1. Locate the feature branch creation logic in build-plan (likely in `cub.core.launch` or a related module that handles git operations)\n2. After creating the local branch, immediately configure upstream tracking by either:", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313530Z", "updated_at": "2026-01-29T02:30:47.153444Z", "closed_at": "2026-01-29T02:30:47.153444Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.4", "title": "Configure git upstream on feature branch creation", "status": "closed", "priority": "P2", "type": "task", "description": "When build-plan creates a feature branch, it doesn't set upstream tracking, causing `git push` to fail with \"fatal: The current branch has no upstream branch.\" Users must manually run `git push --set-upstream origin <branch>` before subsequent pushes work. This friction breaks the autonomous workflow where agents should be able to push changes without manual git intervention.\n\n**Implementation Steps:**\n1. Locate the feature branch creation logic in build-plan (likely in `cub.core.launch` or a related module that handles git operations)\n2. After creating the local branch, immediately configure upstream tracking by either:", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212201", "updated_at": "2026-01-29T02:30:47.203727", "closed_at": "2026-01-29T02:30:47.203723", "acceptance_criteria": ["Feature branches created by build-plan have upstream tracking configured", "`git push` works on new branches without `--set-upstream` flag", "Works for both new local branches and existing branches being pushed for first time", "Tests confirm upstream tracking is set and push operations succeed", "Documentation updated in CLAUDE.md"], "notes": "[Closed: 2026-01-29T02:30:47.203728] Completed by autonomous execution", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:30:47.268018", "operation": "get_task", "task_id": "cub-n6x.4", "primary_result": {"id": "cub-n6x.4", "title": "Configure git upstream on feature branch creation", "status": "closed", "priority": "P2", "type": "task", "description": "When build-plan creates a feature branch, it doesn't set upstream tracking, causing `git push` to fail with \"fatal: The current branch has no upstream branch.\" Users must manually run `git push --set-upstream origin <branch>` before subsequent pushes work. This friction breaks the autonomous workflow where agents should be able to push changes without manual git intervention.\n\n**Implementation Steps:**\n1. Locate the feature branch creation logic in build-plan (likely in `cub.core.launch` or a related module that handles git operations)\n2. After creating the local branch, immediately configure upstream tracking by either:", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313530Z", "updated_at": "2026-01-29T02:30:47.153444Z", "closed_at": "2026-01-29T02:30:47.153444Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.4", "title": "Configure git upstream on feature branch creation", "status": "closed", "priority": "P2", "type": "task", "description": "When build-plan creates a feature branch, it doesn't set upstream tracking, causing `git push` to fail with \"fatal: The current branch has no upstream branch.\" Users must manually run `git push --set-upstream origin <branch>` before subsequent pushes work. This friction breaks the autonomous workflow where agents should be able to push changes without manual git intervention.\n\n**Implementation Steps:**\n1. Locate the feature branch creation logic in build-plan (likely in `cub.core.launch` or a related module that handles git operations)\n2. After creating the local branch, immediately configure upstream tracking by either:", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212201", "updated_at": "2026-01-29T02:30:47.203727", "closed_at": "2026-01-29T02:30:47.203723", "acceptance_criteria": ["Feature branches created by build-plan have upstream tracking configured", "`git push` works on new branches without `--set-upstream` flag", "Works for both new local branches and existing branches being pushed for first time", "Tests confirm upstream tracking is set and push operations succeed", "Documentation updated in CLAUDE.md"], "notes": "[Closed: 2026-01-29T02:30:47.203728] Completed by autonomous execution", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:30:55.632781", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-n6x.5", "title": "Check completed steps before launching architect in plan run", "status": "open", "priority": "P2", "type": "task", "description": "The `cub plan run` command currently assumes architect should launch automatically upon exit, but this breaks workflows where earlier steps are incomplete or partially completed. Users need visibility into which prep pipeline steps (triage, architect, plan, bootstrap) have already been done so they can decide whether to continue, re-run a step, or skip ahead. The system should detect artifacts from previous runs and guide users through the pipeline intelligently rather than blindly advancing.\n\n**Implementation Steps:**\n1. Create a step detection function that checks for completion artifacts (triage markdown files, architect outputs, plan.jsonl, beads state) in the project\n2. Display a summary table showing which prep steps are completed, in-progress, or incomplete when exiting plan run\n3. Prompt the user with options: continue to next incomplete step, re-run a specific step, or exit\n4. Route the selected action back to the appropriate plan subcommand (orient, architect, plan, bootstrap)\n5. Handle edge cases: partial architect completion, missing intermediate steps, corrupted artifacts", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313540Z", "updated_at": "2026-01-29T01:58:07.465964Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.6", "title": "Add build failure detection and retry logic to cub pr", "status": "open", "priority": "P2", "type": "task", "description": "The `cub pr` command currently creates pull requests but has no visibility into CI check status or automated recovery from transient failures. This means flaky tests, rate limits, and temporary service issues require manual intervention, interrupting autonomous workflows. Adding automated failure detection and retry logic would enable self-healing PR workflows that handle common transient failures without manual handoff.\n\n**Implementation Steps:**\n1. Create `cub.core.services.pr_monitor` module to implement check polling and failure detection via `gh pr checks`\n2. Add retry configuration model to `cub.core.config` with timeout duration and max retry count parameters\n3. Extend `LaunchService` to support background PR monitoring while harness is active\n4. Implement check state machine: poll \u2192 detect failure \u2192 wait \u2192 retry \u2192 repeat or succeed\n5. Add `--retry-timeout` and `--no-retry` flags to `cub pr` command in `cub.cli.pr`\n6. Integrate check monitoring into session hooks to log retry history to session forensics\n7. Add check status and retry attempts to `cub.core.ledger` models for session ledger recording\n8. Write integration tests for check detection, retry triggering, and rate limit handling", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313550Z", "updated_at": "2026-01-29T01:58:07.466540Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.7", "title": "Ensure plan.json is created at pipeline start", "status": "open", "priority": "P2", "type": "task", "description": "plan.json is currently written during the orient stage rather than when the plan context is first created. If orient fails before calling ctx.save_plan(), there's no plan.json file to recover from. This reduces fault tolerance and prevents resumption in cases where early stage failures occur. Creating plan.json immediately after context initialization ensures a persistent checkpoint exists from the start.\n\n**Implementation Steps:**\n1. Locate PipelineConfig.run() and identify where PlanContext is created or loaded\n2. Add ctx.save_plan() call immediately after plan context initialization, before any stage runs\n3. Verify orient stage's existing ctx.save_plan() call at line 484 doesn't duplicate writes\n4. Run full test suite to ensure pipeline behavior remains unchanged\n5. Verify plan.json exists at project root before any stage execution begins", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313563Z", "updated_at": "2026-01-29T01:58:07.467200Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.8", "title": "Remove deprecated cub:triage and cub:plan skill commands", "status": "open", "priority": "P2", "type": "task", "description": "The cub:triage and cub:plan skill commands are no longer needed and create maintenance overhead. These commands were part of an earlier planning pipeline that has been superseded by other tooling. Removing them will reduce code complexity, eliminate dead skill registrations, and prevent confusion about available planning commands. This is a straightforward cleanup task with no backward compatibility concerns.\n\n**Implementation Steps:**\n1. Search the codebase for all references to `cub:triage` and `cub:plan` (skill definitions, command registrations, templates)\n2. Remove skill command definitions for `cub:triage` and `cub:plan` from skill/command template files\n3. Remove any `.claude/commands` configuration entries that register these skills\n4. Remove skill routing and registration code that supports these commands\n5. Search for any remaining references (comments, documentation, imports) and clean them up\n6. Verify no broken references remain by grepping for \"cub:triage\" and \"cub:plan\" across the codebase", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313572Z", "updated_at": "2026-01-29T01:58:07.467757Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "open", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313582Z", "updated_at": "2026-01-29T01:58:07.468436Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "open", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313625Z", "updated_at": "2026-01-29T01:58:07.462661Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "open", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313643Z", "updated_at": "2026-01-29T01:58:07.463381Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "secondary_result": [{"id": "cub-n6x.5", "title": "Check completed steps before launching architect in plan run", "status": "open", "priority": "P2", "type": "task", "description": "The `cub plan run` command currently assumes architect should launch automatically upon exit, but this breaks workflows where earlier steps are incomplete or partially completed. Users need visibility into which prep pipeline steps (triage, architect, plan, bootstrap) have already been done so they can decide whether to continue, re-run a step, or skip ahead. The system should detect artifacts from previous runs and guide users through the pipeline intelligently rather than blindly advancing.\n\n**Implementation Steps:**\n1. Create a step detection function that checks for completion artifacts (triage markdown files, architect outputs, plan.jsonl, beads state) in the project\n2. Display a summary table showing which prep steps are completed, in-progress, or incomplete when exiting plan run\n3. Prompt the user with options: continue to next incomplete step, re-run a specific step, or exit\n4. Route the selected action back to the appropriate plan subcommand (orient, architect, plan, bootstrap)\n5. Handle edge cases: partial architect completion, missing intermediate steps, corrupted artifacts", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212245", "updated_at": "2026-01-29T01:58:08.212246", "closed_at": null, "acceptance_criteria": ["Detects completion status of all four prep steps via artifact inspection", "Displays step summary before prompting for next action", "Offers user choice to continue, re-run, or exit (not forced into architect)", "Does not launch architect if earlier steps are incomplete", "Gracefully handles partial completion and corrupted artifacts"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.6", "title": "Add build failure detection and retry logic to cub pr", "status": "open", "priority": "P2", "type": "task", "description": "The `cub pr` command currently creates pull requests but has no visibility into CI check status or automated recovery from transient failures. This means flaky tests, rate limits, and temporary service issues require manual intervention, interrupting autonomous workflows. Adding automated failure detection and retry logic would enable self-healing PR workflows that handle common transient failures without manual handoff.\n\n**Implementation Steps:**\n1. Create `cub.core.services.pr_monitor` module to implement check polling and failure detection via `gh pr checks`\n2. Add retry configuration model to `cub.core.config` with timeout duration and max retry count parameters\n3. Extend `LaunchService` to support background PR monitoring while harness is active\n4. Implement check state machine: poll \u2192 detect failure \u2192 wait \u2192 retry \u2192 repeat or succeed\n5. Add `--retry-timeout` and `--no-retry` flags to `cub pr` command in `cub.cli.pr`\n6. Integrate check monitoring into session hooks to log retry history to session forensics\n7. Add check status and retry attempts to `cub.core.ledger` models for session ledger recording\n8. Write integration tests for check detection, retry triggering, and rate limit handling", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212294", "updated_at": "2026-01-29T01:58:08.212295", "closed_at": null, "acceptance_criteria": ["`cub pr` detects PR check failures via `gh pr checks` polling", "Automatic retry timer (default 10 minutes, configurable) activates when failures detected", "`--retry-timeout` flag accepts duration strings (e.g., `5m`, `30s`)", "`--no-retry` flag disables automatic retry behavior for all check types", "Failed checks are re-triggered via `gh pr checks --rerun` or equivalent", "Session forensics (`.cub/ledger/forensics/{session_id}.jsonl`) logs all check statuses and retry attempts with timestamps", "Max retries (default 3) prevents infinite loop; stops retrying after limit reached", "Handles `gh` API rate limiting and network errors gracefully with exponential backoff", "Works with both draft PRs (`--draft`) and regular PRs"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.7", "title": "Ensure plan.json is created at pipeline start", "status": "open", "priority": "P2", "type": "task", "description": "plan.json is currently written during the orient stage rather than when the plan context is first created. If orient fails before calling ctx.save_plan(), there's no plan.json file to recover from. This reduces fault tolerance and prevents resumption in cases where early stage failures occur. Creating plan.json immediately after context initialization ensures a persistent checkpoint exists from the start.\n\n**Implementation Steps:**\n1. Locate PipelineConfig.run() and identify where PlanContext is created or loaded\n2. Add ctx.save_plan() call immediately after plan context initialization, before any stage runs\n3. Verify orient stage's existing ctx.save_plan() call at line 484 doesn't duplicate writes\n4. Run full test suite to ensure pipeline behavior remains unchanged\n5. Verify plan.json exists at project root before any stage execution begins", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212336", "updated_at": "2026-01-29T01:58:08.212336", "closed_at": null, "acceptance_criteria": ["plan.json is created immediately after plan context initialization", "plan.json exists before orient stage executes", "All existing tests pass with no behavioral changes", "Plan data is recoverable/resumable even if orient fails early"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.8", "title": "Remove deprecated cub:triage and cub:plan skill commands", "status": "open", "priority": "P2", "type": "task", "description": "The cub:triage and cub:plan skill commands are no longer needed and create maintenance overhead. These commands were part of an earlier planning pipeline that has been superseded by other tooling. Removing them will reduce code complexity, eliminate dead skill registrations, and prevent confusion about available planning commands. This is a straightforward cleanup task with no backward compatibility concerns.\n\n**Implementation Steps:**\n1. Search the codebase for all references to `cub:triage` and `cub:plan` (skill definitions, command registrations, templates)\n2. Remove skill command definitions for `cub:triage` and `cub:plan` from skill/command template files\n3. Remove any `.claude/commands` configuration entries that register these skills\n4. Remove skill routing and registration code that supports these commands\n5. Search for any remaining references (comments, documentation, imports) and clean them up\n6. Verify no broken references remain by grepping for \"cub:triage\" and \"cub:plan\" across the codebase", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212370", "updated_at": "2026-01-29T01:58:08.212371", "closed_at": null, "acceptance_criteria": ["`cub:triage` no longer appears in any templates, configuration files, or code", "`cub:plan` no longer appears in any templates, configuration files, or code", "All skill registration/routing code that handled these commands is removed", "Remaining skills and commands continue to function correctly (verify with `cub --help`)", "No broken imports or dangling references to removed skill definitions", "Git status shows only the intended removals (no accidental changes)"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "open", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212407", "updated_at": "2026-01-29T01:58:08.212407", "closed_at": null, "acceptance_criteria": ["Headline box displays harness backend name when available", "Headline box displays model name when available", "Other explicit configuration specs are included if applicable", "Layout remains readable without excessive line wrapping", "Unconfigured specs are omitted gracefully (no \"None\", \"N/A\", or blank values shown)", "Changes work in both `cub run` and direct session contexts", "Existing tests pass and new tests cover headline rendering scenarios"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "open", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212440", "updated_at": "2026-01-29T01:58:08.212440", "closed_at": null, "acceptance_criteria": ["Each streamed message is followed by exactly one newline character", "Output is readable with clear visual separation between consecutive messages", "Non-stream output (`cub run` without `--stream`) is unaffected", "Works correctly with all harness backends (claude, codex, gemini, opencode)", "No duplicate blank lines or extra whitespace introduced", "Existing tests still pass and new behavior is tested"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "open", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212476", "updated_at": "2026-01-29T01:58:08.212477", "closed_at": null, "acceptance_criteria": ["Progress indicator displays \"[current/total]\" format for each item", "Item title or brief summary appears alongside progress update", "Updates appear incrementally as each item completes processing", "No measurable latency increase compared to current implementation", "Output uses Rich console consistent with other cub commands", "Works correctly with punchlist files of varying sizes (3-50+ items)"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "difference_summary": "Task 0 (cub-n6x.10): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 1 (cub-n6x.11): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 2 (cub-n6x.5): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 3 (cub-n6x.6): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 4 (cub-n6x.7): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 5 (cub-n6x.8): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 6 (cub-n6x.9): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x"}
{"timestamp": "2026-01-29T02:30:55.693912", "operation": "get_task", "task_id": "cub-n6x.5", "primary_result": {"id": "cub-n6x.5", "title": "Check completed steps before launching architect in plan run", "status": "open", "priority": "P2", "type": "task", "description": "The `cub plan run` command currently assumes architect should launch automatically upon exit, but this breaks workflows where earlier steps are incomplete or partially completed. Users need visibility into which prep pipeline steps (triage, architect, plan, bootstrap) have already been done so they can decide whether to continue, re-run a step, or skip ahead. The system should detect artifacts from previous runs and guide users through the pipeline intelligently rather than blindly advancing.\n\n**Implementation Steps:**\n1. Create a step detection function that checks for completion artifacts (triage markdown files, architect outputs, plan.jsonl, beads state) in the project\n2. Display a summary table showing which prep steps are completed, in-progress, or incomplete when exiting plan run\n3. Prompt the user with options: continue to next incomplete step, re-run a specific step, or exit\n4. Route the selected action back to the appropriate plan subcommand (orient, architect, plan, bootstrap)\n5. Handle edge cases: partial architect completion, missing intermediate steps, corrupted artifacts", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313540Z", "updated_at": "2026-01-29T01:58:07.465964Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.5", "title": "Check completed steps before launching architect in plan run", "status": "open", "priority": "P2", "type": "task", "description": "The `cub plan run` command currently assumes architect should launch automatically upon exit, but this breaks workflows where earlier steps are incomplete or partially completed. Users need visibility into which prep pipeline steps (triage, architect, plan, bootstrap) have already been done so they can decide whether to continue, re-run a step, or skip ahead. The system should detect artifacts from previous runs and guide users through the pipeline intelligently rather than blindly advancing.\n\n**Implementation Steps:**\n1. Create a step detection function that checks for completion artifacts (triage markdown files, architect outputs, plan.jsonl, beads state) in the project\n2. Display a summary table showing which prep steps are completed, in-progress, or incomplete when exiting plan run\n3. Prompt the user with options: continue to next incomplete step, re-run a specific step, or exit\n4. Route the selected action back to the appropriate plan subcommand (orient, architect, plan, bootstrap)\n5. Handle edge cases: partial architect completion, missing intermediate steps, corrupted artifacts", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212245", "updated_at": "2026-01-29T01:58:08.212246", "closed_at": null, "acceptance_criteria": ["Detects completion status of all four prep steps via artifact inspection", "Displays step summary before prompting for next action", "Offers user choice to continue, re-run, or exit (not forced into architect)", "Does not launch architect if earlier steps are incomplete", "Gracefully handles partial completion and corrupted artifacts"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:30:55.818967", "operation": "update_task", "task_id": "cub-n6x.5", "primary_result": {"id": "cub-n6x.5", "title": "Check completed steps before launching architect in plan run", "status": "in_progress", "priority": "P2", "type": "task", "description": "The `cub plan run` command currently assumes architect should launch automatically upon exit, but this breaks workflows where earlier steps are incomplete or partially completed. Users need visibility into which prep pipeline steps (triage, architect, plan, bootstrap) have already been done so they can decide whether to continue, re-run a step, or skip ahead. The system should detect artifacts from previous runs and guide users through the pipeline intelligently rather than blindly advancing.\n\n**Implementation Steps:**\n1. Create a step detection function that checks for completion artifacts (triage markdown files, architect outputs, plan.jsonl, beads state) in the project\n2. Display a summary table showing which prep steps are completed, in-progress, or incomplete when exiting plan run\n3. Prompt the user with options: continue to next incomplete step, re-run a specific step, or exit\n4. Route the selected action back to the appropriate plan subcommand (orient, architect, plan, bootstrap)\n5. Handle edge cases: partial architect completion, missing intermediate steps, corrupted artifacts", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313540Z", "updated_at": "2026-01-29T02:30:55.755848Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.5", "title": "Check completed steps before launching architect in plan run", "status": "in_progress", "priority": "P2", "type": "task", "description": "The `cub plan run` command currently assumes architect should launch automatically upon exit, but this breaks workflows where earlier steps are incomplete or partially completed. Users need visibility into which prep pipeline steps (triage, architect, plan, bootstrap) have already been done so they can decide whether to continue, re-run a step, or skip ahead. The system should detect artifacts from previous runs and guide users through the pipeline intelligently rather than blindly advancing.\n\n**Implementation Steps:**\n1. Create a step detection function that checks for completion artifacts (triage markdown files, architect outputs, plan.jsonl, beads state) in the project\n2. Display a summary table showing which prep steps are completed, in-progress, or incomplete when exiting plan run\n3. Prompt the user with options: continue to next incomplete step, re-run a specific step, or exit\n4. Route the selected action back to the appropriate plan subcommand (orient, architect, plan, bootstrap)\n5. Handle edge cases: partial architect completion, missing intermediate steps, corrupted artifacts", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212245", "updated_at": "2026-01-29T02:30:55.816391", "closed_at": null, "acceptance_criteria": ["Detects completion status of all four prep steps via artifact inspection", "Displays step summary before prompting for next action", "Offers user choice to continue, re-run, or exit (not forced into architect)", "Does not launch architect if earlier steps are incomplete", "Gracefully handles partial completion and corrupted artifacts"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:42:23.990705", "operation": "get_task", "task_id": "cub-n6x.5", "primary_result": {"id": "cub-n6x.5", "title": "Check completed steps before launching architect in plan run", "status": "closed", "priority": "P2", "type": "task", "description": "The `cub plan run` command currently assumes architect should launch automatically upon exit, but this breaks workflows where earlier steps are incomplete or partially completed. Users need visibility into which prep pipeline steps (triage, architect, plan, bootstrap) have already been done so they can decide whether to continue, re-run a step, or skip ahead. The system should detect artifacts from previous runs and guide users through the pipeline intelligently rather than blindly advancing.\n\n**Implementation Steps:**\n1. Create a step detection function that checks for completion artifacts (triage markdown files, architect outputs, plan.jsonl, beads state) in the project\n2. Display a summary table showing which prep steps are completed, in-progress, or incomplete when exiting plan run\n3. Prompt the user with options: continue to next incomplete step, re-run a specific step, or exit\n4. Route the selected action back to the appropriate plan subcommand (orient, architect, plan, bootstrap)\n5. Handle edge cases: partial architect completion, missing intermediate steps, corrupted artifacts", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313540Z", "updated_at": "2026-01-29T02:41:44.748480Z", "closed_at": "2026-01-29T02:41:44.748480Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.5", "title": "Check completed steps before launching architect in plan run", "status": "in_progress", "priority": "P2", "type": "task", "description": "The `cub plan run` command currently assumes architect should launch automatically upon exit, but this breaks workflows where earlier steps are incomplete or partially completed. Users need visibility into which prep pipeline steps (triage, architect, plan, bootstrap) have already been done so they can decide whether to continue, re-run a step, or skip ahead. The system should detect artifacts from previous runs and guide users through the pipeline intelligently rather than blindly advancing.\n\n**Implementation Steps:**\n1. Create a step detection function that checks for completion artifacts (triage markdown files, architect outputs, plan.jsonl, beads state) in the project\n2. Display a summary table showing which prep steps are completed, in-progress, or incomplete when exiting plan run\n3. Prompt the user with options: continue to next incomplete step, re-run a specific step, or exit\n4. Route the selected action back to the appropriate plan subcommand (orient, architect, plan, bootstrap)\n5. Handle edge cases: partial architect completion, missing intermediate steps, corrupted artifacts", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212245", "updated_at": "2026-01-29T02:30:55.816391", "closed_at": null, "acceptance_criteria": ["Detects completion status of all four prep steps via artifact inspection", "Displays step summary before prompting for next action", "Offers user choice to continue, re-run, or exit (not forced into architect)", "Does not launch architect if earlier steps are incomplete", "Gracefully handles partial completion and corrupted artifacts"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:42:24.081384", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 42, "open": 41, "in_progress": 1, "closed": 0}, "secondary_result": {"total": 41, "open": 36, "in_progress": 1, "closed": 4}, "difference_summary": "total: 42 != 41; open: 41 != 36; closed: 0 != 4"}
{"timestamp": "2026-01-29T02:42:24.258271", "operation": "close_task", "task_id": "cub-n6x.5", "primary_result": {"id": "cub-n6x.5", "title": "Check completed steps before launching architect in plan run", "status": "closed", "priority": "P2", "type": "task", "description": "The `cub plan run` command currently assumes architect should launch automatically upon exit, but this breaks workflows where earlier steps are incomplete or partially completed. Users need visibility into which prep pipeline steps (triage, architect, plan, bootstrap) have already been done so they can decide whether to continue, re-run a step, or skip ahead. The system should detect artifacts from previous runs and guide users through the pipeline intelligently rather than blindly advancing.\n\n**Implementation Steps:**\n1. Create a step detection function that checks for completion artifacts (triage markdown files, architect outputs, plan.jsonl, beads state) in the project\n2. Display a summary table showing which prep steps are completed, in-progress, or incomplete when exiting plan run\n3. Prompt the user with options: continue to next incomplete step, re-run a specific step, or exit\n4. Route the selected action back to the appropriate plan subcommand (orient, architect, plan, bootstrap)\n5. Handle edge cases: partial architect completion, missing intermediate steps, corrupted artifacts", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313540Z", "updated_at": "2026-01-29T02:42:24.150896Z", "closed_at": "2026-01-29T02:42:24.150896Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.5", "title": "Check completed steps before launching architect in plan run", "status": "closed", "priority": "P2", "type": "task", "description": "The `cub plan run` command currently assumes architect should launch automatically upon exit, but this breaks workflows where earlier steps are incomplete or partially completed. Users need visibility into which prep pipeline steps (triage, architect, plan, bootstrap) have already been done so they can decide whether to continue, re-run a step, or skip ahead. The system should detect artifacts from previous runs and guide users through the pipeline intelligently rather than blindly advancing.\n\n**Implementation Steps:**\n1. Create a step detection function that checks for completion artifacts (triage markdown files, architect outputs, plan.jsonl, beads state) in the project\n2. Display a summary table showing which prep steps are completed, in-progress, or incomplete when exiting plan run\n3. Prompt the user with options: continue to next incomplete step, re-run a specific step, or exit\n4. Route the selected action back to the appropriate plan subcommand (orient, architect, plan, bootstrap)\n5. Handle edge cases: partial architect completion, missing intermediate steps, corrupted artifacts", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212245", "updated_at": "2026-01-29T02:42:24.253336", "closed_at": "2026-01-29T02:42:24.253329", "acceptance_criteria": ["Detects completion status of all four prep steps via artifact inspection", "Displays step summary before prompting for next action", "Offers user choice to continue, re-run, or exit (not forced into architect)", "Does not launch architect if earlier steps are incomplete", "Gracefully handles partial completion and corrupted artifacts"], "notes": "[Closed: 2026-01-29T02:42:24.253339] Completed by autonomous execution", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:42:24.353908", "operation": "get_task", "task_id": "cub-n6x.5", "primary_result": {"id": "cub-n6x.5", "title": "Check completed steps before launching architect in plan run", "status": "closed", "priority": "P2", "type": "task", "description": "The `cub plan run` command currently assumes architect should launch automatically upon exit, but this breaks workflows where earlier steps are incomplete or partially completed. Users need visibility into which prep pipeline steps (triage, architect, plan, bootstrap) have already been done so they can decide whether to continue, re-run a step, or skip ahead. The system should detect artifacts from previous runs and guide users through the pipeline intelligently rather than blindly advancing.\n\n**Implementation Steps:**\n1. Create a step detection function that checks for completion artifacts (triage markdown files, architect outputs, plan.jsonl, beads state) in the project\n2. Display a summary table showing which prep steps are completed, in-progress, or incomplete when exiting plan run\n3. Prompt the user with options: continue to next incomplete step, re-run a specific step, or exit\n4. Route the selected action back to the appropriate plan subcommand (orient, architect, plan, bootstrap)\n5. Handle edge cases: partial architect completion, missing intermediate steps, corrupted artifacts", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313540Z", "updated_at": "2026-01-29T02:42:24.150896Z", "closed_at": "2026-01-29T02:42:24.150896Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.5", "title": "Check completed steps before launching architect in plan run", "status": "closed", "priority": "P2", "type": "task", "description": "The `cub plan run` command currently assumes architect should launch automatically upon exit, but this breaks workflows where earlier steps are incomplete or partially completed. Users need visibility into which prep pipeline steps (triage, architect, plan, bootstrap) have already been done so they can decide whether to continue, re-run a step, or skip ahead. The system should detect artifacts from previous runs and guide users through the pipeline intelligently rather than blindly advancing.\n\n**Implementation Steps:**\n1. Create a step detection function that checks for completion artifacts (triage markdown files, architect outputs, plan.jsonl, beads state) in the project\n2. Display a summary table showing which prep steps are completed, in-progress, or incomplete when exiting plan run\n3. Prompt the user with options: continue to next incomplete step, re-run a specific step, or exit\n4. Route the selected action back to the appropriate plan subcommand (orient, architect, plan, bootstrap)\n5. Handle edge cases: partial architect completion, missing intermediate steps, corrupted artifacts", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212245", "updated_at": "2026-01-29T02:42:24.253336", "closed_at": "2026-01-29T02:42:24.253329", "acceptance_criteria": ["Detects completion status of all four prep steps via artifact inspection", "Displays step summary before prompting for next action", "Offers user choice to continue, re-run, or exit (not forced into architect)", "Does not launch architect if earlier steps are incomplete", "Gracefully handles partial completion and corrupted artifacts"], "notes": "[Closed: 2026-01-29T02:42:24.253339] Completed by autonomous execution", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:42:36.892049", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-n6x.6", "title": "Add build failure detection and retry logic to cub pr", "status": "open", "priority": "P2", "type": "task", "description": "The `cub pr` command currently creates pull requests but has no visibility into CI check status or automated recovery from transient failures. This means flaky tests, rate limits, and temporary service issues require manual intervention, interrupting autonomous workflows. Adding automated failure detection and retry logic would enable self-healing PR workflows that handle common transient failures without manual handoff.\n\n**Implementation Steps:**\n1. Create `cub.core.services.pr_monitor` module to implement check polling and failure detection via `gh pr checks`\n2. Add retry configuration model to `cub.core.config` with timeout duration and max retry count parameters\n3. Extend `LaunchService` to support background PR monitoring while harness is active\n4. Implement check state machine: poll \u2192 detect failure \u2192 wait \u2192 retry \u2192 repeat or succeed\n5. Add `--retry-timeout` and `--no-retry` flags to `cub pr` command in `cub.cli.pr`\n6. Integrate check monitoring into session hooks to log retry history to session forensics\n7. Add check status and retry attempts to `cub.core.ledger` models for session ledger recording\n8. Write integration tests for check detection, retry triggering, and rate limit handling", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313550Z", "updated_at": "2026-01-29T01:58:07.466540Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.7", "title": "Ensure plan.json is created at pipeline start", "status": "open", "priority": "P2", "type": "task", "description": "plan.json is currently written during the orient stage rather than when the plan context is first created. If orient fails before calling ctx.save_plan(), there's no plan.json file to recover from. This reduces fault tolerance and prevents resumption in cases where early stage failures occur. Creating plan.json immediately after context initialization ensures a persistent checkpoint exists from the start.\n\n**Implementation Steps:**\n1. Locate PipelineConfig.run() and identify where PlanContext is created or loaded\n2. Add ctx.save_plan() call immediately after plan context initialization, before any stage runs\n3. Verify orient stage's existing ctx.save_plan() call at line 484 doesn't duplicate writes\n4. Run full test suite to ensure pipeline behavior remains unchanged\n5. Verify plan.json exists at project root before any stage execution begins", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313563Z", "updated_at": "2026-01-29T01:58:07.467200Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.8", "title": "Remove deprecated cub:triage and cub:plan skill commands", "status": "open", "priority": "P2", "type": "task", "description": "The cub:triage and cub:plan skill commands are no longer needed and create maintenance overhead. These commands were part of an earlier planning pipeline that has been superseded by other tooling. Removing them will reduce code complexity, eliminate dead skill registrations, and prevent confusion about available planning commands. This is a straightforward cleanup task with no backward compatibility concerns.\n\n**Implementation Steps:**\n1. Search the codebase for all references to `cub:triage` and `cub:plan` (skill definitions, command registrations, templates)\n2. Remove skill command definitions for `cub:triage` and `cub:plan` from skill/command template files\n3. Remove any `.claude/commands` configuration entries that register these skills\n4. Remove skill routing and registration code that supports these commands\n5. Search for any remaining references (comments, documentation, imports) and clean them up\n6. Verify no broken references remain by grepping for \"cub:triage\" and \"cub:plan\" across the codebase", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313572Z", "updated_at": "2026-01-29T01:58:07.467757Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "open", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313582Z", "updated_at": "2026-01-29T01:58:07.468436Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "open", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313625Z", "updated_at": "2026-01-29T01:58:07.462661Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "open", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313643Z", "updated_at": "2026-01-29T01:58:07.463381Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "secondary_result": [{"id": "cub-n6x.6", "title": "Add build failure detection and retry logic to cub pr", "status": "open", "priority": "P2", "type": "task", "description": "The `cub pr` command currently creates pull requests but has no visibility into CI check status or automated recovery from transient failures. This means flaky tests, rate limits, and temporary service issues require manual intervention, interrupting autonomous workflows. Adding automated failure detection and retry logic would enable self-healing PR workflows that handle common transient failures without manual handoff.\n\n**Implementation Steps:**\n1. Create `cub.core.services.pr_monitor` module to implement check polling and failure detection via `gh pr checks`\n2. Add retry configuration model to `cub.core.config` with timeout duration and max retry count parameters\n3. Extend `LaunchService` to support background PR monitoring while harness is active\n4. Implement check state machine: poll \u2192 detect failure \u2192 wait \u2192 retry \u2192 repeat or succeed\n5. Add `--retry-timeout` and `--no-retry` flags to `cub pr` command in `cub.cli.pr`\n6. Integrate check monitoring into session hooks to log retry history to session forensics\n7. Add check status and retry attempts to `cub.core.ledger` models for session ledger recording\n8. Write integration tests for check detection, retry triggering, and rate limit handling", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212294", "updated_at": "2026-01-29T01:58:08.212295", "closed_at": null, "acceptance_criteria": ["`cub pr` detects PR check failures via `gh pr checks` polling", "Automatic retry timer (default 10 minutes, configurable) activates when failures detected", "`--retry-timeout` flag accepts duration strings (e.g., `5m`, `30s`)", "`--no-retry` flag disables automatic retry behavior for all check types", "Failed checks are re-triggered via `gh pr checks --rerun` or equivalent", "Session forensics (`.cub/ledger/forensics/{session_id}.jsonl`) logs all check statuses and retry attempts with timestamps", "Max retries (default 3) prevents infinite loop; stops retrying after limit reached", "Handles `gh` API rate limiting and network errors gracefully with exponential backoff", "Works with both draft PRs (`--draft`) and regular PRs"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.7", "title": "Ensure plan.json is created at pipeline start", "status": "open", "priority": "P2", "type": "task", "description": "plan.json is currently written during the orient stage rather than when the plan context is first created. If orient fails before calling ctx.save_plan(), there's no plan.json file to recover from. This reduces fault tolerance and prevents resumption in cases where early stage failures occur. Creating plan.json immediately after context initialization ensures a persistent checkpoint exists from the start.\n\n**Implementation Steps:**\n1. Locate PipelineConfig.run() and identify where PlanContext is created or loaded\n2. Add ctx.save_plan() call immediately after plan context initialization, before any stage runs\n3. Verify orient stage's existing ctx.save_plan() call at line 484 doesn't duplicate writes\n4. Run full test suite to ensure pipeline behavior remains unchanged\n5. Verify plan.json exists at project root before any stage execution begins", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212336", "updated_at": "2026-01-29T01:58:08.212336", "closed_at": null, "acceptance_criteria": ["plan.json is created immediately after plan context initialization", "plan.json exists before orient stage executes", "All existing tests pass with no behavioral changes", "Plan data is recoverable/resumable even if orient fails early"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.8", "title": "Remove deprecated cub:triage and cub:plan skill commands", "status": "open", "priority": "P2", "type": "task", "description": "The cub:triage and cub:plan skill commands are no longer needed and create maintenance overhead. These commands were part of an earlier planning pipeline that has been superseded by other tooling. Removing them will reduce code complexity, eliminate dead skill registrations, and prevent confusion about available planning commands. This is a straightforward cleanup task with no backward compatibility concerns.\n\n**Implementation Steps:**\n1. Search the codebase for all references to `cub:triage` and `cub:plan` (skill definitions, command registrations, templates)\n2. Remove skill command definitions for `cub:triage` and `cub:plan` from skill/command template files\n3. Remove any `.claude/commands` configuration entries that register these skills\n4. Remove skill routing and registration code that supports these commands\n5. Search for any remaining references (comments, documentation, imports) and clean them up\n6. Verify no broken references remain by grepping for \"cub:triage\" and \"cub:plan\" across the codebase", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212370", "updated_at": "2026-01-29T01:58:08.212371", "closed_at": null, "acceptance_criteria": ["`cub:triage` no longer appears in any templates, configuration files, or code", "`cub:plan` no longer appears in any templates, configuration files, or code", "All skill registration/routing code that handled these commands is removed", "Remaining skills and commands continue to function correctly (verify with `cub --help`)", "No broken imports or dangling references to removed skill definitions", "Git status shows only the intended removals (no accidental changes)"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "open", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212407", "updated_at": "2026-01-29T01:58:08.212407", "closed_at": null, "acceptance_criteria": ["Headline box displays harness backend name when available", "Headline box displays model name when available", "Other explicit configuration specs are included if applicable", "Layout remains readable without excessive line wrapping", "Unconfigured specs are omitted gracefully (no \"None\", \"N/A\", or blank values shown)", "Changes work in both `cub run` and direct session contexts", "Existing tests pass and new tests cover headline rendering scenarios"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "open", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212440", "updated_at": "2026-01-29T01:58:08.212440", "closed_at": null, "acceptance_criteria": ["Each streamed message is followed by exactly one newline character", "Output is readable with clear visual separation between consecutive messages", "Non-stream output (`cub run` without `--stream`) is unaffected", "Works correctly with all harness backends (claude, codex, gemini, opencode)", "No duplicate blank lines or extra whitespace introduced", "Existing tests still pass and new behavior is tested"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "open", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212476", "updated_at": "2026-01-29T01:58:08.212477", "closed_at": null, "acceptance_criteria": ["Progress indicator displays \"[current/total]\" format for each item", "Item title or brief summary appears alongside progress update", "Updates appear incrementally as each item completes processing", "No measurable latency increase compared to current implementation", "Output uses Rich console consistent with other cub commands", "Works correctly with punchlist files of varying sizes (3-50+ items)"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "difference_summary": "Task 0 (cub-n6x.10): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 1 (cub-n6x.11): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 2 (cub-n6x.6): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 3 (cub-n6x.7): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 4 (cub-n6x.8): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 5 (cub-n6x.9): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x"}
{"timestamp": "2026-01-29T02:42:36.943391", "operation": "get_task", "task_id": "cub-n6x.6", "primary_result": {"id": "cub-n6x.6", "title": "Add build failure detection and retry logic to cub pr", "status": "open", "priority": "P2", "type": "task", "description": "The `cub pr` command currently creates pull requests but has no visibility into CI check status or automated recovery from transient failures. This means flaky tests, rate limits, and temporary service issues require manual intervention, interrupting autonomous workflows. Adding automated failure detection and retry logic would enable self-healing PR workflows that handle common transient failures without manual handoff.\n\n**Implementation Steps:**\n1. Create `cub.core.services.pr_monitor` module to implement check polling and failure detection via `gh pr checks`\n2. Add retry configuration model to `cub.core.config` with timeout duration and max retry count parameters\n3. Extend `LaunchService` to support background PR monitoring while harness is active\n4. Implement check state machine: poll \u2192 detect failure \u2192 wait \u2192 retry \u2192 repeat or succeed\n5. Add `--retry-timeout` and `--no-retry` flags to `cub pr` command in `cub.cli.pr`\n6. Integrate check monitoring into session hooks to log retry history to session forensics\n7. Add check status and retry attempts to `cub.core.ledger` models for session ledger recording\n8. Write integration tests for check detection, retry triggering, and rate limit handling", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313550Z", "updated_at": "2026-01-29T01:58:07.466540Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.6", "title": "Add build failure detection and retry logic to cub pr", "status": "open", "priority": "P2", "type": "task", "description": "The `cub pr` command currently creates pull requests but has no visibility into CI check status or automated recovery from transient failures. This means flaky tests, rate limits, and temporary service issues require manual intervention, interrupting autonomous workflows. Adding automated failure detection and retry logic would enable self-healing PR workflows that handle common transient failures without manual handoff.\n\n**Implementation Steps:**\n1. Create `cub.core.services.pr_monitor` module to implement check polling and failure detection via `gh pr checks`\n2. Add retry configuration model to `cub.core.config` with timeout duration and max retry count parameters\n3. Extend `LaunchService` to support background PR monitoring while harness is active\n4. Implement check state machine: poll \u2192 detect failure \u2192 wait \u2192 retry \u2192 repeat or succeed\n5. Add `--retry-timeout` and `--no-retry` flags to `cub pr` command in `cub.cli.pr`\n6. Integrate check monitoring into session hooks to log retry history to session forensics\n7. Add check status and retry attempts to `cub.core.ledger` models for session ledger recording\n8. Write integration tests for check detection, retry triggering, and rate limit handling", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212294", "updated_at": "2026-01-29T01:58:08.212295", "closed_at": null, "acceptance_criteria": ["`cub pr` detects PR check failures via `gh pr checks` polling", "Automatic retry timer (default 10 minutes, configurable) activates when failures detected", "`--retry-timeout` flag accepts duration strings (e.g., `5m`, `30s`)", "`--no-retry` flag disables automatic retry behavior for all check types", "Failed checks are re-triggered via `gh pr checks --rerun` or equivalent", "Session forensics (`.cub/ledger/forensics/{session_id}.jsonl`) logs all check statuses and retry attempts with timestamps", "Max retries (default 3) prevents infinite loop; stops retrying after limit reached", "Handles `gh` API rate limiting and network errors gracefully with exponential backoff", "Works with both draft PRs (`--draft`) and regular PRs"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:42:37.133717", "operation": "update_task", "task_id": "cub-n6x.6", "primary_result": {"id": "cub-n6x.6", "title": "Add build failure detection and retry logic to cub pr", "status": "in_progress", "priority": "P2", "type": "task", "description": "The `cub pr` command currently creates pull requests but has no visibility into CI check status or automated recovery from transient failures. This means flaky tests, rate limits, and temporary service issues require manual intervention, interrupting autonomous workflows. Adding automated failure detection and retry logic would enable self-healing PR workflows that handle common transient failures without manual handoff.\n\n**Implementation Steps:**\n1. Create `cub.core.services.pr_monitor` module to implement check polling and failure detection via `gh pr checks`\n2. Add retry configuration model to `cub.core.config` with timeout duration and max retry count parameters\n3. Extend `LaunchService` to support background PR monitoring while harness is active\n4. Implement check state machine: poll \u2192 detect failure \u2192 wait \u2192 retry \u2192 repeat or succeed\n5. Add `--retry-timeout` and `--no-retry` flags to `cub pr` command in `cub.cli.pr`\n6. Integrate check monitoring into session hooks to log retry history to session forensics\n7. Add check status and retry attempts to `cub.core.ledger` models for session ledger recording\n8. Write integration tests for check detection, retry triggering, and rate limit handling", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313550Z", "updated_at": "2026-01-29T02:42:37.025781Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.6", "title": "Add build failure detection and retry logic to cub pr", "status": "in_progress", "priority": "P2", "type": "task", "description": "The `cub pr` command currently creates pull requests but has no visibility into CI check status or automated recovery from transient failures. This means flaky tests, rate limits, and temporary service issues require manual intervention, interrupting autonomous workflows. Adding automated failure detection and retry logic would enable self-healing PR workflows that handle common transient failures without manual handoff.\n\n**Implementation Steps:**\n1. Create `cub.core.services.pr_monitor` module to implement check polling and failure detection via `gh pr checks`\n2. Add retry configuration model to `cub.core.config` with timeout duration and max retry count parameters\n3. Extend `LaunchService` to support background PR monitoring while harness is active\n4. Implement check state machine: poll \u2192 detect failure \u2192 wait \u2192 retry \u2192 repeat or succeed\n5. Add `--retry-timeout` and `--no-retry` flags to `cub pr` command in `cub.cli.pr`\n6. Integrate check monitoring into session hooks to log retry history to session forensics\n7. Add check status and retry attempts to `cub.core.ledger` models for session ledger recording\n8. Write integration tests for check detection, retry triggering, and rate limit handling", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212294", "updated_at": "2026-01-29T02:42:37.130318", "closed_at": null, "acceptance_criteria": ["`cub pr` detects PR check failures via `gh pr checks` polling", "Automatic retry timer (default 10 minutes, configurable) activates when failures detected", "`--retry-timeout` flag accepts duration strings (e.g., `5m`, `30s`)", "`--no-retry` flag disables automatic retry behavior for all check types", "Failed checks are re-triggered via `gh pr checks --rerun` or equivalent", "Session forensics (`.cub/ledger/forensics/{session_id}.jsonl`) logs all check statuses and retry attempts with timestamps", "Max retries (default 3) prevents infinite loop; stops retrying after limit reached", "Handles `gh` API rate limiting and network errors gracefully with exponential backoff", "Works with both draft PRs (`--draft`) and regular PRs"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:58:55.765327", "operation": "get_task", "task_id": "cub-n6x.6", "primary_result": {"id": "cub-n6x.6", "title": "Add build failure detection and retry logic to cub pr", "status": "closed", "priority": "P2", "type": "task", "description": "The `cub pr` command currently creates pull requests but has no visibility into CI check status or automated recovery from transient failures. This means flaky tests, rate limits, and temporary service issues require manual intervention, interrupting autonomous workflows. Adding automated failure detection and retry logic would enable self-healing PR workflows that handle common transient failures without manual handoff.\n\n**Implementation Steps:**\n1. Create `cub.core.services.pr_monitor` module to implement check polling and failure detection via `gh pr checks`\n2. Add retry configuration model to `cub.core.config` with timeout duration and max retry count parameters\n3. Extend `LaunchService` to support background PR monitoring while harness is active\n4. Implement check state machine: poll \u2192 detect failure \u2192 wait \u2192 retry \u2192 repeat or succeed\n5. Add `--retry-timeout` and `--no-retry` flags to `cub pr` command in `cub.cli.pr`\n6. Integrate check monitoring into session hooks to log retry history to session forensics\n7. Add check status and retry attempts to `cub.core.ledger` models for session ledger recording\n8. Write integration tests for check detection, retry triggering, and rate limit handling", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313550Z", "updated_at": "2026-01-29T02:57:56.293787Z", "closed_at": "2026-01-29T02:57:56.293787Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.6", "title": "Add build failure detection and retry logic to cub pr", "status": "in_progress", "priority": "P2", "type": "task", "description": "The `cub pr` command currently creates pull requests but has no visibility into CI check status or automated recovery from transient failures. This means flaky tests, rate limits, and temporary service issues require manual intervention, interrupting autonomous workflows. Adding automated failure detection and retry logic would enable self-healing PR workflows that handle common transient failures without manual handoff.\n\n**Implementation Steps:**\n1. Create `cub.core.services.pr_monitor` module to implement check polling and failure detection via `gh pr checks`\n2. Add retry configuration model to `cub.core.config` with timeout duration and max retry count parameters\n3. Extend `LaunchService` to support background PR monitoring while harness is active\n4. Implement check state machine: poll \u2192 detect failure \u2192 wait \u2192 retry \u2192 repeat or succeed\n5. Add `--retry-timeout` and `--no-retry` flags to `cub pr` command in `cub.cli.pr`\n6. Integrate check monitoring into session hooks to log retry history to session forensics\n7. Add check status and retry attempts to `cub.core.ledger` models for session ledger recording\n8. Write integration tests for check detection, retry triggering, and rate limit handling", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212294", "updated_at": "2026-01-29T02:42:37.130318", "closed_at": null, "acceptance_criteria": ["`cub pr` detects PR check failures via `gh pr checks` polling", "Automatic retry timer (default 10 minutes, configurable) activates when failures detected", "`--retry-timeout` flag accepts duration strings (e.g., `5m`, `30s`)", "`--no-retry` flag disables automatic retry behavior for all check types", "Failed checks are re-triggered via `gh pr checks --rerun` or equivalent", "Session forensics (`.cub/ledger/forensics/{session_id}.jsonl`) logs all check statuses and retry attempts with timestamps", "Max retries (default 3) prevents infinite loop; stops retrying after limit reached", "Handles `gh` API rate limiting and network errors gracefully with exponential backoff", "Works with both draft PRs (`--draft`) and regular PRs"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:58:55.828977", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 41, "open": 40, "in_progress": 1, "closed": 0}, "secondary_result": {"total": 41, "open": 35, "in_progress": 1, "closed": 5}, "difference_summary": "open: 40 != 35; closed: 0 != 5"}
{"timestamp": "2026-01-29T02:58:55.944304", "operation": "close_task", "task_id": "cub-n6x.6", "primary_result": {"id": "cub-n6x.6", "title": "Add build failure detection and retry logic to cub pr", "status": "closed", "priority": "P2", "type": "task", "description": "The `cub pr` command currently creates pull requests but has no visibility into CI check status or automated recovery from transient failures. This means flaky tests, rate limits, and temporary service issues require manual intervention, interrupting autonomous workflows. Adding automated failure detection and retry logic would enable self-healing PR workflows that handle common transient failures without manual handoff.\n\n**Implementation Steps:**\n1. Create `cub.core.services.pr_monitor` module to implement check polling and failure detection via `gh pr checks`\n2. Add retry configuration model to `cub.core.config` with timeout duration and max retry count parameters\n3. Extend `LaunchService` to support background PR monitoring while harness is active\n4. Implement check state machine: poll \u2192 detect failure \u2192 wait \u2192 retry \u2192 repeat or succeed\n5. Add `--retry-timeout` and `--no-retry` flags to `cub pr` command in `cub.cli.pr`\n6. Integrate check monitoring into session hooks to log retry history to session forensics\n7. Add check status and retry attempts to `cub.core.ledger` models for session ledger recording\n8. Write integration tests for check detection, retry triggering, and rate limit handling", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313550Z", "updated_at": "2026-01-29T02:58:55.870119Z", "closed_at": "2026-01-29T02:58:55.870119Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.6", "title": "Add build failure detection and retry logic to cub pr", "status": "closed", "priority": "P2", "type": "task", "description": "The `cub pr` command currently creates pull requests but has no visibility into CI check status or automated recovery from transient failures. This means flaky tests, rate limits, and temporary service issues require manual intervention, interrupting autonomous workflows. Adding automated failure detection and retry logic would enable self-healing PR workflows that handle common transient failures without manual handoff.\n\n**Implementation Steps:**\n1. Create `cub.core.services.pr_monitor` module to implement check polling and failure detection via `gh pr checks`\n2. Add retry configuration model to `cub.core.config` with timeout duration and max retry count parameters\n3. Extend `LaunchService` to support background PR monitoring while harness is active\n4. Implement check state machine: poll \u2192 detect failure \u2192 wait \u2192 retry \u2192 repeat or succeed\n5. Add `--retry-timeout` and `--no-retry` flags to `cub pr` command in `cub.cli.pr`\n6. Integrate check monitoring into session hooks to log retry history to session forensics\n7. Add check status and retry attempts to `cub.core.ledger` models for session ledger recording\n8. Write integration tests for check detection, retry triggering, and rate limit handling", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212294", "updated_at": "2026-01-29T02:58:55.940329", "closed_at": "2026-01-29T02:58:55.940323", "acceptance_criteria": ["`cub pr` detects PR check failures via `gh pr checks` polling", "Automatic retry timer (default 10 minutes, configurable) activates when failures detected", "`--retry-timeout` flag accepts duration strings (e.g., `5m`, `30s`)", "`--no-retry` flag disables automatic retry behavior for all check types", "Failed checks are re-triggered via `gh pr checks --rerun` or equivalent", "Session forensics (`.cub/ledger/forensics/{session_id}.jsonl`) logs all check statuses and retry attempts with timestamps", "Max retries (default 3) prevents infinite loop; stops retrying after limit reached", "Handles `gh` API rate limiting and network errors gracefully with exponential backoff", "Works with both draft PRs (`--draft`) and regular PRs"], "notes": "[Closed: 2026-01-29T02:58:55.940332] Completed by autonomous execution", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:58:56.049544", "operation": "get_task", "task_id": "cub-n6x.6", "primary_result": {"id": "cub-n6x.6", "title": "Add build failure detection and retry logic to cub pr", "status": "closed", "priority": "P2", "type": "task", "description": "The `cub pr` command currently creates pull requests but has no visibility into CI check status or automated recovery from transient failures. This means flaky tests, rate limits, and temporary service issues require manual intervention, interrupting autonomous workflows. Adding automated failure detection and retry logic would enable self-healing PR workflows that handle common transient failures without manual handoff.\n\n**Implementation Steps:**\n1. Create `cub.core.services.pr_monitor` module to implement check polling and failure detection via `gh pr checks`\n2. Add retry configuration model to `cub.core.config` with timeout duration and max retry count parameters\n3. Extend `LaunchService` to support background PR monitoring while harness is active\n4. Implement check state machine: poll \u2192 detect failure \u2192 wait \u2192 retry \u2192 repeat or succeed\n5. Add `--retry-timeout` and `--no-retry` flags to `cub pr` command in `cub.cli.pr`\n6. Integrate check monitoring into session hooks to log retry history to session forensics\n7. Add check status and retry attempts to `cub.core.ledger` models for session ledger recording\n8. Write integration tests for check detection, retry triggering, and rate limit handling", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313550Z", "updated_at": "2026-01-29T02:58:55.870119Z", "closed_at": "2026-01-29T02:58:55.870119Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.6", "title": "Add build failure detection and retry logic to cub pr", "status": "closed", "priority": "P2", "type": "task", "description": "The `cub pr` command currently creates pull requests but has no visibility into CI check status or automated recovery from transient failures. This means flaky tests, rate limits, and temporary service issues require manual intervention, interrupting autonomous workflows. Adding automated failure detection and retry logic would enable self-healing PR workflows that handle common transient failures without manual handoff.\n\n**Implementation Steps:**\n1. Create `cub.core.services.pr_monitor` module to implement check polling and failure detection via `gh pr checks`\n2. Add retry configuration model to `cub.core.config` with timeout duration and max retry count parameters\n3. Extend `LaunchService` to support background PR monitoring while harness is active\n4. Implement check state machine: poll \u2192 detect failure \u2192 wait \u2192 retry \u2192 repeat or succeed\n5. Add `--retry-timeout` and `--no-retry` flags to `cub pr` command in `cub.cli.pr`\n6. Integrate check monitoring into session hooks to log retry history to session forensics\n7. Add check status and retry attempts to `cub.core.ledger` models for session ledger recording\n8. Write integration tests for check detection, retry triggering, and rate limit handling", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212294", "updated_at": "2026-01-29T02:58:55.940329", "closed_at": "2026-01-29T02:58:55.940323", "acceptance_criteria": ["`cub pr` detects PR check failures via `gh pr checks` polling", "Automatic retry timer (default 10 minutes, configurable) activates when failures detected", "`--retry-timeout` flag accepts duration strings (e.g., `5m`, `30s`)", "`--no-retry` flag disables automatic retry behavior for all check types", "Failed checks are re-triggered via `gh pr checks --rerun` or equivalent", "Session forensics (`.cub/ledger/forensics/{session_id}.jsonl`) logs all check statuses and retry attempts with timestamps", "Max retries (default 3) prevents infinite loop; stops retrying after limit reached", "Handles `gh` API rate limiting and network errors gracefully with exponential backoff", "Works with both draft PRs (`--draft`) and regular PRs"], "notes": "[Closed: 2026-01-29T02:58:55.940332] Completed by autonomous execution", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:59:07.500510", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-n6x.7", "title": "Ensure plan.json is created at pipeline start", "status": "open", "priority": "P2", "type": "task", "description": "plan.json is currently written during the orient stage rather than when the plan context is first created. If orient fails before calling ctx.save_plan(), there's no plan.json file to recover from. This reduces fault tolerance and prevents resumption in cases where early stage failures occur. Creating plan.json immediately after context initialization ensures a persistent checkpoint exists from the start.\n\n**Implementation Steps:**\n1. Locate PipelineConfig.run() and identify where PlanContext is created or loaded\n2. Add ctx.save_plan() call immediately after plan context initialization, before any stage runs\n3. Verify orient stage's existing ctx.save_plan() call at line 484 doesn't duplicate writes\n4. Run full test suite to ensure pipeline behavior remains unchanged\n5. Verify plan.json exists at project root before any stage execution begins", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313563Z", "updated_at": "2026-01-29T01:58:07.467200Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.8", "title": "Remove deprecated cub:triage and cub:plan skill commands", "status": "open", "priority": "P2", "type": "task", "description": "The cub:triage and cub:plan skill commands are no longer needed and create maintenance overhead. These commands were part of an earlier planning pipeline that has been superseded by other tooling. Removing them will reduce code complexity, eliminate dead skill registrations, and prevent confusion about available planning commands. This is a straightforward cleanup task with no backward compatibility concerns.\n\n**Implementation Steps:**\n1. Search the codebase for all references to `cub:triage` and `cub:plan` (skill definitions, command registrations, templates)\n2. Remove skill command definitions for `cub:triage` and `cub:plan` from skill/command template files\n3. Remove any `.claude/commands` configuration entries that register these skills\n4. Remove skill routing and registration code that supports these commands\n5. Search for any remaining references (comments, documentation, imports) and clean them up\n6. Verify no broken references remain by grepping for \"cub:triage\" and \"cub:plan\" across the codebase", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313572Z", "updated_at": "2026-01-29T01:58:07.467757Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "open", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313582Z", "updated_at": "2026-01-29T01:58:07.468436Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "open", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313625Z", "updated_at": "2026-01-29T01:58:07.462661Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "open", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313643Z", "updated_at": "2026-01-29T01:58:07.463381Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "secondary_result": [{"id": "cub-n6x.7", "title": "Ensure plan.json is created at pipeline start", "status": "open", "priority": "P2", "type": "task", "description": "plan.json is currently written during the orient stage rather than when the plan context is first created. If orient fails before calling ctx.save_plan(), there's no plan.json file to recover from. This reduces fault tolerance and prevents resumption in cases where early stage failures occur. Creating plan.json immediately after context initialization ensures a persistent checkpoint exists from the start.\n\n**Implementation Steps:**\n1. Locate PipelineConfig.run() and identify where PlanContext is created or loaded\n2. Add ctx.save_plan() call immediately after plan context initialization, before any stage runs\n3. Verify orient stage's existing ctx.save_plan() call at line 484 doesn't duplicate writes\n4. Run full test suite to ensure pipeline behavior remains unchanged\n5. Verify plan.json exists at project root before any stage execution begins", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212336", "updated_at": "2026-01-29T01:58:08.212336", "closed_at": null, "acceptance_criteria": ["plan.json is created immediately after plan context initialization", "plan.json exists before orient stage executes", "All existing tests pass with no behavioral changes", "Plan data is recoverable/resumable even if orient fails early"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.8", "title": "Remove deprecated cub:triage and cub:plan skill commands", "status": "open", "priority": "P2", "type": "task", "description": "The cub:triage and cub:plan skill commands are no longer needed and create maintenance overhead. These commands were part of an earlier planning pipeline that has been superseded by other tooling. Removing them will reduce code complexity, eliminate dead skill registrations, and prevent confusion about available planning commands. This is a straightforward cleanup task with no backward compatibility concerns.\n\n**Implementation Steps:**\n1. Search the codebase for all references to `cub:triage` and `cub:plan` (skill definitions, command registrations, templates)\n2. Remove skill command definitions for `cub:triage` and `cub:plan` from skill/command template files\n3. Remove any `.claude/commands` configuration entries that register these skills\n4. Remove skill routing and registration code that supports these commands\n5. Search for any remaining references (comments, documentation, imports) and clean them up\n6. Verify no broken references remain by grepping for \"cub:triage\" and \"cub:plan\" across the codebase", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212370", "updated_at": "2026-01-29T01:58:08.212371", "closed_at": null, "acceptance_criteria": ["`cub:triage` no longer appears in any templates, configuration files, or code", "`cub:plan` no longer appears in any templates, configuration files, or code", "All skill registration/routing code that handled these commands is removed", "Remaining skills and commands continue to function correctly (verify with `cub --help`)", "No broken imports or dangling references to removed skill definitions", "Git status shows only the intended removals (no accidental changes)"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "open", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212407", "updated_at": "2026-01-29T01:58:08.212407", "closed_at": null, "acceptance_criteria": ["Headline box displays harness backend name when available", "Headline box displays model name when available", "Other explicit configuration specs are included if applicable", "Layout remains readable without excessive line wrapping", "Unconfigured specs are omitted gracefully (no \"None\", \"N/A\", or blank values shown)", "Changes work in both `cub run` and direct session contexts", "Existing tests pass and new tests cover headline rendering scenarios"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "open", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212440", "updated_at": "2026-01-29T01:58:08.212440", "closed_at": null, "acceptance_criteria": ["Each streamed message is followed by exactly one newline character", "Output is readable with clear visual separation between consecutive messages", "Non-stream output (`cub run` without `--stream`) is unaffected", "Works correctly with all harness backends (claude, codex, gemini, opencode)", "No duplicate blank lines or extra whitespace introduced", "Existing tests still pass and new behavior is tested"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "open", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212476", "updated_at": "2026-01-29T01:58:08.212477", "closed_at": null, "acceptance_criteria": ["Progress indicator displays \"[current/total]\" format for each item", "Item title or brief summary appears alongside progress update", "Updates appear incrementally as each item completes processing", "No measurable latency increase compared to current implementation", "Output uses Rich console consistent with other cub commands", "Works correctly with punchlist files of varying sizes (3-50+ items)"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "difference_summary": "Task 0 (cub-n6x.10): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 1 (cub-n6x.11): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 2 (cub-n6x.7): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 3 (cub-n6x.8): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 4 (cub-n6x.9): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x"}
{"timestamp": "2026-01-29T02:59:07.562775", "operation": "get_task", "task_id": "cub-n6x.7", "primary_result": {"id": "cub-n6x.7", "title": "Ensure plan.json is created at pipeline start", "status": "open", "priority": "P2", "type": "task", "description": "plan.json is currently written during the orient stage rather than when the plan context is first created. If orient fails before calling ctx.save_plan(), there's no plan.json file to recover from. This reduces fault tolerance and prevents resumption in cases where early stage failures occur. Creating plan.json immediately after context initialization ensures a persistent checkpoint exists from the start.\n\n**Implementation Steps:**\n1. Locate PipelineConfig.run() and identify where PlanContext is created or loaded\n2. Add ctx.save_plan() call immediately after plan context initialization, before any stage runs\n3. Verify orient stage's existing ctx.save_plan() call at line 484 doesn't duplicate writes\n4. Run full test suite to ensure pipeline behavior remains unchanged\n5. Verify plan.json exists at project root before any stage execution begins", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313563Z", "updated_at": "2026-01-29T01:58:07.467200Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.7", "title": "Ensure plan.json is created at pipeline start", "status": "open", "priority": "P2", "type": "task", "description": "plan.json is currently written during the orient stage rather than when the plan context is first created. If orient fails before calling ctx.save_plan(), there's no plan.json file to recover from. This reduces fault tolerance and prevents resumption in cases where early stage failures occur. Creating plan.json immediately after context initialization ensures a persistent checkpoint exists from the start.\n\n**Implementation Steps:**\n1. Locate PipelineConfig.run() and identify where PlanContext is created or loaded\n2. Add ctx.save_plan() call immediately after plan context initialization, before any stage runs\n3. Verify orient stage's existing ctx.save_plan() call at line 484 doesn't duplicate writes\n4. Run full test suite to ensure pipeline behavior remains unchanged\n5. Verify plan.json exists at project root before any stage execution begins", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212336", "updated_at": "2026-01-29T01:58:08.212336", "closed_at": null, "acceptance_criteria": ["plan.json is created immediately after plan context initialization", "plan.json exists before orient stage executes", "All existing tests pass with no behavioral changes", "Plan data is recoverable/resumable even if orient fails early"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T02:59:07.698900", "operation": "update_task", "task_id": "cub-n6x.7", "primary_result": {"id": "cub-n6x.7", "title": "Ensure plan.json is created at pipeline start", "status": "in_progress", "priority": "P2", "type": "task", "description": "plan.json is currently written during the orient stage rather than when the plan context is first created. If orient fails before calling ctx.save_plan(), there's no plan.json file to recover from. This reduces fault tolerance and prevents resumption in cases where early stage failures occur. Creating plan.json immediately after context initialization ensures a persistent checkpoint exists from the start.\n\n**Implementation Steps:**\n1. Locate PipelineConfig.run() and identify where PlanContext is created or loaded\n2. Add ctx.save_plan() call immediately after plan context initialization, before any stage runs\n3. Verify orient stage's existing ctx.save_plan() call at line 484 doesn't duplicate writes\n4. Run full test suite to ensure pipeline behavior remains unchanged\n5. Verify plan.json exists at project root before any stage execution begins", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313563Z", "updated_at": "2026-01-29T02:59:07.618005Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.7", "title": "Ensure plan.json is created at pipeline start", "status": "in_progress", "priority": "P2", "type": "task", "description": "plan.json is currently written during the orient stage rather than when the plan context is first created. If orient fails before calling ctx.save_plan(), there's no plan.json file to recover from. This reduces fault tolerance and prevents resumption in cases where early stage failures occur. Creating plan.json immediately after context initialization ensures a persistent checkpoint exists from the start.\n\n**Implementation Steps:**\n1. Locate PipelineConfig.run() and identify where PlanContext is created or loaded\n2. Add ctx.save_plan() call immediately after plan context initialization, before any stage runs\n3. Verify orient stage's existing ctx.save_plan() call at line 484 doesn't duplicate writes\n4. Run full test suite to ensure pipeline behavior remains unchanged\n5. Verify plan.json exists at project root before any stage execution begins", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212336", "updated_at": "2026-01-29T02:59:07.696348", "closed_at": null, "acceptance_criteria": ["plan.json is created immediately after plan context initialization", "plan.json exists before orient stage executes", "All existing tests pass with no behavioral changes", "Plan data is recoverable/resumable even if orient fails early"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T03:00:41.476700", "operation": "get_task", "task_id": "cub-n6x.7", "primary_result": {"id": "cub-n6x.7", "title": "Ensure plan.json is created at pipeline start", "status": "closed", "priority": "P2", "type": "task", "description": "plan.json is currently written during the orient stage rather than when the plan context is first created. If orient fails before calling ctx.save_plan(), there's no plan.json file to recover from. This reduces fault tolerance and prevents resumption in cases where early stage failures occur. Creating plan.json immediately after context initialization ensures a persistent checkpoint exists from the start.\n\n**Implementation Steps:**\n1. Locate PipelineConfig.run() and identify where PlanContext is created or loaded\n2. Add ctx.save_plan() call immediately after plan context initialization, before any stage runs\n3. Verify orient stage's existing ctx.save_plan() call at line 484 doesn't duplicate writes\n4. Run full test suite to ensure pipeline behavior remains unchanged\n5. Verify plan.json exists at project root before any stage execution begins", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313563Z", "updated_at": "2026-01-29T03:00:17.582617Z", "closed_at": "2026-01-29T03:00:17.582617Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.7", "title": "Ensure plan.json is created at pipeline start", "status": "in_progress", "priority": "P2", "type": "task", "description": "plan.json is currently written during the orient stage rather than when the plan context is first created. If orient fails before calling ctx.save_plan(), there's no plan.json file to recover from. This reduces fault tolerance and prevents resumption in cases where early stage failures occur. Creating plan.json immediately after context initialization ensures a persistent checkpoint exists from the start.\n\n**Implementation Steps:**\n1. Locate PipelineConfig.run() and identify where PlanContext is created or loaded\n2. Add ctx.save_plan() call immediately after plan context initialization, before any stage runs\n3. Verify orient stage's existing ctx.save_plan() call at line 484 doesn't duplicate writes\n4. Run full test suite to ensure pipeline behavior remains unchanged\n5. Verify plan.json exists at project root before any stage execution begins", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212336", "updated_at": "2026-01-29T02:59:07.696348", "closed_at": null, "acceptance_criteria": ["plan.json is created immediately after plan context initialization", "plan.json exists before orient stage executes", "All existing tests pass with no behavioral changes", "Plan data is recoverable/resumable even if orient fails early"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T03:00:41.535509", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 40, "open": 39, "in_progress": 1, "closed": 0}, "secondary_result": {"total": 41, "open": 34, "in_progress": 1, "closed": 6}, "difference_summary": "total: 40 != 41; open: 39 != 34; closed: 0 != 6"}
{"timestamp": "2026-01-29T03:00:41.662950", "operation": "close_task", "task_id": "cub-n6x.7", "primary_result": {"id": "cub-n6x.7", "title": "Ensure plan.json is created at pipeline start", "status": "closed", "priority": "P2", "type": "task", "description": "plan.json is currently written during the orient stage rather than when the plan context is first created. If orient fails before calling ctx.save_plan(), there's no plan.json file to recover from. This reduces fault tolerance and prevents resumption in cases where early stage failures occur. Creating plan.json immediately after context initialization ensures a persistent checkpoint exists from the start.\n\n**Implementation Steps:**\n1. Locate PipelineConfig.run() and identify where PlanContext is created or loaded\n2. Add ctx.save_plan() call immediately after plan context initialization, before any stage runs\n3. Verify orient stage's existing ctx.save_plan() call at line 484 doesn't duplicate writes\n4. Run full test suite to ensure pipeline behavior remains unchanged\n5. Verify plan.json exists at project root before any stage execution begins", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313563Z", "updated_at": "2026-01-29T03:00:41.589278Z", "closed_at": "2026-01-29T03:00:41.589278Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.7", "title": "Ensure plan.json is created at pipeline start", "status": "closed", "priority": "P2", "type": "task", "description": "plan.json is currently written during the orient stage rather than when the plan context is first created. If orient fails before calling ctx.save_plan(), there's no plan.json file to recover from. This reduces fault tolerance and prevents resumption in cases where early stage failures occur. Creating plan.json immediately after context initialization ensures a persistent checkpoint exists from the start.\n\n**Implementation Steps:**\n1. Locate PipelineConfig.run() and identify where PlanContext is created or loaded\n2. Add ctx.save_plan() call immediately after plan context initialization, before any stage runs\n3. Verify orient stage's existing ctx.save_plan() call at line 484 doesn't duplicate writes\n4. Run full test suite to ensure pipeline behavior remains unchanged\n5. Verify plan.json exists at project root before any stage execution begins", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212336", "updated_at": "2026-01-29T03:00:41.660607", "closed_at": "2026-01-29T03:00:41.660601", "acceptance_criteria": ["plan.json is created immediately after plan context initialization", "plan.json exists before orient stage executes", "All existing tests pass with no behavioral changes", "Plan data is recoverable/resumable even if orient fails early"], "notes": "[Closed: 2026-01-29T03:00:41.660608] Completed by autonomous execution", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T03:00:41.746929", "operation": "get_task", "task_id": "cub-n6x.7", "primary_result": {"id": "cub-n6x.7", "title": "Ensure plan.json is created at pipeline start", "status": "closed", "priority": "P2", "type": "task", "description": "plan.json is currently written during the orient stage rather than when the plan context is first created. If orient fails before calling ctx.save_plan(), there's no plan.json file to recover from. This reduces fault tolerance and prevents resumption in cases where early stage failures occur. Creating plan.json immediately after context initialization ensures a persistent checkpoint exists from the start.\n\n**Implementation Steps:**\n1. Locate PipelineConfig.run() and identify where PlanContext is created or loaded\n2. Add ctx.save_plan() call immediately after plan context initialization, before any stage runs\n3. Verify orient stage's existing ctx.save_plan() call at line 484 doesn't duplicate writes\n4. Run full test suite to ensure pipeline behavior remains unchanged\n5. Verify plan.json exists at project root before any stage execution begins", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313563Z", "updated_at": "2026-01-29T03:00:41.589278Z", "closed_at": "2026-01-29T03:00:41.589278Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.7", "title": "Ensure plan.json is created at pipeline start", "status": "closed", "priority": "P2", "type": "task", "description": "plan.json is currently written during the orient stage rather than when the plan context is first created. If orient fails before calling ctx.save_plan(), there's no plan.json file to recover from. This reduces fault tolerance and prevents resumption in cases where early stage failures occur. Creating plan.json immediately after context initialization ensures a persistent checkpoint exists from the start.\n\n**Implementation Steps:**\n1. Locate PipelineConfig.run() and identify where PlanContext is created or loaded\n2. Add ctx.save_plan() call immediately after plan context initialization, before any stage runs\n3. Verify orient stage's existing ctx.save_plan() call at line 484 doesn't duplicate writes\n4. Run full test suite to ensure pipeline behavior remains unchanged\n5. Verify plan.json exists at project root before any stage execution begins", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212336", "updated_at": "2026-01-29T03:00:41.660607", "closed_at": "2026-01-29T03:00:41.660601", "acceptance_criteria": ["plan.json is created immediately after plan context initialization", "plan.json exists before orient stage executes", "All existing tests pass with no behavioral changes", "Plan data is recoverable/resumable even if orient fails early"], "notes": "[Closed: 2026-01-29T03:00:41.660608] Completed by autonomous execution", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T03:00:50.503596", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-n6x.8", "title": "Remove deprecated cub:triage and cub:plan skill commands", "status": "open", "priority": "P2", "type": "task", "description": "The cub:triage and cub:plan skill commands are no longer needed and create maintenance overhead. These commands were part of an earlier planning pipeline that has been superseded by other tooling. Removing them will reduce code complexity, eliminate dead skill registrations, and prevent confusion about available planning commands. This is a straightforward cleanup task with no backward compatibility concerns.\n\n**Implementation Steps:**\n1. Search the codebase for all references to `cub:triage` and `cub:plan` (skill definitions, command registrations, templates)\n2. Remove skill command definitions for `cub:triage` and `cub:plan` from skill/command template files\n3. Remove any `.claude/commands` configuration entries that register these skills\n4. Remove skill routing and registration code that supports these commands\n5. Search for any remaining references (comments, documentation, imports) and clean them up\n6. Verify no broken references remain by grepping for \"cub:triage\" and \"cub:plan\" across the codebase", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313572Z", "updated_at": "2026-01-29T01:58:07.467757Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "open", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313582Z", "updated_at": "2026-01-29T01:58:07.468436Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "open", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313625Z", "updated_at": "2026-01-29T01:58:07.462661Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "open", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313643Z", "updated_at": "2026-01-29T01:58:07.463381Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "secondary_result": [{"id": "cub-n6x.8", "title": "Remove deprecated cub:triage and cub:plan skill commands", "status": "open", "priority": "P2", "type": "task", "description": "The cub:triage and cub:plan skill commands are no longer needed and create maintenance overhead. These commands were part of an earlier planning pipeline that has been superseded by other tooling. Removing them will reduce code complexity, eliminate dead skill registrations, and prevent confusion about available planning commands. This is a straightforward cleanup task with no backward compatibility concerns.\n\n**Implementation Steps:**\n1. Search the codebase for all references to `cub:triage` and `cub:plan` (skill definitions, command registrations, templates)\n2. Remove skill command definitions for `cub:triage` and `cub:plan` from skill/command template files\n3. Remove any `.claude/commands` configuration entries that register these skills\n4. Remove skill routing and registration code that supports these commands\n5. Search for any remaining references (comments, documentation, imports) and clean them up\n6. Verify no broken references remain by grepping for \"cub:triage\" and \"cub:plan\" across the codebase", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212370", "updated_at": "2026-01-29T01:58:08.212371", "closed_at": null, "acceptance_criteria": ["`cub:triage` no longer appears in any templates, configuration files, or code", "`cub:plan` no longer appears in any templates, configuration files, or code", "All skill registration/routing code that handled these commands is removed", "Remaining skills and commands continue to function correctly (verify with `cub --help`)", "No broken imports or dangling references to removed skill definitions", "Git status shows only the intended removals (no accidental changes)"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "open", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212407", "updated_at": "2026-01-29T01:58:08.212407", "closed_at": null, "acceptance_criteria": ["Headline box displays harness backend name when available", "Headline box displays model name when available", "Other explicit configuration specs are included if applicable", "Layout remains readable without excessive line wrapping", "Unconfigured specs are omitted gracefully (no \"None\", \"N/A\", or blank values shown)", "Changes work in both `cub run` and direct session contexts", "Existing tests pass and new tests cover headline rendering scenarios"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "open", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212440", "updated_at": "2026-01-29T01:58:08.212440", "closed_at": null, "acceptance_criteria": ["Each streamed message is followed by exactly one newline character", "Output is readable with clear visual separation between consecutive messages", "Non-stream output (`cub run` without `--stream`) is unaffected", "Works correctly with all harness backends (claude, codex, gemini, opencode)", "No duplicate blank lines or extra whitespace introduced", "Existing tests still pass and new behavior is tested"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "open", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212476", "updated_at": "2026-01-29T01:58:08.212477", "closed_at": null, "acceptance_criteria": ["Progress indicator displays \"[current/total]\" format for each item", "Item title or brief summary appears alongside progress update", "Updates appear incrementally as each item completes processing", "No measurable latency increase compared to current implementation", "Output uses Rich console consistent with other cub commands", "Works correctly with punchlist files of varying sizes (3-50+ items)"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "difference_summary": "Task 0 (cub-n6x.10): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 1 (cub-n6x.11): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 2 (cub-n6x.8): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 3 (cub-n6x.9): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x"}
{"timestamp": "2026-01-29T03:00:50.593810", "operation": "get_task", "task_id": "cub-n6x.8", "primary_result": {"id": "cub-n6x.8", "title": "Remove deprecated cub:triage and cub:plan skill commands", "status": "open", "priority": "P2", "type": "task", "description": "The cub:triage and cub:plan skill commands are no longer needed and create maintenance overhead. These commands were part of an earlier planning pipeline that has been superseded by other tooling. Removing them will reduce code complexity, eliminate dead skill registrations, and prevent confusion about available planning commands. This is a straightforward cleanup task with no backward compatibility concerns.\n\n**Implementation Steps:**\n1. Search the codebase for all references to `cub:triage` and `cub:plan` (skill definitions, command registrations, templates)\n2. Remove skill command definitions for `cub:triage` and `cub:plan` from skill/command template files\n3. Remove any `.claude/commands` configuration entries that register these skills\n4. Remove skill routing and registration code that supports these commands\n5. Search for any remaining references (comments, documentation, imports) and clean them up\n6. Verify no broken references remain by grepping for \"cub:triage\" and \"cub:plan\" across the codebase", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313572Z", "updated_at": "2026-01-29T01:58:07.467757Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.8", "title": "Remove deprecated cub:triage and cub:plan skill commands", "status": "open", "priority": "P2", "type": "task", "description": "The cub:triage and cub:plan skill commands are no longer needed and create maintenance overhead. These commands were part of an earlier planning pipeline that has been superseded by other tooling. Removing them will reduce code complexity, eliminate dead skill registrations, and prevent confusion about available planning commands. This is a straightforward cleanup task with no backward compatibility concerns.\n\n**Implementation Steps:**\n1. Search the codebase for all references to `cub:triage` and `cub:plan` (skill definitions, command registrations, templates)\n2. Remove skill command definitions for `cub:triage` and `cub:plan` from skill/command template files\n3. Remove any `.claude/commands` configuration entries that register these skills\n4. Remove skill routing and registration code that supports these commands\n5. Search for any remaining references (comments, documentation, imports) and clean them up\n6. Verify no broken references remain by grepping for \"cub:triage\" and \"cub:plan\" across the codebase", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212370", "updated_at": "2026-01-29T01:58:08.212371", "closed_at": null, "acceptance_criteria": ["`cub:triage` no longer appears in any templates, configuration files, or code", "`cub:plan` no longer appears in any templates, configuration files, or code", "All skill registration/routing code that handled these commands is removed", "Remaining skills and commands continue to function correctly (verify with `cub --help`)", "No broken imports or dangling references to removed skill definitions", "Git status shows only the intended removals (no accidental changes)"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T03:00:50.789845", "operation": "update_task", "task_id": "cub-n6x.8", "primary_result": {"id": "cub-n6x.8", "title": "Remove deprecated cub:triage and cub:plan skill commands", "status": "in_progress", "priority": "P2", "type": "task", "description": "The cub:triage and cub:plan skill commands are no longer needed and create maintenance overhead. These commands were part of an earlier planning pipeline that has been superseded by other tooling. Removing them will reduce code complexity, eliminate dead skill registrations, and prevent confusion about available planning commands. This is a straightforward cleanup task with no backward compatibility concerns.\n\n**Implementation Steps:**\n1. Search the codebase for all references to `cub:triage` and `cub:plan` (skill definitions, command registrations, templates)\n2. Remove skill command definitions for `cub:triage` and `cub:plan` from skill/command template files\n3. Remove any `.claude/commands` configuration entries that register these skills\n4. Remove skill routing and registration code that supports these commands\n5. Search for any remaining references (comments, documentation, imports) and clean them up\n6. Verify no broken references remain by grepping for \"cub:triage\" and \"cub:plan\" across the codebase", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313572Z", "updated_at": "2026-01-29T03:00:50.692763Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.8", "title": "Remove deprecated cub:triage and cub:plan skill commands", "status": "in_progress", "priority": "P2", "type": "task", "description": "The cub:triage and cub:plan skill commands are no longer needed and create maintenance overhead. These commands were part of an earlier planning pipeline that has been superseded by other tooling. Removing them will reduce code complexity, eliminate dead skill registrations, and prevent confusion about available planning commands. This is a straightforward cleanup task with no backward compatibility concerns.\n\n**Implementation Steps:**\n1. Search the codebase for all references to `cub:triage` and `cub:plan` (skill definitions, command registrations, templates)\n2. Remove skill command definitions for `cub:triage` and `cub:plan` from skill/command template files\n3. Remove any `.claude/commands` configuration entries that register these skills\n4. Remove skill routing and registration code that supports these commands\n5. Search for any remaining references (comments, documentation, imports) and clean them up\n6. Verify no broken references remain by grepping for \"cub:triage\" and \"cub:plan\" across the codebase", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212370", "updated_at": "2026-01-29T03:00:50.787024", "closed_at": null, "acceptance_criteria": ["`cub:triage` no longer appears in any templates, configuration files, or code", "`cub:plan` no longer appears in any templates, configuration files, or code", "All skill registration/routing code that handled these commands is removed", "Remaining skills and commands continue to function correctly (verify with `cub --help`)", "No broken imports or dangling references to removed skill definitions", "Git status shows only the intended removals (no accidental changes)"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T03:04:41.662063", "operation": "get_task", "task_id": "cub-n6x.8", "primary_result": {"id": "cub-n6x.8", "title": "Remove deprecated cub:triage and cub:plan skill commands", "status": "closed", "priority": "P2", "type": "task", "description": "The cub:triage and cub:plan skill commands are no longer needed and create maintenance overhead. These commands were part of an earlier planning pipeline that has been superseded by other tooling. Removing them will reduce code complexity, eliminate dead skill registrations, and prevent confusion about available planning commands. This is a straightforward cleanup task with no backward compatibility concerns.\n\n**Implementation Steps:**\n1. Search the codebase for all references to `cub:triage` and `cub:plan` (skill definitions, command registrations, templates)\n2. Remove skill command definitions for `cub:triage` and `cub:plan` from skill/command template files\n3. Remove any `.claude/commands` configuration entries that register these skills\n4. Remove skill routing and registration code that supports these commands\n5. Search for any remaining references (comments, documentation, imports) and clean them up\n6. Verify no broken references remain by grepping for \"cub:triage\" and \"cub:plan\" across the codebase", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313572Z", "updated_at": "2026-01-29T03:04:07.539789Z", "closed_at": "2026-01-29T03:04:07.539789Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.8", "title": "Remove deprecated cub:triage and cub:plan skill commands", "status": "in_progress", "priority": "P2", "type": "task", "description": "The cub:triage and cub:plan skill commands are no longer needed and create maintenance overhead. These commands were part of an earlier planning pipeline that has been superseded by other tooling. Removing them will reduce code complexity, eliminate dead skill registrations, and prevent confusion about available planning commands. This is a straightforward cleanup task with no backward compatibility concerns.\n\n**Implementation Steps:**\n1. Search the codebase for all references to `cub:triage` and `cub:plan` (skill definitions, command registrations, templates)\n2. Remove skill command definitions for `cub:triage` and `cub:plan` from skill/command template files\n3. Remove any `.claude/commands` configuration entries that register these skills\n4. Remove skill routing and registration code that supports these commands\n5. Search for any remaining references (comments, documentation, imports) and clean them up\n6. Verify no broken references remain by grepping for \"cub:triage\" and \"cub:plan\" across the codebase", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212370", "updated_at": "2026-01-29T03:00:50.787024", "closed_at": null, "acceptance_criteria": ["`cub:triage` no longer appears in any templates, configuration files, or code", "`cub:plan` no longer appears in any templates, configuration files, or code", "All skill registration/routing code that handled these commands is removed", "Remaining skills and commands continue to function correctly (verify with `cub --help`)", "No broken imports or dangling references to removed skill definitions", "Git status shows only the intended removals (no accidental changes)"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T03:04:41.712433", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 39, "open": 38, "in_progress": 1, "closed": 0}, "secondary_result": {"total": 41, "open": 33, "in_progress": 1, "closed": 7}, "difference_summary": "total: 39 != 41; open: 38 != 33; closed: 0 != 7"}
{"timestamp": "2026-01-29T03:04:41.845415", "operation": "close_task", "task_id": "cub-n6x.8", "primary_result": {"id": "cub-n6x.8", "title": "Remove deprecated cub:triage and cub:plan skill commands", "status": "closed", "priority": "P2", "type": "task", "description": "The cub:triage and cub:plan skill commands are no longer needed and create maintenance overhead. These commands were part of an earlier planning pipeline that has been superseded by other tooling. Removing them will reduce code complexity, eliminate dead skill registrations, and prevent confusion about available planning commands. This is a straightforward cleanup task with no backward compatibility concerns.\n\n**Implementation Steps:**\n1. Search the codebase for all references to `cub:triage` and `cub:plan` (skill definitions, command registrations, templates)\n2. Remove skill command definitions for `cub:triage` and `cub:plan` from skill/command template files\n3. Remove any `.claude/commands` configuration entries that register these skills\n4. Remove skill routing and registration code that supports these commands\n5. Search for any remaining references (comments, documentation, imports) and clean them up\n6. Verify no broken references remain by grepping for \"cub:triage\" and \"cub:plan\" across the codebase", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313572Z", "updated_at": "2026-01-29T03:04:41.757230Z", "closed_at": "2026-01-29T03:04:41.757230Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.8", "title": "Remove deprecated cub:triage and cub:plan skill commands", "status": "closed", "priority": "P2", "type": "task", "description": "The cub:triage and cub:plan skill commands are no longer needed and create maintenance overhead. These commands were part of an earlier planning pipeline that has been superseded by other tooling. Removing them will reduce code complexity, eliminate dead skill registrations, and prevent confusion about available planning commands. This is a straightforward cleanup task with no backward compatibility concerns.\n\n**Implementation Steps:**\n1. Search the codebase for all references to `cub:triage` and `cub:plan` (skill definitions, command registrations, templates)\n2. Remove skill command definitions for `cub:triage` and `cub:plan` from skill/command template files\n3. Remove any `.claude/commands` configuration entries that register these skills\n4. Remove skill routing and registration code that supports these commands\n5. Search for any remaining references (comments, documentation, imports) and clean them up\n6. Verify no broken references remain by grepping for \"cub:triage\" and \"cub:plan\" across the codebase", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212370", "updated_at": "2026-01-29T03:04:41.841054", "closed_at": "2026-01-29T03:04:41.841048", "acceptance_criteria": ["`cub:triage` no longer appears in any templates, configuration files, or code", "`cub:plan` no longer appears in any templates, configuration files, or code", "All skill registration/routing code that handled these commands is removed", "Remaining skills and commands continue to function correctly (verify with `cub --help`)", "No broken imports or dangling references to removed skill definitions", "Git status shows only the intended removals (no accidental changes)"], "notes": "[Closed: 2026-01-29T03:04:41.841057] Completed by autonomous execution", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T03:04:41.946305", "operation": "get_task", "task_id": "cub-n6x.8", "primary_result": {"id": "cub-n6x.8", "title": "Remove deprecated cub:triage and cub:plan skill commands", "status": "closed", "priority": "P2", "type": "task", "description": "The cub:triage and cub:plan skill commands are no longer needed and create maintenance overhead. These commands were part of an earlier planning pipeline that has been superseded by other tooling. Removing them will reduce code complexity, eliminate dead skill registrations, and prevent confusion about available planning commands. This is a straightforward cleanup task with no backward compatibility concerns.\n\n**Implementation Steps:**\n1. Search the codebase for all references to `cub:triage` and `cub:plan` (skill definitions, command registrations, templates)\n2. Remove skill command definitions for `cub:triage` and `cub:plan` from skill/command template files\n3. Remove any `.claude/commands` configuration entries that register these skills\n4. Remove skill routing and registration code that supports these commands\n5. Search for any remaining references (comments, documentation, imports) and clean them up\n6. Verify no broken references remain by grepping for \"cub:triage\" and \"cub:plan\" across the codebase", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313572Z", "updated_at": "2026-01-29T03:04:41.757230Z", "closed_at": "2026-01-29T03:04:41.757230Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.8", "title": "Remove deprecated cub:triage and cub:plan skill commands", "status": "closed", "priority": "P2", "type": "task", "description": "The cub:triage and cub:plan skill commands are no longer needed and create maintenance overhead. These commands were part of an earlier planning pipeline that has been superseded by other tooling. Removing them will reduce code complexity, eliminate dead skill registrations, and prevent confusion about available planning commands. This is a straightforward cleanup task with no backward compatibility concerns.\n\n**Implementation Steps:**\n1. Search the codebase for all references to `cub:triage` and `cub:plan` (skill definitions, command registrations, templates)\n2. Remove skill command definitions for `cub:triage` and `cub:plan` from skill/command template files\n3. Remove any `.claude/commands` configuration entries that register these skills\n4. Remove skill routing and registration code that supports these commands\n5. Search for any remaining references (comments, documentation, imports) and clean them up\n6. Verify no broken references remain by grepping for \"cub:triage\" and \"cub:plan\" across the codebase", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212370", "updated_at": "2026-01-29T03:04:41.841054", "closed_at": "2026-01-29T03:04:41.841048", "acceptance_criteria": ["`cub:triage` no longer appears in any templates, configuration files, or code", "`cub:plan` no longer appears in any templates, configuration files, or code", "All skill registration/routing code that handled these commands is removed", "Remaining skills and commands continue to function correctly (verify with `cub --help`)", "No broken imports or dangling references to removed skill definitions", "Git status shows only the intended removals (no accidental changes)"], "notes": "[Closed: 2026-01-29T03:04:41.841057] Completed by autonomous execution", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T03:04:52.195584", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "open", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313582Z", "updated_at": "2026-01-29T01:58:07.468436Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "open", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313625Z", "updated_at": "2026-01-29T01:58:07.462661Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "open", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313643Z", "updated_at": "2026-01-29T01:58:07.463381Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "secondary_result": [{"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "open", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212407", "updated_at": "2026-01-29T01:58:08.212407", "closed_at": null, "acceptance_criteria": ["Headline box displays harness backend name when available", "Headline box displays model name when available", "Other explicit configuration specs are included if applicable", "Layout remains readable without excessive line wrapping", "Unconfigured specs are omitted gracefully (no \"None\", \"N/A\", or blank values shown)", "Changes work in both `cub run` and direct session contexts", "Existing tests pass and new tests cover headline rendering scenarios"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "open", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212440", "updated_at": "2026-01-29T01:58:08.212440", "closed_at": null, "acceptance_criteria": ["Each streamed message is followed by exactly one newline character", "Output is readable with clear visual separation between consecutive messages", "Non-stream output (`cub run` without `--stream`) is unaffected", "Works correctly with all harness backends (claude, codex, gemini, opencode)", "No duplicate blank lines or extra whitespace introduced", "Existing tests still pass and new behavior is tested"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "open", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212476", "updated_at": "2026-01-29T01:58:08.212477", "closed_at": null, "acceptance_criteria": ["Progress indicator displays \"[current/total]\" format for each item", "Item title or brief summary appears alongside progress update", "Updates appear incrementally as each item completes processing", "No measurable latency increase compared to current implementation", "Output uses Rich console consistent with other cub commands", "Works correctly with punchlist files of varying sizes (3-50+ items)"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "difference_summary": "Task 0 (cub-n6x.10): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 1 (cub-n6x.11): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 2 (cub-n6x.9): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x"}
{"timestamp": "2026-01-29T03:04:52.250741", "operation": "get_task", "task_id": "cub-n6x.9", "primary_result": {"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "open", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313582Z", "updated_at": "2026-01-29T01:58:07.468436Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "open", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212407", "updated_at": "2026-01-29T01:58:08.212407", "closed_at": null, "acceptance_criteria": ["Headline box displays harness backend name when available", "Headline box displays model name when available", "Other explicit configuration specs are included if applicable", "Layout remains readable without excessive line wrapping", "Unconfigured specs are omitted gracefully (no \"None\", \"N/A\", or blank values shown)", "Changes work in both `cub run` and direct session contexts", "Existing tests pass and new tests cover headline rendering scenarios"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T03:04:52.376210", "operation": "update_task", "task_id": "cub-n6x.9", "primary_result": {"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "in_progress", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313582Z", "updated_at": "2026-01-29T03:04:52.305276Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "in_progress", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212407", "updated_at": "2026-01-29T03:04:52.374005", "closed_at": null, "acceptance_criteria": ["Headline box displays harness backend name when available", "Headline box displays model name when available", "Other explicit configuration specs are included if applicable", "Layout remains readable without excessive line wrapping", "Unconfigured specs are omitted gracefully (no \"None\", \"N/A\", or blank values shown)", "Changes work in both `cub run` and direct session contexts", "Existing tests pass and new tests cover headline rendering scenarios"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T03:09:54.395433", "operation": "get_task", "task_id": "cub-n6x.9", "primary_result": {"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "closed", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313582Z", "updated_at": "2026-01-29T03:09:29.616466Z", "closed_at": "2026-01-29T03:09:29.616466Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "in_progress", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212407", "updated_at": "2026-01-29T03:04:52.374005", "closed_at": null, "acceptance_criteria": ["Headline box displays harness backend name when available", "Headline box displays model name when available", "Other explicit configuration specs are included if applicable", "Layout remains readable without excessive line wrapping", "Unconfigured specs are omitted gracefully (no \"None\", \"N/A\", or blank values shown)", "Changes work in both `cub run` and direct session contexts", "Existing tests pass and new tests cover headline rendering scenarios"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T03:09:54.446152", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 38, "open": 37, "in_progress": 1, "closed": 0}, "secondary_result": {"total": 41, "open": 32, "in_progress": 1, "closed": 8}, "difference_summary": "total: 38 != 41; open: 37 != 32; closed: 0 != 8"}
{"timestamp": "2026-01-29T03:09:54.547930", "operation": "close_task", "task_id": "cub-n6x.9", "primary_result": {"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "closed", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313582Z", "updated_at": "2026-01-29T03:09:54.491255Z", "closed_at": "2026-01-29T03:09:54.491255Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "closed", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212407", "updated_at": "2026-01-29T03:09:54.545892", "closed_at": "2026-01-29T03:09:54.545888", "acceptance_criteria": ["Headline box displays harness backend name when available", "Headline box displays model name when available", "Other explicit configuration specs are included if applicable", "Layout remains readable without excessive line wrapping", "Unconfigured specs are omitted gracefully (no \"None\", \"N/A\", or blank values shown)", "Changes work in both `cub run` and direct session contexts", "Existing tests pass and new tests cover headline rendering scenarios"], "notes": "[Closed: 2026-01-29T03:09:54.545894] Completed by autonomous execution", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T03:09:54.610330", "operation": "get_task", "task_id": "cub-n6x.9", "primary_result": {"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "closed", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313582Z", "updated_at": "2026-01-29T03:09:54.491255Z", "closed_at": "2026-01-29T03:09:54.491255Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.9", "title": "Add harness and model info to task headline", "status": "closed", "priority": "P2", "type": "task", "description": "The task headline box currently displays only basic task metadata (ID, title, priority, type, iteration), but doesn't show the runtime configuration (harness backend, model) that the iteration will use. This makes it difficult for developers to understand which AI backend and model will be executing their task, especially in contexts where multiple backends are available or when switching between different model configurations. Adding this information to the headline improves visibility into the execution environment and helps catch configuration mismatches early.\n\n**Implementation Steps:**\n1. Identify where the headline box is rendered during task iteration startup (in both `cub run` flow and direct session context)\n2. Extract harness backend and model information from the current run context or task configuration\n3. Modify the headline rendering logic to include harness backend and model as additional display fields\n4. Implement graceful fallback to omit fields when not configured (no \"None\" or empty values displayed)\n5. Test layout with various configuration combinations to ensure readability and prevent excessive line wrapping\n6. Verify the changes work in both `cub run` autonomous mode and direct harness session contexts\n7. Add or update tests to cover headline rendering with different harness/model configurations", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212407", "updated_at": "2026-01-29T03:09:54.545892", "closed_at": "2026-01-29T03:09:54.545888", "acceptance_criteria": ["Headline box displays harness backend name when available", "Headline box displays model name when available", "Other explicit configuration specs are included if applicable", "Layout remains readable without excessive line wrapping", "Unconfigured specs are omitted gracefully (no \"None\", \"N/A\", or blank values shown)", "Changes work in both `cub run` and direct session contexts", "Existing tests pass and new tests cover headline rendering scenarios"], "notes": "[Closed: 2026-01-29T03:09:54.545894] Completed by autonomous execution", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T03:10:07.439826", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "open", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313625Z", "updated_at": "2026-01-29T01:58:07.462661Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "open", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313643Z", "updated_at": "2026-01-29T01:58:07.463381Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "secondary_result": [{"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "open", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212440", "updated_at": "2026-01-29T01:58:08.212440", "closed_at": null, "acceptance_criteria": ["Each streamed message is followed by exactly one newline character", "Output is readable with clear visual separation between consecutive messages", "Non-stream output (`cub run` without `--stream`) is unaffected", "Works correctly with all harness backends (claude, codex, gemini, opencode)", "No duplicate blank lines or extra whitespace introduced", "Existing tests still pass and new behavior is tested"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "open", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212476", "updated_at": "2026-01-29T01:58:08.212477", "closed_at": null, "acceptance_criteria": ["Progress indicator displays \"[current/total]\" format for each item", "Item title or brief summary appears alongside progress update", "Updates appear incrementally as each item completes processing", "No measurable latency increase compared to current implementation", "Output uses Rich console consistent with other cub commands", "Works correctly with punchlist files of varying sizes (3-50+ items)"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "difference_summary": "Task 0 (cub-n6x.10): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x; Task 1 (cub-n6x.11): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x"}
{"timestamp": "2026-01-29T03:10:07.489650", "operation": "get_task", "task_id": "cub-n6x.10", "primary_result": {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "open", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313625Z", "updated_at": "2026-01-29T01:58:07.462661Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "open", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212440", "updated_at": "2026-01-29T01:58:08.212440", "closed_at": null, "acceptance_criteria": ["Each streamed message is followed by exactly one newline character", "Output is readable with clear visual separation between consecutive messages", "Non-stream output (`cub run` without `--stream`) is unaffected", "Works correctly with all harness backends (claude, codex, gemini, opencode)", "No duplicate blank lines or extra whitespace introduced", "Existing tests still pass and new behavior is tested"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T03:10:07.613206", "operation": "update_task", "task_id": "cub-n6x.10", "primary_result": {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "in_progress", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313625Z", "updated_at": "2026-01-29T03:10:07.544052Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "in_progress", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212440", "updated_at": "2026-01-29T03:10:07.611465", "closed_at": null, "acceptance_criteria": ["Each streamed message is followed by exactly one newline character", "Output is readable with clear visual separation between consecutive messages", "Non-stream output (`cub run` without `--stream`) is unaffected", "Works correctly with all harness backends (claude, codex, gemini, opencode)", "No duplicate blank lines or extra whitespace introduced", "Existing tests still pass and new behavior is tested"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T03:16:07.316420", "operation": "get_task", "task_id": "cub-n6x.10", "primary_result": {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "closed", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313625Z", "updated_at": "2026-01-29T03:15:45.446995Z", "closed_at": "2026-01-29T03:15:45.446995Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "in_progress", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212440", "updated_at": "2026-01-29T03:10:07.611465", "closed_at": null, "acceptance_criteria": ["Each streamed message is followed by exactly one newline character", "Output is readable with clear visual separation between consecutive messages", "Non-stream output (`cub run` without `--stream`) is unaffected", "Works correctly with all harness backends (claude, codex, gemini, opencode)", "No duplicate blank lines or extra whitespace introduced", "Existing tests still pass and new behavior is tested"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T03:16:07.372467", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 37, "open": 36, "in_progress": 1, "closed": 0}, "secondary_result": {"total": 41, "open": 31, "in_progress": 1, "closed": 9}, "difference_summary": "total: 37 != 41; open: 36 != 31; closed: 0 != 9"}
{"timestamp": "2026-01-29T03:16:07.479637", "operation": "close_task", "task_id": "cub-n6x.10", "primary_result": {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "closed", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313625Z", "updated_at": "2026-01-29T03:16:07.420815Z", "closed_at": "2026-01-29T03:16:07.420815Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "closed", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212440", "updated_at": "2026-01-29T03:16:07.477193", "closed_at": "2026-01-29T03:16:07.477189", "acceptance_criteria": ["Each streamed message is followed by exactly one newline character", "Output is readable with clear visual separation between consecutive messages", "Non-stream output (`cub run` without `--stream`) is unaffected", "Works correctly with all harness backends (claude, codex, gemini, opencode)", "No duplicate blank lines or extra whitespace introduced", "Existing tests still pass and new behavior is tested"], "notes": "[Closed: 2026-01-29T03:16:07.477194] Completed by autonomous execution", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T03:16:07.545098", "operation": "get_task", "task_id": "cub-n6x.10", "primary_result": {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "closed", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313625Z", "updated_at": "2026-01-29T03:16:07.420815Z", "closed_at": "2026-01-29T03:16:07.420815Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.10", "title": "Add newlines between streamed harness messages", "status": "closed", "priority": "P2", "type": "task", "description": "When `cub run --stream` outputs AI harness messages, consecutive messages are concatenated without visual separation, making the output difficult to read and follow. Adding newlines between each streamed message improves readability and creates a cleaner user experience across all harness backends.\n\n**Implementation Steps:**\n1. Locate the stream message output handling in the run loop (likely in `cub.core.run` or `cub.cli.run`)\n2. Identify where harness messages are printed/streamed to stdout\n3. Add a newline character after each complete message is output\n4. Ensure the newline only appears between messages, not duplicated at message start/end\n5. Test with `cub run --stream` to verify output formatting with multiple consecutive messages\n6. Verify non-stream output remains unchanged and unaffected by the change\n7. Test with multiple harness backends (claude, codex, gemini) to ensure consistency", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212440", "updated_at": "2026-01-29T03:16:07.477193", "closed_at": "2026-01-29T03:16:07.477189", "acceptance_criteria": ["Each streamed message is followed by exactly one newline character", "Output is readable with clear visual separation between consecutive messages", "Non-stream output (`cub run` without `--stream`) is unaffected", "Works correctly with all harness backends (claude, codex, gemini, opencode)", "No duplicate blank lines or extra whitespace introduced", "Existing tests still pass and new behavior is tested"], "notes": "[Closed: 2026-01-29T03:16:07.477194] Completed by autonomous execution", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T03:16:18.620947", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "open", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-29T01:58:07.313643Z", "updated_at": "2026-01-29T01:58:07.463381Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "secondary_result": [{"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "open", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212476", "updated_at": "2026-01-29T01:58:08.212477", "closed_at": null, "acceptance_criteria": ["Progress indicator displays \"[current/total]\" format for each item", "Item title or brief summary appears alongside progress update", "Updates appear incrementally as each item completes processing", "No measurable latency increase compared to current implementation", "Output uses Rich console consistent with other cub commands", "Works correctly with punchlist files of varying sizes (3-50+ items)"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}], "difference_summary": "Task 0 (cub-n6x.11): labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']; parent: None != cub-n6x"}
{"timestamp": "2026-01-29T03:16:18.677212", "operation": "get_task", "task_id": "cub-n6x.11", "primary_result": {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "open", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": null, "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313643Z", "updated_at": "2026-01-29T01:58:07.463381Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "open", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": null, "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212476", "updated_at": "2026-01-29T01:58:08.212477", "closed_at": null, "acceptance_criteria": ["Progress indicator displays \"[current/total]\" format for each item", "Item title or brief summary appears alongside progress update", "Updates appear incrementally as each item completes processing", "No measurable latency increase compared to current implementation", "Output uses Rich console consistent with other cub commands", "Works correctly with punchlist files of varying sizes (3-50+ items)"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T03:16:18.801038", "operation": "update_task", "task_id": "cub-n6x.11", "primary_result": {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "in_progress", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313643Z", "updated_at": "2026-01-29T03:16:18.727690Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "in_progress", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212476", "updated_at": "2026-01-29T03:16:18.798562", "closed_at": null, "acceptance_criteria": ["Progress indicator displays \"[current/total]\" format for each item", "Item title or brief summary appears alongside progress update", "Updates appear incrementally as each item completes processing", "No measurable latency increase compared to current implementation", "Output uses Rich console consistent with other cub commands", "Works correctly with punchlist files of varying sizes (3-50+ items)"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T03:19:12.121498", "operation": "get_task", "task_id": "cub-n6x.11", "primary_result": {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "closed", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313643Z", "updated_at": "2026-01-29T03:18:52.416441Z", "closed_at": "2026-01-29T03:18:52.416441Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "in_progress", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212476", "updated_at": "2026-01-29T03:16:18.798562", "closed_at": null, "acceptance_criteria": ["Progress indicator displays \"[current/total]\" format for each item", "Item title or brief summary appears alongside progress update", "Updates appear incrementally as each item completes processing", "No measurable latency increase compared to current implementation", "Output uses Rich console consistent with other cub commands", "Works correctly with punchlist files of varying sizes (3-50+ items)"], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T03:19:12.178258", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 36, "open": 35, "in_progress": 1, "closed": 0}, "secondary_result": {"total": 41, "open": 30, "in_progress": 1, "closed": 10}, "difference_summary": "total: 36 != 41; open: 35 != 30; closed: 0 != 10"}
{"timestamp": "2026-01-29T03:19:12.285181", "operation": "close_task", "task_id": "cub-n6x.11", "primary_result": {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "closed", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313643Z", "updated_at": "2026-01-29T03:19:12.224076Z", "closed_at": "2026-01-29T03:19:12.224076Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "closed", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212476", "updated_at": "2026-01-29T03:19:12.283239", "closed_at": "2026-01-29T03:19:12.283234", "acceptance_criteria": ["Progress indicator displays \"[current/total]\" format for each item", "Item title or brief summary appears alongside progress update", "Updates appear incrementally as each item completes processing", "No measurable latency increase compared to current implementation", "Output uses Rich console consistent with other cub commands", "Works correctly with punchlist files of varying sizes (3-50+ items)"], "notes": "[Closed: 2026-01-29T03:19:12.283240] Completed by autonomous execution", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T03:19:12.350229", "operation": "get_task", "task_id": "cub-n6x.11", "primary_result": {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "closed", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": "cub-20260129-020557", "labels": ["epic:cub-n6x", "punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:07.313643Z", "updated_at": "2026-01-29T03:19:12.224076Z", "closed_at": "2026-01-29T03:19:12.224076Z", "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "secondary_result": {"id": "cub-n6x.11", "title": "Add progress updates during punchlist item processing", "status": "closed", "priority": "P2", "type": "task", "description": "The punchlist processing command currently provides no feedback during the hydration phase, leaving users uncertain whether work is progressing or if the tool has hung. This is especially noticeable when processing larger punchlist files (10+ items) with API calls. Adding item-by-item progress updates will provide real-time visibility into processing status and improve the user experience without adding complexity.\n\n**Implementation Steps:**\n1. Locate the punchlist processing command and hydration loop (likely in `src/cub/cli/` or `src/cub/core/`)\n2. Identify where items are iterated during hydration and replace silent iteration with Rich progress tracking\n3. Extract item titles/summaries to display alongside progress indicator in format \"[N/TOTAL]\"\n4. Use Rich's Progress or live output utilities to stream updates without blocking\n5. Test with multiple punchlist sizes to ensure no significant latency is introduced\n6. Verify output integrates cleanly with existing Rich console patterns in cub", "assignee": "cub-20260129-020557", "labels": ["punchlist"], "depends_on": [], "blocks": [], "parent": "cub-n6x", "created_at": "2026-01-29T01:58:08.212476", "updated_at": "2026-01-29T03:19:12.283239", "closed_at": "2026-01-29T03:19:12.283234", "acceptance_criteria": ["Progress indicator displays \"[current/total]\" format for each item", "Item title or brief summary appears alongside progress update", "Updates appear incrementally as each item completes processing", "No measurable latency increase compared to current implementation", "Output uses Rich console consistent with other cub commands", "Works correctly with punchlist files of varying sizes (3-50+ items)"], "notes": "[Closed: 2026-01-29T03:19:12.283240] Completed by autonomous execution", "complexity_label": null, "model_label": null, "is_ready": false, "priority_numeric": 2}, "difference_summary": "labels: ['epic:cub-n6x', 'punchlist'] != ['punchlist']"}
{"timestamp": "2026-01-29T03:19:20.577577", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 36, "open": 35, "in_progress": 1, "closed": 0}, "secondary_result": {"total": 41, "open": 30, "in_progress": 0, "closed": 11}, "difference_summary": "total: 36 != 41; open: 35 != 30; in_progress: 1 != 0; closed: 0 != 11"}
