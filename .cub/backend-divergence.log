{"timestamp": "2026-01-28T12:13:22.051198", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": "[]", "difference_summary": "List length mismatch: 30 != 0"}
{"timestamp": "2026-01-28T12:14:48.866353", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": "[]", "difference_summary": "List length mismatch: 30 != 0"}
{"timestamp": "2026-01-28T12:22:42.641606", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": "[]", "difference_summary": "List length mismatch: 30 != 0"}
{"timestamp": "2026-01-28T12:22:51.798269", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": "[]", "difference_summary": "List length mismatch: 30 != 0"}
{"timestamp": "2026-01-28T12:23:02.855417", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": "[]", "difference_summary": "List length mismatch: 30 != 0"}
{"timestamp": "2026-01-28T12:30:53.187377", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": "[]", "difference_summary": "List length mismatch: 30 != 0"}
{"timestamp": "2026-01-28T12:42:17.685184", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": "[]", "difference_summary": "List length mismatch: 30 != 0"}
{"timestamp": "2026-01-28T12:54:31.893245", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": "[]", "difference_summary": "List length mismatch: 12 != 0"}
{"timestamp": "2026-01-28T16:40:11.451009", "operation": "list_tasks", "task_id": null, "primary_result": [{"id": "cub-r1b", "title": "context-restructure #2: Foundation", "status": "open", "priority": "P0", "type": "epic", "description": "Build the demarcated section engine, constitution manager, and runloop prompt.", "assignee": null, "labels": ["core", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014075Z", "updated_at": "2026-01-28T03:34:52.132156Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-r1a", "title": "context-restructure #1: Cleanup", "status": "open", "priority": "P0", "type": "epic", "description": "Remove deprecated context files and references before building the new system.", "assignee": null, "labels": ["phase-1", "setup"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014034Z", "updated_at": "2026-01-28T03:34:52.131307Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-iyk", "title": "Phase 1: Foundation - Establish Stability Framework", "status": "open", "priority": "P0", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:53:12.334815-05:00", "updated_at": "2026-01-18T21:53:12.334815-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 0}, {"id": "cub-v8n", "title": "symbiotic-workflow #2: Session Ledger Integration", "status": "open", "priority": "P1", "type": "epic", "description": "Connect hook events to the ledger system so direct session work produces real ledger entries. Decouple ledger integration from the run loop so it works from either path.", "assignee": null, "labels": ["integration", "ledger", "phase-2"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008234Z", "updated_at": "2026-01-28T03:37:44.169647Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1c", "title": "context-restructure #3: Project Map", "status": "open", "priority": "P1", "type": "epic", "description": "Build the `cub map` command with structural analysis and tree-sitter code", "assignee": null, "labels": ["feature", "phase-3"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014090Z", "updated_at": "2026-01-28T03:34:52.132664Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-r1d", "title": "context-restructure #4: Task Prompt Enrichment", "status": "open", "priority": "P1", "type": "epic", "description": "Add epic context, sibling awareness, and retry injection to task prompts.", "assignee": null, "labels": ["feature", "phase-4"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:34:52.014099Z", "updated_at": "2026-01-28T03:34:52.133261Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-jm48", "title": "Fix bootstrap: detect ID collisions before import", "status": "open", "priority": "P1", "type": "task", "description": "When bootstrap imports tasks, it silently fails if IDs already exist in the database. The import reports '0 created, 0 updated, N unchanged' with no warning about the collision.\n\n**Root cause**: cmd_bootstrap() in cmd_prep.sh calls bd import without checking for existing IDs first.\n\n**Fix**: Before import, query existing IDs and compare against plan.jsonl. If collisions found, either:\n1. Error with a clear message listing conflicting IDs\n2. Offer --force flag to overwrite\n3. Offer --rename-on-import to use fresh IDs\n\n**Files**: src/cub/bash/lib/cmd_prep.sh (lines 1194-1387)", "assignee": null, "labels": ["bootstrap-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T22:08:19.917655-05:00", "updated_at": "2026-01-18T22:12:51.503055-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4wwm", "title": "Enable parallel test execution with pytest-xdist", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:55.544262-05:00", "updated_at": "2026-01-18T21:55:55.544262-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-k5sk", "title": "Create contract tests for harness CLIs", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:50.349806-05:00", "updated_at": "2026-01-18T21:55:50.349806-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-b305", "title": "Add tests for core/harness/codex.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:45.154242-05:00", "updated_at": "2026-01-18T21:55:45.154242-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-l6fi", "title": "Add tests for core/pr/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:39.963466-05:00", "updated_at": "2026-01-18T21:55:39.963466-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-4laj", "title": "Add tests for core/tasks/service.py", "status": "open", "priority": "P1", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-6jpc"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:34.770810-05:00", "updated_at": "2026-01-18T21:55:34.770810-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-6jpc", "title": "Phase 2: Coverage Expansion", "status": "open", "priority": "P1", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:55:24.407514-05:00", "updated_at": "2026-01-18T21:55:24.407514-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "status": "open", "priority": "P1", "type": "epic", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collection\u2014a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "assignee": null, "labels": ["feature:capture"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T14:40:04.949006-05:00", "updated_at": "2026-01-16T14:40:04.949006-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 1}, {"id": "cub-q2j", "title": "symbiotic-workflow #3: Task Backend and Instructions", "status": "open", "priority": "P2", "type": "epic", "description": "JSON backend reaches full parity with beads. `cub task` CLI provides task management from any context. Instructions guide direct session workflow.", "assignee": null, "labels": ["instructions", "phase-3", "tasks"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008249Z", "updated_at": "2026-01-28T03:37:44.168551Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-vxg3", "title": "Add test status badge to README", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:54.738546-05:00", "updated_at": "2026-01-18T21:57:54.738546-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-dsl4", "title": "Add coverage trend gate to CI", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:49.523611-05:00", "updated_at": "2026-01-18T21:57:49.523611-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-sylz", "title": "Split CI workflow into separate jobs", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-ck1z"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:44.333093-05:00", "updated_at": "2026-01-18T21:57:44.333093-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ck1z", "title": "Phase 4: CI Hardening", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:33.956036-05:00", "updated_at": "2026-01-18T21:57:33.956036-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-gah6", "title": "Add make test-fast target", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:57:02.898015-05:00", "updated_at": "2026-01-18T21:57:02.898015-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-bg5k", "title": "Create pre-commit hook for affected tests", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:57.715668-05:00", "updated_at": "2026-01-18T21:56:57.715668-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-qrnl", "title": "Add pytest-testmon for smart test selection", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-e2h9"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:52.516256-05:00", "updated_at": "2026-01-18T21:56:52.516256-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-e2h9", "title": "Phase 3: Smart Local Testing", "status": "open", "priority": "P2", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:56:42.144734-05:00", "updated_at": "2026-01-18T21:56:42.144734-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-3bx", "title": "can remove curb reference in CHANGELOG.md", "status": "open", "priority": "P2", "type": "task", "description": "", "assignee": null, "labels": ["quick-fix"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-16T21:25:17.751722-05:00", "updated_at": "2026-01-16T21:25:17.751722-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 2}, {"id": "cub-ht4", "title": "Add cub upgrade command for pipx-based updates", "status": "open", "priority": "P2", "type": "task", "description": "## Context\nWith the hybrid CLI installed via pipx, users need an easy way to upgrade to new releases.\n\n## Implementation\nAdd `cub upgrade` command that:\n1. Detects installation method (pipx, pip --user, editable)\n2. For pipx: runs `pipx upgrade cub` or reinstall from tag\n3. Shows current vs available version\n4. Supports `--version X.Y.Z` to install specific version\n\n## Example Usage\n```bash\ncub upgrade              # Upgrade to latest release\ncub upgrade --version 0.23.2  # Install specific version\ncub upgrade --check      # Just show if update available\n```\n\n## Files\n- src/cub/cli/upgrade.py (new)\n- src/cub/cli/__init__.py (register command)", "assignee": null, "labels": ["complexity:low", "enhancement"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-15T10:44:33.816090-05:00", "updated_at": "2026-01-15T10:44:33.816090-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "low", "model_label": "haiku", "is_ready": true, "priority_numeric": 2}, {"id": "cub-r9d", "title": "symbiotic-workflow #4: Reconciliation and Polish", "status": "open", "priority": "P3", "type": "epic", "description": "Handle edge cases, provide manual recovery paths, and validate end-to-end parity between `cub run` and direct sessions.", "assignee": null, "labels": ["phase-4", "polish", "validation"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T03:37:44.008258Z", "updated_at": "2026-01-28T03:37:44.169214Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-d0z5", "title": "Add performance regression tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:46.612153-05:00", "updated_at": "2026-01-18T21:58:46.612153-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-rr7p", "title": "Add Docker integration tests for sandbox", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:41.422467-05:00", "updated_at": "2026-01-18T21:58:41.422467-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-jwm1", "title": "Add Hypothesis property-based tests", "status": "open", "priority": "P3", "type": "task", "description": "", "assignee": null, "labels": ["epic:cub-i8b6"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:36.212716-05:00", "updated_at": "2026-01-18T21:58:36.212716-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}, {"id": "cub-i8b6", "title": "Phase 5: Refinement", "status": "open", "priority": "P3", "type": "epic", "description": "", "assignee": null, "labels": [], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-18T21:58:25.819537-05:00", "updated_at": "2026-01-18T21:58:25.819537-05:00", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": null, "model_label": null, "is_ready": true, "priority_numeric": 3}], "secondary_result": "[]", "difference_summary": "List length mismatch: 30 != 0"}
{"timestamp": "2026-01-28T17:56:01.693547", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 59, "open": 59, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 29, "in_progress": 0, "closed": 0}, "difference_summary": "total: 59 != 29; open: 59 != 29"}
{"timestamp": "2026-01-28T17:56:01.737724", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "open", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": null, "labels": ["blocking", "complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409049Z", "updated_at": "2026-01-28T17:54:44.598534Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}], "secondary_result": [{"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "open", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T17:54:46.169149", "closed_at": null, "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "open", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T17:54:46.169251", "closed_at": null, "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "open", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T17:54:46.169289", "closed_at": null, "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "open", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T17:54:46.169329", "closed_at": null, "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "open", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T17:54:46.169369", "closed_at": null, "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 1 != 5"}
{"timestamp": "2026-01-28T17:56:01.789427", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "open", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": null, "labels": ["blocking", "complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409049Z", "updated_at": "2026-01-28T17:54:44.598534Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}], "secondary_result": [{"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "open", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T17:54:46.169149", "closed_at": null, "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "open", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T17:54:46.169251", "closed_at": null, "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "open", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T17:54:46.169289", "closed_at": null, "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "open", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T17:54:46.169329", "closed_at": null, "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "open", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T17:54:46.169369", "closed_at": null, "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 1 != 5"}
{"timestamp": "2026-01-28T17:56:01.926994", "operation": "update_task", "task_id": "cub-b1a.1", "primary_result": {"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "in_progress", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["blocking", "complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409049Z", "updated_at": "2026-01-28T17:56:01.856607Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "secondary_result": {"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "in_progress", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T17:56:01.925032", "closed_at": null, "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "difference_summary": "labels: ['blocking', 'complexity:high', 'core', 'epic:cub-b1a', 'model:opus', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:opus', 'complexity:high', 'blocking']"}
{"timestamp": "2026-01-28T18:04:02.243523", "operation": "close_task", "task_id": "cub-b1a.1", "primary_result": {"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["blocking", "complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409049Z", "updated_at": "2026-01-28T18:04:02.171447Z", "closed_at": "2026-01-28T18:04:02.171447Z", "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "secondary_result": {"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "difference_summary": "labels: ['blocking', 'complexity:high', 'core', 'epic:cub-b1a', 'model:opus', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:opus', 'complexity:high', 'blocking']"}
{"timestamp": "2026-01-28T18:04:02.315551", "operation": "get_task", "task_id": "cub-b1a.1", "primary_result": {"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["blocking", "complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409049Z", "updated_at": "2026-01-28T18:04:02.171447Z", "closed_at": "2026-01-28T18:04:02.171447Z", "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "secondary_result": {"id": "cub-b1a.1", "title": "Create core/run package with prompt builder extraction", "status": "closed", "priority": "P0", "type": "task", "description": "The prompt builder (system prompt generation, task context injection, AGENT.md reading) is the most self-contained piece of `cli/run.py` and the safest to extract first. It establishes the `core/run/` package structure.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/__init__.py` package\n2. Create `src/cub/core/run/prompt_builder.py` \u2014 extract `generate_system_prompt()`, `_build_task_context()`, `_read_agent_md()`, and related functions from `cli/run.py`\n3. Define `PromptConfig` and `TaskPrompt` data models for inputs/outputs\n4. Update `cli/run.py` to import from `core/run/prompt_builder` instead of using local functions\n5. Ensure all existing run tests pass unchanged\n6. Add unit tests for prompt builder in isolation\n\n**Files:** src/cub/core/run/__init__.py, src/cub/core/run/prompt_builder.py, src/cub/cli/run.py, tests/test_run_prompt_builder.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "blocking"], "depends_on": [], "blocks": ["cub-b1a.2", "cub-b1a.3", "cub-b1a.4", "cub-b1a.5"], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169146", "updated_at": "2026-01-28T18:04:02.242112", "closed_at": "2026-01-28T18:04:02.242086", "acceptance_criteria": ["`core/run/prompt_builder.py` exists with all prompt generation logic", "`cli/run.py` calls prompt builder from core, no local prompt logic remains", "`pytest tests/` passes with no regressions", "`mypy src/cub` passes clean", "No Rich imports in `core/run/`"], "notes": "[Closed: 2026-01-28T18:04:02.242114] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "difference_summary": "labels: ['blocking', 'complexity:high', 'core', 'epic:cub-b1a', 'model:opus', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:opus', 'complexity:high', 'blocking']"}
{"timestamp": "2026-01-28T18:04:13.080001", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 58, "open": 58, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 28, "in_progress": 0, "closed": 1}, "difference_summary": "total: 58 != 29; open: 58 != 28; closed: 0 != 1"}
{"timestamp": "2026-01-28T18:04:15.144435", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "open", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409166Z", "updated_at": "2026-01-28T17:54:44.599809Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "open", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": null, "labels": ["complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409206Z", "updated_at": "2026-01-28T17:54:44.600239Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "open", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409236Z", "updated_at": "2026-01-28T17:54:44.600672Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "open", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409259Z", "updated_at": "2026-01-28T17:54:44.601026Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "open", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T17:54:46.169251", "closed_at": null, "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "open", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T17:54:46.169289", "closed_at": null, "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "open", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T17:54:46.169329", "closed_at": null, "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "open", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T17:54:46.169369", "closed_at": null, "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1a.2): labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1a; Task 1 (cub-b1a.3): labels: ['complexity:high', 'core', 'epic:cub-b1a', 'model:opus', 'phase-1', 'refactor', 'risk:high'] != ['phase-1', 'core', 'refactor', 'model:opus', 'complexity:high', 'risk:high']; parent: None != cub-b1a; Task 2 (cub-b1a.4): labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1a; Task 3 (cub-b1a.5): labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1a"}
{"timestamp": "2026-01-28T18:04:15.309261", "operation": "update_task", "task_id": "cub-b1a.2", "primary_result": {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "in_progress", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409166Z", "updated_at": "2026-01-28T18:04:15.219118Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, "secondary_result": {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "in_progress", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:04:15.307723", "closed_at": null, "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, "difference_summary": "labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T18:09:17.084049", "operation": "close_task", "task_id": "cub-b1a.2", "primary_result": {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409166Z", "updated_at": "2026-01-28T18:09:17.031081Z", "closed_at": "2026-01-28T18:09:17.031081Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, "secondary_result": {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, "difference_summary": "labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T18:09:17.160908", "operation": "get_task", "task_id": "cub-b1a.2", "primary_result": {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409166Z", "updated_at": "2026-01-28T18:09:17.031081Z", "closed_at": "2026-01-28T18:09:17.031081Z", "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, "secondary_result": {"id": "cub-b1a.2", "title": "Extract budget tracking to core/run/budget.py", "status": "closed", "priority": "P0", "type": "task", "description": "Budget tracking (token counting, cost accounting, limit enforcement) is business logic embedded in the run loop. It needs to be accessible to any interface that runs tasks.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/budget.py` with `BudgetManager` class\n2. Extract token tracking, cost accumulation, and limit checking from `cli/run.py`\n3. Define `BudgetConfig` (limits) and `BudgetState` (current usage) models\n4. Add `check_limit()` method that returns whether to continue or stop\n5. Update `cli/run.py` to use `BudgetManager` instead of inline tracking\n6. Write tests for budget limit enforcement\n\n**Files:** src/cub/core/run/budget.py, src/cub/cli/run.py, tests/test_run_budget.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169250", "updated_at": "2026-01-28T18:09:17.082589", "closed_at": "2026-01-28T18:09:17.082585", "acceptance_criteria": ["`BudgetManager` handles all token/cost tracking", "Budget limits trigger clean stops with clear reasons", "`cli/run.py` has no inline budget math", "Tests cover: under budget, at budget, over budget, no budget set"], "notes": "[Closed: 2026-01-28T18:09:17.082592] Completed by autonomous execution", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 0}, "difference_summary": "labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T18:09:25.155207", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 57, "open": 57, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 27, "in_progress": 0, "closed": 2}, "difference_summary": "total: 57 != 29; open: 57 != 27; closed: 0 != 2"}
{"timestamp": "2026-01-28T18:09:27.233152", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "open", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": null, "labels": ["complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409206Z", "updated_at": "2026-01-28T17:54:44.600239Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "open", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409236Z", "updated_at": "2026-01-28T17:54:44.600672Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "open", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409259Z", "updated_at": "2026-01-28T17:54:44.601026Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "open", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T17:54:46.169289", "closed_at": null, "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": true, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "open", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T17:54:46.169329", "closed_at": null, "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "open", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T17:54:46.169369", "closed_at": null, "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1a.3): labels: ['complexity:high', 'core', 'epic:cub-b1a', 'model:opus', 'phase-1', 'refactor', 'risk:high'] != ['phase-1', 'core', 'refactor', 'model:opus', 'complexity:high', 'risk:high']; parent: None != cub-b1a; Task 1 (cub-b1a.4): labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1a; Task 2 (cub-b1a.5): labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1a"}
{"timestamp": "2026-01-28T18:09:27.426285", "operation": "update_task", "task_id": "cub-b1a.3", "primary_result": {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "in_progress", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-175601", "labels": ["complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409206Z", "updated_at": "2026-01-28T18:09:27.325121Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "secondary_result": {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "in_progress", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:09:27.424174", "closed_at": null, "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "difference_summary": "labels: ['complexity:high', 'core', 'epic:cub-b1a', 'model:opus', 'phase-1', 'refactor', 'risk:high'] != ['phase-1', 'core', 'refactor', 'model:opus', 'complexity:high', 'risk:high']"}
{"timestamp": "2026-01-28T18:39:43.802963", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 57, "open": 56, "in_progress": 1, "closed": 0}, "secondary_result": {"total": 29, "open": 26, "in_progress": 1, "closed": 2}, "difference_summary": "total: 57 != 29; open: 56 != 26; closed: 0 != 2"}
{"timestamp": "2026-01-28T18:39:43.865454", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "in_progress", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-175601", "labels": ["complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409206Z", "updated_at": "2026-01-28T18:09:37.984900Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "open", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409236Z", "updated_at": "2026-01-28T17:54:44.600672Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "open", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409259Z", "updated_at": "2026-01-28T17:54:44.601026Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "open", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T17:54:46.169329", "closed_at": null, "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "open", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T17:54:46.169369", "closed_at": null, "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 3 != 2"}
{"timestamp": "2026-01-28T18:39:43.946747", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "in_progress", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-175601", "labels": ["complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409206Z", "updated_at": "2026-01-28T18:09:37.984900Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "open", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409236Z", "updated_at": "2026-01-28T17:54:44.600672Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "open", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409259Z", "updated_at": "2026-01-28T17:54:44.601026Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "open", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T17:54:46.169329", "closed_at": null, "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "open", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T17:54:46.169369", "closed_at": null, "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "List length mismatch: 3 != 2"}
{"timestamp": "2026-01-28T18:39:44.020967", "operation": "get_task", "task_id": "cub-b1a.3", "primary_result": {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "in_progress", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-175601", "labels": ["complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409206Z", "updated_at": "2026-01-28T18:09:37.984900Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "secondary_result": {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "in_progress", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-175601", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:09:27.424174", "closed_at": null, "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "difference_summary": "labels: ['complexity:high', 'core', 'epic:cub-b1a', 'model:opus', 'phase-1', 'refactor', 'risk:high'] != ['phase-1', 'core', 'refactor', 'model:opus', 'complexity:high', 'risk:high']"}
{"timestamp": "2026-01-28T18:39:44.156197", "operation": "update_task", "task_id": "cub-b1a.3", "primary_result": {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "in_progress", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409206Z", "updated_at": "2026-01-28T18:39:44.094849Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "secondary_result": {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "in_progress", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:39:44.154676", "closed_at": null, "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "difference_summary": "labels: ['complexity:high', 'core', 'epic:cub-b1a', 'model:opus', 'phase-1', 'refactor', 'risk:high'] != ['phase-1', 'core', 'refactor', 'model:opus', 'complexity:high', 'risk:high']"}
{"timestamp": "2026-01-28T18:41:42.478897", "operation": "get_task", "task_id": "cub-b1a.3", "primary_result": {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409206Z", "updated_at": "2026-01-28T18:41:17.671009Z", "closed_at": "2026-01-28T18:41:17.671009Z", "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "secondary_result": {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "in_progress", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:39:44.154676", "closed_at": null, "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "difference_summary": "status: TaskStatus.CLOSED != TaskStatus.IN_PROGRESS; labels: ['complexity:high', 'core', 'epic:cub-b1a', 'model:opus', 'phase-1', 'refactor', 'risk:high'] != ['phase-1', 'core', 'refactor', 'model:opus', 'complexity:high', 'risk:high']"}
{"timestamp": "2026-01-28T18:41:42.557243", "operation": "get_task_counts", "task_id": null, "primary_result": {"total": 56, "open": 56, "in_progress": 0, "closed": 0}, "secondary_result": {"total": 29, "open": 26, "in_progress": 1, "closed": 2}, "difference_summary": "total: 56 != 29; open: 56 != 26; in_progress: 0 != 1; closed: 0 != 2"}
{"timestamp": "2026-01-28T18:41:42.746247", "operation": "close_task", "task_id": "cub-b1a.3", "primary_result": {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409206Z", "updated_at": "2026-01-28T18:41:42.631490Z", "closed_at": "2026-01-28T18:41:42.631490Z", "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "secondary_result": {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "difference_summary": "labels: ['complexity:high', 'core', 'epic:cub-b1a', 'model:opus', 'phase-1', 'refactor', 'risk:high'] != ['phase-1', 'core', 'refactor', 'model:opus', 'complexity:high', 'risk:high']"}
{"timestamp": "2026-01-28T18:41:42.869220", "operation": "get_task", "task_id": "cub-b1a.3", "primary_result": {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["complexity:high", "core", "epic:cub-b1a", "model:opus", "phase-1", "refactor", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409206Z", "updated_at": "2026-01-28T18:41:42.631490Z", "closed_at": "2026-01-28T18:41:42.631490Z", "acceptance_criteria": [], "notes": "", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "secondary_result": {"id": "cub-b1a.3", "title": "Extract loop state machine to core/run/loop.py", "status": "closed", "priority": "P0", "type": "task", "description": "The run loop state machine (pick task \u2192 execute \u2192 record \u2192 next) is the core of cub. Extracting it cleanly is the hardest part of this phase \u2014 it touches task selection, harness invocation, result recording, and error handling.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/loop.py` with `RunLoop` class\n2. Define `RunConfig` model (all loop configuration: once, epic, harness, etc.)\n3. Define `RunEvent` enum/model for loop events (task_start, task_end, budget_update, error, complete)\n4. Implement `execute()` as a generator that yields `RunEvent` objects\n5. Move task selection, harness invocation coordination, and result recording into `RunLoop`\n6. Keep signal handling and Rich rendering in `cli/run.py`\n7. `cli/run.py` becomes: parse args \u2192 create `RunConfig` \u2192 iterate `RunLoop.execute()` \u2192 render events\n\n**Files:** src/cub/core/run/loop.py, src/cub/core/run/models.py, src/cub/cli/run.py, tests/test_run_loop.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:opus", "complexity:high", "risk:high"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169288", "updated_at": "2026-01-28T18:41:42.743657", "closed_at": "2026-01-28T18:41:42.743618", "acceptance_criteria": ["`RunLoop.execute()` yields `RunEvent` stream, no print/console output", "`cli/run.py` reduced to <500 lines (arg parsing + event rendering)", "`cub run --once` works end-to-end through the new architecture", "`cub run` (multi-task) works end-to-end", "All existing run tests pass", "`mypy` passes clean"], "notes": "[Closed: 2026-01-28T18:41:42.743661] Completed by autonomous execution", "complexity_label": "high", "model_label": "opus", "is_ready": false, "priority_numeric": 0}, "difference_summary": "labels: ['complexity:high', 'core', 'epic:cub-b1a', 'model:opus', 'phase-1', 'refactor', 'risk:high'] != ['phase-1', 'core', 'refactor', 'model:opus', 'complexity:high', 'risk:high']"}
{"timestamp": "2026-01-28T18:41:51.907101", "operation": "get_ready_tasks", "task_id": null, "primary_result": [{"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "open", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409236Z", "updated_at": "2026-01-28T17:54:44.600672Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "open", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": null, "created_at": "2026-01-28T17:54:44.409259Z", "updated_at": "2026-01-28T17:54:44.601026Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "secondary_result": [{"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "open", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T17:54:46.169329", "closed_at": null, "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, {"id": "cub-b1a.5", "title": "Extract git operations to core/run/git_ops.py", "status": "open", "priority": "P1", "type": "task", "description": "Branch creation, commit tracking, and other git operations during `cub run` are business logic that should be accessible from any interface.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/git_ops.py` with run-specific git functions\n2. Extract `_create_branch_from_base()`, `_get_gh_issue_title()`, `_get_epic_title()` from `cli/run.py`\n3. Define clear interfaces: `create_run_branch(config) -> str`, `get_epic_context(epic_id) -> EpicContext`\n4. Update `RunLoop` to call git_ops functions instead of inline logic\n5. Write tests with mocked git operations\n\n**Files:** src/cub/core/run/git_ops.py, src/cub/cli/run.py, tests/test_run_git_ops.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169369", "updated_at": "2026-01-28T17:54:46.169369", "closed_at": null, "acceptance_criteria": ["All git operations during run extracted to `core/run/git_ops.py`", "No git subprocess calls remain in `cli/run.py`", "Branch naming convention preserved", "Tests cover branch creation, epic title resolution"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}], "difference_summary": "Task 0 (cub-b1a.4): labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1a; Task 1 (cub-b1a.5): labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']; parent: None != cub-b1a"}
{"timestamp": "2026-01-28T18:41:51.962427", "operation": "get_task", "task_id": "cub-b1a.4", "primary_result": {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "open", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": null, "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409236Z", "updated_at": "2026-01-28T17:54:44.600672Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "open", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": null, "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T17:54:46.169329", "closed_at": null, "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": true, "priority_numeric": 1}, "difference_summary": "labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']"}
{"timestamp": "2026-01-28T18:41:52.102329", "operation": "update_task", "task_id": "cub-b1a.4", "primary_result": {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "in_progress", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["complexity:medium", "core", "epic:cub-b1a", "model:sonnet", "phase-1", "refactor"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:44.409236Z", "updated_at": "2026-01-28T18:41:52.017847Z", "closed_at": null, "acceptance_criteria": [], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "secondary_result": {"id": "cub-b1a.4", "title": "Extract interrupt handling to core/run/interrupt.py", "status": "in_progress", "priority": "P1", "type": "task", "description": "Signal handling (SIGINT/SIGTERM) for clean shutdown needs to work regardless of which interface is driving the run loop. The interrupt handler should coordinate with the loop state machine.\n\n**Implementation Steps:**\n1. Create `src/cub/core/run/interrupt.py` with `InterruptHandler` class\n2. Extract signal registration and `_interrupted` flag logic from `cli/run.py`\n3. Implement cooperative interruption: handler sets flag, loop checks flag between tasks\n4. Add `on_interrupt` callback for cleanup (artifact finalization, ledger entry)\n5. Update `RunLoop` to check interrupt state between iterations\n\n**Files:** src/cub/core/run/interrupt.py, src/cub/core/run/loop.py, src/cub/cli/run.py, tests/test_run_interrupt.py", "assignee": "cub-20260128-183943", "labels": ["phase-1", "core", "refactor", "model:sonnet", "complexity:medium"], "depends_on": [], "blocks": [], "parent": "cub-b1a", "created_at": "2026-01-28T17:54:46.169329", "updated_at": "2026-01-28T18:41:52.100544", "closed_at": null, "acceptance_criteria": ["`InterruptHandler` manages SIGINT/SIGTERM registration", "Interrupts cause clean shutdown between tasks (not mid-task)", "Artifacts and ledger entries are finalized on interrupt", "Works when called from CLI or programmatically"], "notes": "", "complexity_label": "medium", "model_label": "sonnet", "is_ready": false, "priority_numeric": 1}, "difference_summary": "labels: ['complexity:medium', 'core', 'epic:cub-b1a', 'model:sonnet', 'phase-1', 'refactor'] != ['phase-1', 'core', 'refactor', 'model:sonnet', 'complexity:medium']"}
