I'll help you create a manual testing protocol for E4. Let me start by understanding the project context and then create a comprehensive testing checklist.Let me find the project root:Good! Now let me check the context files to understand E4 and the project structure:Now let me update the task status and look at the E4 specification:Let me read the reliability phase spec and look for E4 details:Now let me check if there are any existing test files for the run command to understand current testing patterns:Perfect! Now let me read the itemized plan to understand what E4 tasks exist:Perfect! I can see the task clearly. Let me look at what test files exist to understand current testing patterns and successful exit behavior:Great! Now I have a clear understanding. Let me create a comprehensive manual testing protocol document. This is a documentation task, so I'll create the test checklist:Perfect! Now let me verify the file was created correctly and run the feedback loops:Excellent! The file is created and comprehensive. Now let me run the feedback loops to ensure everything is valid:The markdown file is valid (the py_compile was just trying to parse it as Python, which is wrong). Let me verify it's a proper markdown file and check the structure:Perfect! The file is valid UTF-8 markdown. Now let me verify the document structure and check that all required acceptance criteria are covered:Let me verify all scenarios are covered by checking for the expected sections:Perfect! Let me verify the checklist covers all required items from the task specification:Excellent! Now let me close the task and commit the changes:Perfect! Now let me commit the changes:Excellent! Now let me update the progress.txt file with learnings from this task:Perfect! Now let me commit the progress file update:Perfect! Now let me verify the final state of the task and check if there are other open tasks related to E4 that need attention:Excellent! The task is closed. Let me verify the git commits are in place and check the final document one more time:Perfect! Let me do a final verification that the file is complete and well-formatted:Perfect! Let me verify all the required acceptance criteria have been met:Perfect! Let me verify no other E4 tasks are blocking and show a summary:Good! Only the epic is left open (as expected). Let me verify the file is properly saved and check the structure one final time:Excellent! Everything is complete. Let me create one final summary:Perfect! The task is complete. Let me verify the git status is clean:The ledger files were auto-updated. Let me commit those as well to keep the git history clean:Perfect! Now verify git status is clean:Excellent! Everything is clean and committed. Let me create a final summary of what was accomplished:

---

## Summary

I have successfully completed **Task cub-r4h.4: Manual testing protocol for E4**.

### Deliverable

Created a comprehensive **869-line manual testing protocol** at `plans/reliability-phase/e4-manual-tests.md` that enables Marc and QA testers to manually validate all exit scenarios for `cub run`.

### Contents

The document covers **8 complete test scenarios**:

1. **Normal Completion** - Happy path baseline
2. **Ctrl+C (SIGINT)** - User interrupt handling
3. **SIGTERM** - Graceful termination signal
4. **SIGKILL (kill -9)** - Force termination handling
5. **Budget Exhaustion** - Token limit enforcement
6. **Iteration Limit** - Loop termination conditions
7. **Task Failure** - Error handling and recovery
8. **Overnight Run** - Extended duration testing

### Each Scenario Includes

- **Trigger** - Exact commands to start the test
- **Expected Behavior** - What should happen
- **Verification Steps** - Objective checks with commands
- **Pass/Fail Criteria** - Measurable success metrics
- **Recovery Procedures** - How to fix if test fails

### Additional Sections

- **Setup Instructions** - Environment preparation with exact commands
- **Summary Checklist** - Track results across all scenarios
- **Troubleshooting Guide** - Symptom-based problem solving
- **Sign-off Process** - Document completion and results
- **Mock Harness Configuration** - Reproducible test configuration

### Acceptance Criteria Met

✅ Checklist covers all exit scenarios
✅ Each scenario has clear pass/fail criteria  
✅ Recovery steps documented for failures
✅ Checklist is actionable by non-developer

### Key Features

- **Non-developer friendly** - All commands are copy-paste ready
- **Signal handling** - Comprehensive SIGINT/SIGTERM/SIGKILL coverage
- **Cross-platform** - Unix/Linux/macOS considerations included
- **Artifact verification** - Multi-level verification patterns
- **Recovery-focused** - Specific diagnostics and fix procedures

### Commits

- `task(cub-r4h.4): Manual testing protocol for E4`
- `docs(@progress.txt): Add learnings from cub-r4h.4 task`
- `chore: Update ledger for cub-r4h.4 completion`

### Status

✅ Task **CLOSED** | ✅ All files committed | ✅ Working directory clean

<promise>COMPLETE</promise>