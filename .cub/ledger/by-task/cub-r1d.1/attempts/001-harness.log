I'll start by understanding the current task and searching the codebase to understand existing patterns.Let me search for the right files:Now let me read the relevant files to understand existing patterns:Let me continue reading the generate_task_prompt function and look at the Task model:Now let me check the test file to understand the testing patterns:Now let me look at the complete test file to understand the testing patterns:Let me check what the epic looks like:Great! Now I understand the requirements. Let me check how the backend works and see if there are methods to get epic info:Good! Now I have a clear understanding. Let me implement the epic context generation function. Based on the code structure and task description, I need to:

1. Create a `generate_epic_context(task, task_backend)` function
2. It should check if the task has a parent (epic)
3. Fetch epic details and sibling tasks
4. Format them into a context section
5. Truncate the epic description to ~200 words
6. Integrate it into the task prompt generation

Let me start implementing:Now let me implement the epic context generation function. I'll add it before `generate_task_prompt`:Great! Now let me create comprehensive tests for this function. Let me check the test file structure first:Now let me add tests for the epic context generation function. I'll add them to the test file:Now let me add the tests for the epic context generation. I'll insert them before the TestGenerateTaskPrompt class:Now let me add a test to verify that the epic context is integrated into the task prompt:Now let's run the tests to make sure everything works:I see the issue - the "..." is added as part of the string, not as a separate word. Let me fix the test:Now let's run the tests again:Great! Now let's run the task prompt tests to ensure integration works:Perfect! All tests pass. Now let's run all the tests in the test file to ensure we didn't break anything:Excellent! All tests pass. Now let's run the full test suite to ensure we haven't broken anything else:Tests are running well. Let me check if all tests pass:Perfect! All tests pass. Now let's run type checking and linting:The mypy errors are pre-existing and unrelated to my changes. Let me fix the ruff linting error:Perfect! Now let's verify our implementation is working by running one more test to make sure the integration is correct:Excellent! Let me also verify the implementation works in a real scenario by checking what the actual prompt would look like for this task:Perfect! The implementation is working correctly. Now let's run the full test suite one more time to ensure everything is solid:Excellent! All tests pass. Let me close the task and commit the changes:Perfect! Now let me append learnings to the progress file:Perfect! Task completed successfully. Let me verify all remaining tasks are closed:There are still open tasks, so this is not the end. The task has been completed successfully! Here's a summary:

## Task Completed: cub-r1d.1 - Implement epic context generation for task prompts

### Implementation Summary

I successfully implemented epic context generation for task prompts with the following components:

1. **`generate_epic_context(task, task_backend)` Function** (src/cub/cli/run.py)
   - Checks if task has a parent epic
   - Fetches epic details and sibling tasks
   - Truncates epic description to ~200 words
   - Displays completed sibling tasks (✓) and remaining tasks (○/◐)
   - Returns formatted context or None

2. **Integration into `generate_task_prompt()`**
   - Epic context is inserted after acceptance criteria
   - Only shown when task belongs to an epic
   - Provides agents with big-picture awareness

3. **Comprehensive Test Suite** (tests/test_run_core.py)
   - 8 tests for `generate_epic_context()` covering:
     - Tasks without parent
     - Missing epic
     - Basic structure
     - Long description truncation
     - Sibling task display
     - Many siblings
   - 2 integration tests for task prompt generation

### Test Results
- ✅ All 8 new epic context tests pass
- ✅ All 2 integration tests pass  
- ✅ All 86 existing run_core tests pass
- ✅ Full test suite: 4113 tests passed
- ✅ Linting: All checks passed

### Real-World Verification
Tested with actual task cub-r1d.1 and confirmed epic context displays correctly with parent epic cub-r1d and sibling tasks.

The implementation prevents repeated work by showing what siblings have completed and helps agents avoid painting themselves into a corner by showing what tasks remain in the epic.