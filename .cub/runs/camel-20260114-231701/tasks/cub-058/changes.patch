diff --git a/.beads/issues.jsonl b/.beads/issues.jsonl
index efe5307..ad8bcba 100644
--- a/.beads/issues.jsonl
+++ b/.beads/issues.jsonl
@@ -51,11 +51,11 @@
 {"id":"cub-051","title":"Final integration test pass","description":"## Context\nFull end-to-end testing before 1.0 release.\n\n## Implementation Hints\n\n**Recommended Model:** sonnet\n**Estimated Duration:** 30m\n**Approach:** Run all tests, manual E2E testing, verify all features.\n\n## Implementation Steps\n1. Run full BATS test suite\n2. Run E2E tests in tests/e2e/\n3. Manual test: curb init → curb run → curb status → curb explain\n4. Verify artifacts generated correctly\n5. Verify git workflow (branch, commits)\n6. Verify guardrails work\n7. Verify failure handling\n8. Test with both beads and prd.json backends\n\n## Acceptance Criteria\n- [ ] All automated tests pass\n- [ ] E2E workflow completes successfully\n- [ ] All new features work correctly\n- [ ] No regressions from previous version\n- [ ] Documentation matches behavior\n\n## Files Likely Involved\n- All project files\n\n## Notes\nThis is the pre-release validation pass.","status":"closed","priority":1,"issue_type":"task","assignee":"uakari","created_at":"2026-01-10T10:15:02.633149-05:00","updated_at":"2026-01-11T12:04:54.33975-05:00","closed_at":"2026-01-11T12:04:54.33975-05:00","close_reason":"All integration tests pass: 730/732 BATS tests, E2E tests, manual testing complete. Fixed test isolation bug (CURB_PROJECT_DIR not unset). All features verified working.","labels":["complexity:medium","model:sonnet","phase-6","test"],"dependencies":[{"issue_id":"cub-051","depends_on_id":"cub-E06","type":"parent-child","created_at":"2026-01-10T10:17:12.211713-05:00","created_by":"lavallee"}]}
 {"id":"cub-052","title":"CHECKPOINT: 1.0 release validation","description":"## Context\nFinal checkpoint before declaring 1.0 release ready.\n\n## Implementation Hints\n\n**Recommended Model:** sonnet\n**Estimated Duration:** 25m\n**Approach:** Final review of all requirements and quality.\n\n## Implementation Steps\n1. Review triage requirements - all P0 complete?\n2. Review architecture - all components implemented?\n3. All checkpoints passed?\n4. Documentation complete and accurate?\n5. UPGRADING.md ready for existing users?\n6. Version number updated to 1.0.0?\n7. Create release notes\n8. Tag release\n\n## Acceptance Criteria\n- [ ] All P0 requirements implemented\n- [ ] All P1 requirements implemented (or documented as deferred)\n- [ ] All tests pass\n- [ ] Documentation complete\n- [ ] Ready for public release\n\n## Files Likely Involved\n- All project files\n\n## Notes\nFinal 1.0 checkpoint. Congratulations on reaching this milestone!","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-10T10:15:02.633149-05:00","updated_at":"2026-01-10T18:25:26.507837-05:00","closed_at":"2026-01-10T18:25:26.507837-05:00","close_reason":"1.0 release validation complete. All P0 requirements implemented and tested. P1 requirements documented as deferred to post-1.0 releases. Tests passing (341+), documentation complete (2275+ lines), version set to 1.0.0, release notes created.","labels":["checkpoint","complexity:medium","model:sonnet","phase-6"],"dependencies":[{"issue_id":"cub-052","depends_on_id":"cub-E06","type":"parent-child","created_at":"2026-01-10T10:17:12.246655-05:00","created_by":"lavallee"}]}
 {"id":"cub-053","title":"Initialize Python project with uv","description":"## Context\nSet up the Python project structure using uv for fast dependency management. This is the foundation for all Python code.\n\n## Implementation Hints\n**Recommended Model:** haiku\n**Estimated Duration:** 1h\n**Approach:** Use uv init, configure pyproject.toml with project metadata and dependencies.\n\n## Implementation Steps\n1. Run `uv init` in project root\n2. Configure pyproject.toml with:\n   - Project name: cub\n   - Python version: \u003e=3.10\n   - Dependencies: typer, pydantic, rich, GitPython, pytest\n   - Entry point: cub = \"cub.cli:app\"\n3. Create src/cub/ directory structure\n4. Add __init__.py and __main__.py\n5. Verify `uv run python -m cub --help` works\n\n## Acceptance Criteria\n- [ ] pyproject.toml exists with correct metadata\n- [ ] uv.lock generated\n- [ ] `uv run python -m cub --help` shows Typer help\n- [ ] Project installable with `uv pip install -e .`\n\n## Files Likely Involved\n- pyproject.toml (new)\n- src/cub/__init__.py (new)\n- src/cub/__main__.py (new)\n- src/cub/cli/__init__.py (new)\n\n## Notes\n- Use src layout for proper packaging\n- Include dev dependencies: pytest, ruff, mypy","status":"closed","priority":0,"issue_type":"task","assignee":"vulture","created_at":"2026-01-14T22:42:11.704031-05:00","updated_at":"2026-01-14T23:13:05.164686-05:00","closed_at":"2026-01-14T23:13:05.164686-05:00","close_reason":"Closed","labels":["complexity:low","model:haiku","phase-1","release:v0.21","setup"],"dependencies":[{"issue_id":"cub-053","depends_on_id":"cub-E07","type":"parent-child","created_at":"2026-01-14T22:58:30.596114-05:00","created_by":"Marc Lavallee"}]}
-{"id":"cub-054","title":"Create Task and Config Pydantic models","description":"## Context\nDefine the core data models using Pydantic v2. These models replace the ad-hoc JSON parsing in Bash and provide validation, serialization, and IDE support.\n\n## Implementation Hints\n**Recommended Model:** sonnet\n**Estimated Duration:** 1.5h\n**Approach:** Study existing Bash code for field names and types. Use Pydantic v2 features (model_validator, computed fields).\n\n## Implementation Steps\n1. Create src/cub/core/tasks/models.py with:\n   - TaskStatus enum (open, in_progress, closed)\n   - TaskPriority enum (P0-P4)\n   - Task model with all fields from current prd.json/beads\n   - Add model_label computed property for model:X labels\n2. Create src/cub/core/config/models.py with:\n   - GuardrailsConfig\n   - BudgetConfig\n   - HarnessConfig\n   - HooksConfig\n   - CubConfig (top-level)\n3. Create src/cub/core/status/models.py with:\n   - RunStatus model for dashboard\n   - Include current_task, iteration, budget, events\n4. Add unit tests for model validation\n\n## Acceptance Criteria\n- [ ] Task model can parse existing prd.json tasks\n- [ ] CubConfig model can parse existing .cub.json\n- [ ] All enums have correct values matching existing code\n- [ ] Pydantic validation catches invalid data\n- [ ] Tests pass for happy path and error cases\n\n## Files Likely Involved\n- src/cub/core/__init__.py (new)\n- src/cub/core/tasks/__init__.py (new)\n- src/cub/core/tasks/models.py (new)\n- src/cub/core/config/__init__.py (new)\n- src/cub/core/config/models.py (new)\n- tests/test_models.py (new)\n\n## Notes\n- Reference lib/tasks.sh and lib/config.sh for field names\n- Use Field() for defaults and descriptions\n- Include examples in docstrings","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-14T22:42:11.704031-05:00","updated_at":"2026-01-14T22:42:11.704031-05:00","labels":["complexity:medium","model","model:sonnet","phase-1","release:v0.21"],"dependencies":[{"issue_id":"cub-054","depends_on_id":"cub-E07","type":"parent-child","created_at":"2026-01-14T22:58:30.649227-05:00","created_by":"Marc Lavallee"},{"issue_id":"cub-054","depends_on_id":"cub-053","type":"blocks","created_at":"2026-01-14T22:58:39.878722-05:00","created_by":"Marc Lavallee"}]}
-{"id":"cub-055","title":"Implement TaskBackend protocol and registry","description":"## Context\nDefine the TaskBackend protocol that all task backends must implement. This enables the pluggable architecture where beads and JSON backends are interchangeable.\n\n## Implementation Hints\n**Recommended Model:** sonnet\n**Estimated Duration:** 1h\n**Approach:** Use typing.Protocol with @runtime_checkable. Create a registry pattern for backend discovery.\n\n## Implementation Steps\n1. Create src/cub/core/tasks/backend.py with:\n   - TaskBackend Protocol class\n   - Methods: list_tasks, get_task, get_ready_tasks, update_task, close_task\n   - Backend registry dict\n   - register_backend decorator\n   - get_backend factory function\n   - detect_backend function (auto-detect beads vs json)\n2. Add type hints for all parameters and returns\n3. Document expected behavior in docstrings\n\n## Acceptance Criteria\n- [ ] TaskBackend protocol defined with all required methods\n- [ ] @register_backend decorator works\n- [ ] get_backend('beads') and get_backend('json') work\n- [ ] detect_backend auto-selects based on .beads/ presence\n- [ ] Protocol is @runtime_checkable\n\n## Files Likely Involved\n- src/cub/core/tasks/backend.py (new)\n- src/cub/core/tasks/__init__.py (update exports)\n\n## Notes\n- Reference lib/tasks.sh detect_backend() for auto-detection logic\n- Use Protocol from typing, not ABC\n- Include capability query method if needed","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-14T22:42:11.704031-05:00","updated_at":"2026-01-14T22:42:11.704031-05:00","labels":["complexity:medium","logic","model:sonnet","phase-1","release:v0.21"],"dependencies":[{"issue_id":"cub-055","depends_on_id":"cub-E07","type":"parent-child","created_at":"2026-01-14T22:58:30.702432-05:00","created_by":"Marc Lavallee"},{"issue_id":"cub-055","depends_on_id":"cub-054","type":"blocks","created_at":"2026-01-14T22:58:39.9318-05:00","created_by":"Marc Lavallee"}]}
-{"id":"cub-056","title":"Implement BeadsBackend for task management","description":"## Context\nImplement the beads backend that wraps the `bd` CLI tool. This is the primary task backend when beads is available.\n\n## Implementation Hints\n**Recommended Model:** sonnet\n**Estimated Duration:** 2h\n**Approach:** Use subprocess to call bd CLI, parse JSON output with Pydantic models. Reference lib/beads.sh for command patterns.\n\n## Implementation Steps\n1. Create src/cub/core/tasks/beads.py with:\n   - BeadsBackend class implementing TaskBackend\n   - Helper for running bd commands with subprocess\n   - Parse bd JSON output into Task models\n   - Handle bd errors gracefully\n2. Implement all TaskBackend methods:\n   - list_tasks: `bd list --json [--status X] [--label X]`\n   - get_task: `bd show \u003cid\u003e --json`\n   - get_ready_tasks: `bd ready --json`\n   - update_task: `bd update \u003cid\u003e --status X`\n   - close_task: `bd close \u003cid\u003e -r \"reason\"`\n3. Add @register_backend('beads') decorator\n4. Handle case when bd is not installed\n\n## Acceptance Criteria\n- [ ] Can list tasks from beads\n- [ ] Can get single task by ID\n- [ ] Can find ready (unblocked) tasks\n- [ ] Can update task status\n- [ ] Can close task with reason\n- [ ] Graceful error when bd not installed\n- [ ] JSON parsing produces valid Task models\n\n## Files Likely Involved\n- src/cub/core/tasks/beads.py (new)\n- src/cub/core/tasks/__init__.py (update)\n\n## Notes\n- Reference lib/beads.sh for exact bd command patterns\n- Use subprocess.run with capture_output=True\n- Parse stderr for error messages","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-14T22:42:11.704031-05:00","updated_at":"2026-01-14T22:42:11.704031-05:00","labels":["complexity:medium","logic","model:sonnet","phase-1","release:v0.21"],"dependencies":[{"issue_id":"cub-056","depends_on_id":"cub-E07","type":"parent-child","created_at":"2026-01-14T22:58:30.761848-05:00","created_by":"Marc Lavallee"},{"issue_id":"cub-056","depends_on_id":"cub-055","type":"blocks","created_at":"2026-01-14T22:58:39.988096-05:00","created_by":"Marc Lavallee"}]}
-{"id":"cub-057","title":"Implement JsonBackend for task management","description":"## Context\nImplement the JSON file backend for projects not using beads. Reads/writes prd.json directly.\n\n## Implementation Hints\n**Recommended Model:** sonnet\n**Estimated Duration:** 1.5h\n**Approach:** Load prd.json, parse with Pydantic, implement CRUD operations. Reference lib/tasks.sh json_* functions.\n\n## Implementation Steps\n1. Create src/cub/core/tasks/json.py with:\n   - JsonBackend class implementing TaskBackend\n   - Load/save prd.json file\n   - Parse tasks into Task models\n   - Implement dependency resolution for ready tasks\n2. Implement all TaskBackend methods:\n   - list_tasks: filter in-memory\n   - get_task: lookup by id\n   - get_ready_tasks: check depends_on resolution\n   - update_task: modify and save\n   - close_task: set status=closed, add notes\n3. Add @register_backend('json') decorator\n4. Handle missing prd.json gracefully\n\n## Acceptance Criteria\n- [ ] Can load tasks from prd.json\n- [ ] Can filter by status and label\n- [ ] Dependency resolution works correctly\n- [ ] Can update and save changes\n- [ ] File not corrupted on write errors\n- [ ] Creates empty task list if prd.json missing\n\n## Files Likely Involved\n- src/cub/core/tasks/json.py (new)\n- src/cub/core/tasks/__init__.py (update)\n\n## Notes\n- Use atomic write (write to temp, then rename)\n- Reference lib/tasks.sh json_* functions\n- Preserve unknown fields in prd.json","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-14T22:42:11.704031-05:00","updated_at":"2026-01-14T22:42:11.704031-05:00","labels":["complexity:medium","logic","model:sonnet","phase-1","release:v0.21"],"dependencies":[{"issue_id":"cub-057","depends_on_id":"cub-E07","type":"parent-child","created_at":"2026-01-14T22:58:30.813545-05:00","created_by":"Marc Lavallee"},{"issue_id":"cub-057","depends_on_id":"cub-055","type":"blocks","created_at":"2026-01-14T22:58:40.043713-05:00","created_by":"Marc Lavallee"}]}
-{"id":"cub-058","title":"Implement config loader with multi-layer merging","description":"## Context\nImplement configuration loading that merges defaults \u003c user config \u003c project config \u003c env vars, matching the existing Bash behavior.\n\n## Implementation Hints\n**Recommended Model:** sonnet\n**Estimated Duration:** 1.5h\n**Approach:** Load JSON files, deep merge dicts, apply env var overrides, validate with Pydantic.\n\n## Implementation Steps\n1. Create src/cub/core/config/loader.py with:\n   - load_config() function returning CubConfig\n   - get_user_config_path() using XDG\n   - get_project_config_path()\n   - deep_merge() helper for dict merging\n   - apply_env_overrides() for CUB_* vars\n2. Implement precedence:\n   - Start with hardcoded defaults\n   - Merge ~/.config/cub/config.json\n   - Merge ./.cub.json\n   - Apply CUB_BUDGET, CUB_REVIEW_STRICT, etc.\n3. Validate final result with Pydantic\n4. Cache loaded config for session\n\n## Acceptance Criteria\n- [ ] Loads defaults when no config files exist\n- [ ] User config overrides defaults\n- [ ] Project config overrides user config\n- [ ] Env vars override all config files\n- [ ] Invalid config produces helpful error\n- [ ] Config is cached after first load\n\n## Files Likely Involved\n- src/cub/core/config/loader.py (new)\n- src/cub/core/config/__init__.py (update exports)\n\n## Notes\n- Reference lib/config.sh for exact merge behavior\n- Use pathlib for paths\n- XDG: ~/.config/cub/ on Linux, ~/Library/Application Support/cub/ on macOS","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-14T22:42:11.704031-05:00","updated_at":"2026-01-14T22:42:11.704031-05:00","labels":["complexity:medium","logic","model:sonnet","phase-1","release:v0.21"],"dependencies":[{"issue_id":"cub-058","depends_on_id":"cub-E07","type":"parent-child","created_at":"2026-01-14T22:58:30.867418-05:00","created_by":"Marc Lavallee"},{"issue_id":"cub-058","depends_on_id":"cub-054","type":"blocks","created_at":"2026-01-14T22:58:40.0987-05:00","created_by":"Marc Lavallee"}]}
+{"id":"cub-054","title":"Create Task and Config Pydantic models","description":"## Context\nDefine the core data models using Pydantic v2. These models replace the ad-hoc JSON parsing in Bash and provide validation, serialization, and IDE support.\n\n## Implementation Hints\n**Recommended Model:** sonnet\n**Estimated Duration:** 1.5h\n**Approach:** Study existing Bash code for field names and types. Use Pydantic v2 features (model_validator, computed fields).\n\n## Implementation Steps\n1. Create src/cub/core/tasks/models.py with:\n   - TaskStatus enum (open, in_progress, closed)\n   - TaskPriority enum (P0-P4)\n   - Task model with all fields from current prd.json/beads\n   - Add model_label computed property for model:X labels\n2. Create src/cub/core/config/models.py with:\n   - GuardrailsConfig\n   - BudgetConfig\n   - HarnessConfig\n   - HooksConfig\n   - CubConfig (top-level)\n3. Create src/cub/core/status/models.py with:\n   - RunStatus model for dashboard\n   - Include current_task, iteration, budget, events\n4. Add unit tests for model validation\n\n## Acceptance Criteria\n- [ ] Task model can parse existing prd.json tasks\n- [ ] CubConfig model can parse existing .cub.json\n- [ ] All enums have correct values matching existing code\n- [ ] Pydantic validation catches invalid data\n- [ ] Tests pass for happy path and error cases\n\n## Files Likely Involved\n- src/cub/core/__init__.py (new)\n- src/cub/core/tasks/__init__.py (new)\n- src/cub/core/tasks/models.py (new)\n- src/cub/core/config/__init__.py (new)\n- src/cub/core/config/models.py (new)\n- tests/test_models.py (new)\n\n## Notes\n- Reference lib/tasks.sh and lib/config.sh for field names\n- Use Field() for defaults and descriptions\n- Include examples in docstrings","status":"closed","priority":0,"issue_type":"task","assignee":"camel","created_at":"2026-01-14T22:42:11.704031-05:00","updated_at":"2026-01-14T23:24:28.192201-05:00","closed_at":"2026-01-14T23:24:28.192201-05:00","close_reason":"Closed","labels":["complexity:medium","model","model:sonnet","phase-1","release:v0.21"],"dependencies":[{"issue_id":"cub-054","depends_on_id":"cub-E07","type":"parent-child","created_at":"2026-01-14T22:58:30.649227-05:00","created_by":"Marc Lavallee"},{"issue_id":"cub-054","depends_on_id":"cub-053","type":"blocks","created_at":"2026-01-14T22:58:39.878722-05:00","created_by":"Marc Lavallee"}]}
+{"id":"cub-055","title":"Implement TaskBackend protocol and registry","description":"## Context\nDefine the TaskBackend protocol that all task backends must implement. This enables the pluggable architecture where beads and JSON backends are interchangeable.\n\n## Implementation Hints\n**Recommended Model:** sonnet\n**Estimated Duration:** 1h\n**Approach:** Use typing.Protocol with @runtime_checkable. Create a registry pattern for backend discovery.\n\n## Implementation Steps\n1. Create src/cub/core/tasks/backend.py with:\n   - TaskBackend Protocol class\n   - Methods: list_tasks, get_task, get_ready_tasks, update_task, close_task\n   - Backend registry dict\n   - register_backend decorator\n   - get_backend factory function\n   - detect_backend function (auto-detect beads vs json)\n2. Add type hints for all parameters and returns\n3. Document expected behavior in docstrings\n\n## Acceptance Criteria\n- [ ] TaskBackend protocol defined with all required methods\n- [ ] @register_backend decorator works\n- [ ] get_backend('beads') and get_backend('json') work\n- [ ] detect_backend auto-selects based on .beads/ presence\n- [ ] Protocol is @runtime_checkable\n\n## Files Likely Involved\n- src/cub/core/tasks/backend.py (new)\n- src/cub/core/tasks/__init__.py (update exports)\n\n## Notes\n- Reference lib/tasks.sh detect_backend() for auto-detection logic\n- Use Protocol from typing, not ABC\n- Include capability query method if needed","status":"closed","priority":0,"issue_type":"task","assignee":"camel","created_at":"2026-01-14T22:42:11.704031-05:00","updated_at":"2026-01-14T23:27:42.549025-05:00","closed_at":"2026-01-14T23:27:42.549025-05:00","close_reason":"Closed","labels":["complexity:medium","logic","model:sonnet","phase-1","release:v0.21"],"dependencies":[{"issue_id":"cub-055","depends_on_id":"cub-E07","type":"parent-child","created_at":"2026-01-14T22:58:30.702432-05:00","created_by":"Marc Lavallee"},{"issue_id":"cub-055","depends_on_id":"cub-054","type":"blocks","created_at":"2026-01-14T22:58:39.9318-05:00","created_by":"Marc Lavallee"}]}
+{"id":"cub-056","title":"Implement BeadsBackend for task management","description":"## Context\nImplement the beads backend that wraps the `bd` CLI tool. This is the primary task backend when beads is available.\n\n## Implementation Hints\n**Recommended Model:** sonnet\n**Estimated Duration:** 2h\n**Approach:** Use subprocess to call bd CLI, parse JSON output with Pydantic models. Reference lib/beads.sh for command patterns.\n\n## Implementation Steps\n1. Create src/cub/core/tasks/beads.py with:\n   - BeadsBackend class implementing TaskBackend\n   - Helper for running bd commands with subprocess\n   - Parse bd JSON output into Task models\n   - Handle bd errors gracefully\n2. Implement all TaskBackend methods:\n   - list_tasks: `bd list --json [--status X] [--label X]`\n   - get_task: `bd show \u003cid\u003e --json`\n   - get_ready_tasks: `bd ready --json`\n   - update_task: `bd update \u003cid\u003e --status X`\n   - close_task: `bd close \u003cid\u003e -r \"reason\"`\n3. Add @register_backend('beads') decorator\n4. Handle case when bd is not installed\n\n## Acceptance Criteria\n- [ ] Can list tasks from beads\n- [ ] Can get single task by ID\n- [ ] Can find ready (unblocked) tasks\n- [ ] Can update task status\n- [ ] Can close task with reason\n- [ ] Graceful error when bd not installed\n- [ ] JSON parsing produces valid Task models\n\n## Files Likely Involved\n- src/cub/core/tasks/beads.py (new)\n- src/cub/core/tasks/__init__.py (update)\n\n## Notes\n- Reference lib/beads.sh for exact bd command patterns\n- Use subprocess.run with capture_output=True\n- Parse stderr for error messages","status":"closed","priority":0,"issue_type":"task","assignee":"camel","created_at":"2026-01-14T22:42:11.704031-05:00","updated_at":"2026-01-14T23:32:49.494567-05:00","closed_at":"2026-01-14T23:32:49.494567-05:00","close_reason":"Closed","labels":["complexity:medium","logic","model:sonnet","phase-1","release:v0.21"],"dependencies":[{"issue_id":"cub-056","depends_on_id":"cub-E07","type":"parent-child","created_at":"2026-01-14T22:58:30.761848-05:00","created_by":"Marc Lavallee"},{"issue_id":"cub-056","depends_on_id":"cub-055","type":"blocks","created_at":"2026-01-14T22:58:39.988096-05:00","created_by":"Marc Lavallee"}]}
+{"id":"cub-057","title":"Implement JsonBackend for task management","description":"## Context\nImplement the JSON file backend for projects not using beads. Reads/writes prd.json directly.\n\n## Implementation Hints\n**Recommended Model:** sonnet\n**Estimated Duration:** 1.5h\n**Approach:** Load prd.json, parse with Pydantic, implement CRUD operations. Reference lib/tasks.sh json_* functions.\n\n## Implementation Steps\n1. Create src/cub/core/tasks/json.py with:\n   - JsonBackend class implementing TaskBackend\n   - Load/save prd.json file\n   - Parse tasks into Task models\n   - Implement dependency resolution for ready tasks\n2. Implement all TaskBackend methods:\n   - list_tasks: filter in-memory\n   - get_task: lookup by id\n   - get_ready_tasks: check depends_on resolution\n   - update_task: modify and save\n   - close_task: set status=closed, add notes\n3. Add @register_backend('json') decorator\n4. Handle missing prd.json gracefully\n\n## Acceptance Criteria\n- [ ] Can load tasks from prd.json\n- [ ] Can filter by status and label\n- [ ] Dependency resolution works correctly\n- [ ] Can update and save changes\n- [ ] File not corrupted on write errors\n- [ ] Creates empty task list if prd.json missing\n\n## Files Likely Involved\n- src/cub/core/tasks/json.py (new)\n- src/cub/core/tasks/__init__.py (update)\n\n## Notes\n- Use atomic write (write to temp, then rename)\n- Reference lib/tasks.sh json_* functions\n- Preserve unknown fields in prd.json","status":"closed","priority":0,"issue_type":"task","assignee":"camel","created_at":"2026-01-14T22:42:11.704031-05:00","updated_at":"2026-01-14T23:38:51.696274-05:00","closed_at":"2026-01-14T23:38:51.696274-05:00","close_reason":"Closed","labels":["complexity:medium","logic","model:sonnet","phase-1","release:v0.21"],"dependencies":[{"issue_id":"cub-057","depends_on_id":"cub-E07","type":"parent-child","created_at":"2026-01-14T22:58:30.813545-05:00","created_by":"Marc Lavallee"},{"issue_id":"cub-057","depends_on_id":"cub-055","type":"blocks","created_at":"2026-01-14T22:58:40.043713-05:00","created_by":"Marc Lavallee"}]}
+{"id":"cub-058","title":"Implement config loader with multi-layer merging","description":"## Context\nImplement configuration loading that merges defaults \u003c user config \u003c project config \u003c env vars, matching the existing Bash behavior.\n\n## Implementation Hints\n**Recommended Model:** sonnet\n**Estimated Duration:** 1.5h\n**Approach:** Load JSON files, deep merge dicts, apply env var overrides, validate with Pydantic.\n\n## Implementation Steps\n1. Create src/cub/core/config/loader.py with:\n   - load_config() function returning CubConfig\n   - get_user_config_path() using XDG\n   - get_project_config_path()\n   - deep_merge() helper for dict merging\n   - apply_env_overrides() for CUB_* vars\n2. Implement precedence:\n   - Start with hardcoded defaults\n   - Merge ~/.config/cub/config.json\n   - Merge ./.cub.json\n   - Apply CUB_BUDGET, CUB_REVIEW_STRICT, etc.\n3. Validate final result with Pydantic\n4. Cache loaded config for session\n\n## Acceptance Criteria\n- [ ] Loads defaults when no config files exist\n- [ ] User config overrides defaults\n- [ ] Project config overrides user config\n- [ ] Env vars override all config files\n- [ ] Invalid config produces helpful error\n- [ ] Config is cached after first load\n\n## Files Likely Involved\n- src/cub/core/config/loader.py (new)\n- src/cub/core/config/__init__.py (update exports)\n\n## Notes\n- Reference lib/config.sh for exact merge behavior\n- Use pathlib for paths\n- XDG: ~/.config/cub/ on Linux, ~/Library/Application Support/cub/ on macOS","status":"closed","priority":0,"issue_type":"task","assignee":"camel","created_at":"2026-01-14T22:42:11.704031-05:00","updated_at":"2026-01-14T23:44:32.401566-05:00","closed_at":"2026-01-14T23:44:32.401566-05:00","close_reason":"Closed","labels":["complexity:medium","logic","model:sonnet","phase-1","release:v0.21"],"dependencies":[{"issue_id":"cub-058","depends_on_id":"cub-E07","type":"parent-child","created_at":"2026-01-14T22:58:30.867418-05:00","created_by":"Marc Lavallee"},{"issue_id":"cub-058","depends_on_id":"cub-054","type":"blocks","created_at":"2026-01-14T22:58:40.0987-05:00","created_by":"Marc Lavallee"}]}
 {"id":"cub-059","title":"Implement HarnessBackend protocol and registry","description":"## Context\nDefine the HarnessBackend protocol for AI coding assistant abstraction. Supports capability detection and pluggable harness implementations.\n\n## Implementation Hints\n**Recommended Model:** sonnet\n**Estimated Duration:** 1h\n**Approach:** Mirror TaskBackend pattern. Include capabilities model for feature detection.\n\n## Implementation Steps\n1. Create src/cub/core/harness/models.py with:\n   - HarnessCapabilities model (streaming, token_reporting, etc.)\n   - HarnessResult model (output, tokens, duration)\n2. Create src/cub/core/harness/backend.py with:\n   - HarnessBackend Protocol class\n   - Properties: name, capabilities\n   - Methods: invoke, invoke_streaming, is_available\n   - Registry and factory functions\n   - detect_harness function (auto-detect available)\n3. Define capability constants matching existing code\n\n## Acceptance Criteria\n- [ ] HarnessBackend protocol with all methods\n- [ ] HarnessCapabilities correctly typed\n- [ ] HarnessResult captures all needed data\n- [ ] detect_harness finds available harness\n- [ ] Registry pattern works\n\n## Files Likely Involved\n- src/cub/core/harness/__init__.py (new)\n- src/cub/core/harness/models.py (new)\n- src/cub/core/harness/backend.py (new)\n\n## Notes\n- Reference lib/harness.sh _harness_get_capabilities()\n- Include model_selection capability\n- Support both blocking and streaming invocation","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-14T22:42:11.704031-05:00","updated_at":"2026-01-14T22:42:11.704031-05:00","labels":["complexity:medium","logic","model:sonnet","phase-1","release:v0.21"],"dependencies":[{"issue_id":"cub-059","depends_on_id":"cub-E07","type":"parent-child","created_at":"2026-01-14T22:58:30.919848-05:00","created_by":"Marc Lavallee"},{"issue_id":"cub-059","depends_on_id":"cub-053","type":"blocks","created_at":"2026-01-14T22:58:40.15276-05:00","created_by":"Marc Lavallee"}]}
 {"id":"cub-060","title":"Implement Claude harness backend","description":"## Context\nImplement the Claude Code harness - the primary AI backend. Supports streaming, token reporting, system prompts, and model selection.\n\n## Implementation Hints\n**Recommended Model:** sonnet\n**Estimated Duration:** 2h\n**Approach:** Wrap claude CLI with subprocess. Parse stream-json output for tokens. Reference lib/harness.sh claude_invoke().\n\n## Implementation Steps\n1. Create src/cub/core/harness/claude.py with:\n   - ClaudeBackend class implementing HarnessBackend\n   - is_available() checks for claude command\n   - Build command with flags:\n     - --print (non-interactive)\n     - --dangerously-skip-permissions (auto mode)\n     - --append-system-prompt (system prompt)\n     - --model (model selection)\n     - --output-format stream-json (streaming)\n2. Implement invoke():\n   - Run subprocess, capture output\n   - Parse JSON for result and token usage\n3. Implement invoke_streaming():\n   - Yield lines as they arrive\n   - Parse final token counts\n4. Set capabilities correctly\n\n## Acceptance Criteria\n- [ ] Can invoke Claude with prompt\n- [ ] System prompt passed correctly\n- [ ] Model selection works\n- [ ] Streaming yields output incrementally\n- [ ] Token usage reported accurately\n- [ ] Graceful handling when claude not installed\n\n## Files Likely Involved\n- src/cub/core/harness/claude.py (new)\n- src/cub/core/harness/__init__.py (update)\n\n## Notes\n- Reference lib/harness.sh claude_invoke() and claude_invoke_streaming()\n- Parse .usage from JSON output\n- Use subprocess.PIPE with line buffering for streaming","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-14T22:42:11.704031-05:00","updated_at":"2026-01-14T22:42:11.704031-05:00","labels":["complexity:medium","logic","model:sonnet","phase-1","release:v0.21"],"dependencies":[{"issue_id":"cub-060","depends_on_id":"cub-E07","type":"parent-child","created_at":"2026-01-14T22:58:30.973006-05:00","created_by":"Marc Lavallee"},{"issue_id":"cub-060","depends_on_id":"cub-059","type":"blocks","created_at":"2026-01-14T22:58:40.206409-05:00","created_by":"Marc Lavallee"}]}
 {"id":"cub-061","title":"Implement Codex harness backend","description":"## Context\nImplement the OpenAI Codex CLI harness. Supports auto mode and streaming but no separate system prompt.\n\n## Implementation Hints\n**Recommended Model:** sonnet\n**Estimated Duration:** 1.5h\n**Approach:** Wrap codex CLI. Combine system and task prompts since no --system-prompt flag.\n\n## Implementation Steps\n1. Create src/cub/core/harness/codex.py with:\n   - CodexBackend class implementing HarnessBackend\n   - is_available() checks for codex command\n   - Build command with flags:\n     - --full-auto (autonomous mode)\n     - --json (JSONL output)\n     - -m (model selection)\n2. Implement invoke():\n   - Combine system_prompt + prompt into single message\n   - Parse JSONL output\n3. Implement invoke_streaming():\n   - Parse JSONL events as they arrive\n4. Set capabilities (no system_prompt, no token_reporting)\n\n## Acceptance Criteria\n- [ ] Can invoke Codex with prompt\n- [ ] System prompt combined correctly\n- [ ] Model selection works (-m flag)\n- [ ] Streaming parses JSONL events\n- [ ] Graceful handling when codex not installed\n\n## Files Likely Involved\n- src/cub/core/harness/codex.py (new)\n- src/cub/core/harness/__init__.py (update)\n\n## Notes\n- Reference lib/harness.sh codex_invoke()\n- Codex uses --json not --output-format\n- Token reporting is estimated, not from CLI","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-14T22:42:11.704031-05:00","updated_at":"2026-01-14T22:42:11.704031-05:00","labels":["complexity:medium","logic","model:sonnet","phase-1","release:v0.21"],"dependencies":[{"issue_id":"cub-061","depends_on_id":"cub-E07","type":"parent-child","created_at":"2026-01-14T22:58:31.0251-05:00","created_by":"Marc Lavallee"},{"issue_id":"cub-061","depends_on_id":"cub-059","type":"blocks","created_at":"2026-01-14T22:58:40.26044-05:00","created_by":"Marc Lavallee"}]}
