# Punchlist: v0.27.0-bugs-1

## Improve cub monitor dashboard layout and display

Enhance the `cub monitor` command to provide better visibility into task progress and run context.

**Current State:**
The monitor dashboard currently displays a budget column and task information in a flat layout without clear progress stages or run parameters.

**Changes Requested:**
1. Remove the budget column from the display
2. Add a header section showing:
   - Run type (e.g., `—epic cub-abc`, `—label feature`)
   - Branch name being operated on
   - Task count and current position (e.g., `6/9`)
3. Reorganize tasks into a mini Kanban layout:
   - Left column: "To Do" (pending tasks)
   - Right column top: "Doing" (current task in progress)
   - Right column bottom: "Done" (completed tasks)
   - Include timestamps for task transitions

**Acceptance Criteria:**
- [ ] Budget column is removed from the monitor display
- [ ] Header displays run parameters (epic/label), branch name, and task progress (X/Y format)
- [ ] Tasks are organized in Kanban columns (To Do, Doing, Done)
- [ ] Timestamps are visible for task state changes
- [ ] Monitor renders clearly in terminal without overlapping text
- [ ] All existing monitor functionality (refresh, updates) continues to work

---

## Clean working directory after cub run completes

Currently, when `cub run` completes, task-level items are committed but other artifacts (progress files, logs, temporary test outputs) remain uncommitted. This leaves the working directory dirty and requires manual cleanup.

**Context:**
- `cub run` successfully commits task changes via beads
- However, useful artifacts (progress tracking, build logs, etc.) aren't committed
- Temporary files (backups, test artifacts, debug outputs) clutter the repo
- Sessions end with `git status` showing uncommitted changes

**Requirements:**
- After task execution completes, perform a final working directory scan
- Identify and commit useful artifacts (progress files, logs, reports)
- Identify and remove clearly temporary files (*.bak, *.tmp, test caches, debug outputs)
- Commit any new useful files before final `git status`
- End with clean working directory: `git status` shows "nothing to commit"
- Provide visibility into what was cleaned/committed (log output)

**Acceptance Criteria:**
- [ ] `cub run --once` or full run ends with `git status` showing no uncommitted changes
- [ ] Useful artifacts (progress files, build logs) are committed
- [ ] Temporary test files are removed (configurable patterns)
- [ ] User sees summary of cleanup actions (e.g., "Committed 3 files, removed 5 temporary artifacts")
- [ ] Works with both beads and JSON task backends
- [ ] Cleanup patterns are configurable via `.cub.json` or env vars

---
