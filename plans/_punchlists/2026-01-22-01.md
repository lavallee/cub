# Punchlist: 2026-01-22-01

## Add --fix flag to cub doctor command

The `cub doctor` command detects issues in beads state and configuration but cannot resolve them. Users must manually fix issues after diagnosis.

**Context:**
- `cub doctor` runs diagnostic checks (detects stale epics, configuration problems)
- Currently only reports issues; no auto-fix capability exists
- Users must manually resolve issues identified by the tool

**Requirement:**
Add a `--fix` flag to automatically resolve detected issues:
- Stale Epics: Close epics where all subtasks are complete
- Extensible for additional auto-fix logic as new issue types emerge

**Acceptance Criteria:**
1. `cub doctor --fix` flag is recognized and processes without error
2. Stale epics are automatically closed via `bd close <epic-id>` when `--fix` is used
3. User receives confirmation output (e.g., "Closed 2 stale epics: beads-xxx, beads-yyy")
4. Without `--fix` flag, behavior unchanged (diagnosis only, no changes)
5. All existing tests pass; new tests cover `--fix` behavior and stale epic detection

---

## Configure logging to show debug output with --debug flag

Currently, `cub --debug` accepts the flag and stores it in the context, but Python's standard logging module is never configured to output DEBUG-level messages. The flag is used for conditional `if debug:` statements, but no actual debug-level logging is implemented.

**Context:**
- The `--debug` flag is defined in `src/cub/cli/__init__.py:55` and stored in the Typer context
- Python's `logging` module is imported in some files (e.g., `src/cub/core/harness/claude.py:14`) but never used
- The `cub.utils.logging` module provides JSONL structured logging but doesn't integrate with Python's standard logging
- When users run `cub --debug run --once`, they expect to see debug-level output

**Acceptance Criteria:**
1. Configure Python's root logger to DEBUG level when `--debug` flag is passed
2. Ensure debug output is readable on the CLI (formatted nicely, not just raw logging)
3. Add strategic `logger.debug()` calls to key code paths (harness initialization, task execution, config loading)
4. Verify `cub --debug run --once` outputs debug-level messages to stderr/stdout
5. Ensure debug logging doesn't break JSONL structured logging in `cub.utils.logging`
6. Add tests for debug flag integration with logging configuration

---

## Display harness parameters when starting run

When `cub run` starts a task execution, show the harness name and its configuration parameters to help users understand the invocation.

**Context:**
Users should be able to see what parameters are being passed to the harness (model, temperature, max_tokens, API endpoint, etc.) to better understand harness behavior and aid debugging.

**Acceptance Criteria:**
- Display harness name and parameters when task execution begins
- Example output: "Running claude with model=claude-3-5-sonnet, temperature=0.7, max_tokens=4096"
- Parameters display consistently across all harness types
- Appropriate log level chosen (debug vs info) that displays without cluttering output
- Output verified to work with all harness backends (claude, codex, gemini, opencode)

---
