
at the end of a cub run with —epic, we should check if there are any tasks remaining for that epic. if all tasks are complete/closed, we can close/complete the epic as well. this should be done through the task backend interface, not directly to beads or json.

——

cub doctor should look for epics with no incomplete tasks and close them

——

by default, a cub run should create a new branch off of main (or —from-branch if it is specified). let’s add a flag —use-current-branch to explicitly allow cub run to work in the current branch.

because main can be out of date due to the way beads does worktrees, we should branch from origin/main, not local main.

——

in the cub:orient command, it currently says:

“## Arguments

$ARGUMENTS

If provided, this is the path to write the output file.”

this is wrong.

$ARGUMENTS are inputs for the command to evaluate (e.g. a spec).

cub:orient and other planning step commands should write to plans/[slug]


——

“cub spec —list” should work from any directory in a project, not just the root, it should find specs relative to project root. i should also show specs in all stages, not just researching.

——

for cub plan sequence commands (orient, etc) it should try to execute handoff for the user once the stage is approved by issuing the /cub: command. if it can’t do that, we should at least update the messaging to refer to the /cub: slash command, not the shell command.


——

there’s an issue with the way cub pr finalizes work. it successfully

cub pr issue:

  https://github.com/lavallee/cub/pull/54

Invoking Claude to manage CI and reviews...

This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason:
Error: No messages returned
    at ULB (/$bunfs/root/claude:5252:78)
    at processTicksAndRejections (native:7:39)


——

we should add a—stream option to cub pr so we can see what it’s doing. it should also surface information during —debug.

——

cub merge fails because after executing the merge because it tries to switch to main which doesn’t work when beads is active. it should catch that error and leave us on the current branch if it can’t do that.

