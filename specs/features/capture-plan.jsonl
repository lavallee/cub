{"id": "cub-CAP", "title": "Feature: Capture - Idea Collection System", "description": "# Epic: Capture - Idea Collection System\n\n## Overview\n\n`cub capture` provides low-friction idea collectionâ€”a scratchpad for thoughts, links, observations, and inspiration that feeds into the vision-to-tasks pipeline.\n\n## Goals\n\n- Zero friction: Capture an idea in seconds\n- Human-editable: Markdown files that can be manually created/edited\n- Searchable: Find captures by tag, content, or time\n- Progressive: Ideas can be refined through interactive sessions\n- Portable: Global captures for ideas not yet tied to a project\n\n## Success Criteria\n\n- `cub capture \"text\"` creates a file in `captures/` in < 1 second\n- `cub captures` lists captures with readable Rich table output\n- `cub capture -i` / `/cub:capture` guides user through structured capture session\n- Manually-created .md files are recognized and normalized by `organize-captures`\n- Global captures work when outside any git repository\n- `cub captures import` brings global captures into a project", "status": "open", "priority": 1, "issue_type": "epic", "labels": ["feature:capture"], "dependencies": []}
{"id": "cub-CAP.1", "title": "Create Capture Pydantic models", "description": "## Context\n\nDefine the data model for captures using Pydantic. This includes the frontmatter schema and capture metadata.\n\n## Implementation Hints\n\n**Recommended Model:** haiku\n**Estimated Duration:** 30m\n**Approach:** Create a simple Pydantic model matching the frontmatter schema defined in the spec.\n\n## Implementation Steps\n\n1. Create `src/cub/core/captures/models.py`\n2. Define `Capture` model with fields: id, created, tags, title, source, status, priority\n3. Add validators for ID format (cap-NNN)\n4. Add method to generate frontmatter YAML\n5. Add method to parse from frontmatter\n\n## Acceptance Criteria\n\n- [ ] Capture model validates all frontmatter fields\n- [ ] Can serialize to YAML frontmatter format\n- [ ] Can parse from YAML frontmatter\n- [ ] ID validation ensures cap-NNN format\n\n## Files Likely Involved\n\n- src/cub/core/captures/__init__.py (new)\n- src/cub/core/captures/models.py (new)", "status": "open", "priority": 1, "issue_type": "task", "labels": ["feature:capture", "model:haiku", "complexity:low"], "dependencies": [{"depends_on_id": "cub-CAP", "type": "parent-child"}]}
{"id": "cub-CAP.2", "title": "Implement capture storage layer", "description": "## Context\n\nImplement the storage layer for reading/writing captures from the filesystem. Handles both project and global captures.\n\n## Implementation Hints\n\n**Recommended Model:** sonnet\n**Estimated Duration:** 1h\n**Approach:** Create a CaptureStore class that handles file operations, ID generation, and directory management.\n\n## Implementation Steps\n\n1. Create `src/cub/core/captures/store.py`\n2. Implement `CaptureStore` class with:\n   - `get_captures_dir()` - returns project or global dir\n   - `list_captures()` - returns all captures\n   - `get_capture(id)` - returns single capture\n   - `save_capture(capture, content)` - writes capture file\n   - `next_id()` - generates next sequential ID\n3. Handle directory creation if needed\n4. Use python-frontmatter for parsing/writing\n\n## Acceptance Criteria\n\n- [ ] Can list captures from directory\n- [ ] Can read single capture by ID\n- [ ] Can write new capture with auto-generated ID\n- [ ] Handles missing directory gracefully\n- [ ] Works for both project (captures/) and global (~/.local/share/cub/captures/)\n\n## Files Likely Involved\n\n- src/cub/core/captures/store.py (new)\n- pyproject.toml (add python-frontmatter dependency)", "status": "open", "priority": 1, "issue_type": "task", "labels": ["feature:capture", "model:sonnet", "complexity:medium"], "dependencies": [{"depends_on_id": "cub-CAP", "type": "parent-child"}, {"depends_on_id": "cub-CAP.1", "type": "blocks"}]}
{"id": "cub-CAP.3", "title": "Implement cub capture command", "description": "## Context\n\nImplement the main `cub capture` CLI command for quick text capture.\n\n## Implementation Hints\n\n**Recommended Model:** sonnet\n**Estimated Duration:** 1h\n**Approach:** Create Typer command that accepts text and options, generates capture file.\n\n## Implementation Steps\n\n1. Create `src/cub/cli/capture.py`\n2. Implement `capture` command with:\n   - Positional arg for content (or stdin)\n   - `--tag` option (repeatable)\n   - `--name` option for explicit filename\n   - `--priority` option\n3. Generate slug from content\n4. Create capture file using store\n5. Output confirmation with file path\n\n## Acceptance Criteria\n\n- [ ] `cub capture \"text\"` creates capture file\n- [ ] `echo text | cub capture` works (stdin)\n- [ ] `--tag` adds tags to frontmatter\n- [ ] `--name` overrides auto-generated filename\n- [ ] Output shows file path and ID\n\n## Files Likely Involved\n\n- src/cub/cli/capture.py (new)\n- src/cub/cli/__init__.py (register command)", "status": "open", "priority": 1, "issue_type": "task", "labels": ["feature:capture", "model:sonnet", "complexity:medium"], "dependencies": [{"depends_on_id": "cub-CAP", "type": "parent-child"}, {"depends_on_id": "cub-CAP.2", "type": "blocks"}]}
{"id": "cub-CAP.4", "title": "Implement cub captures list command", "description": "## Context\n\nImplement the `cub captures` command for listing and viewing captures.\n\n## Implementation Hints\n\n**Recommended Model:** sonnet\n**Estimated Duration:** 1h\n**Approach:** Create Typer command group with list as default, plus show/edit/archive subcommands.\n\n## Implementation Steps\n\n1. Create `src/cub/cli/captures.py`\n2. Implement default list view with Rich table:\n   - ID, date, title, tags (truncated)\n   - `--all` to show all (default: 20)\n   - `--tag` filter\n   - `--since` filter\n   - `--search` full-text\n   - `--global` for global captures\n   - `--json` output\n3. Implement `show <id>` subcommand\n4. Implement `edit <id>` (opens $EDITOR)\n5. Implement `archive <id>` (sets status)\n\n## Acceptance Criteria\n\n- [ ] `cub captures` shows table of recent captures\n- [ ] `cub captures --tag X` filters by tag\n- [ ] `cub captures show <id>` displays full capture\n- [ ] `cub captures edit <id>` opens in editor\n- [ ] `cub captures archive <id>` marks as archived\n\n## Files Likely Involved\n\n- src/cub/cli/captures.py (new)\n- src/cub/cli/__init__.py (register command)", "status": "open", "priority": 1, "issue_type": "task", "labels": ["feature:capture", "model:sonnet", "complexity:medium"], "dependencies": [{"depends_on_id": "cub-CAP", "type": "parent-child"}, {"depends_on_id": "cub-CAP.2", "type": "blocks"}]}
{"id": "cub-CAP.5", "title": "Implement captures import command", "description": "## Context\n\nImplement `cub captures import` to bring global captures into the current project.\n\n## Implementation Hints\n\n**Recommended Model:** haiku\n**Estimated Duration:** 30m\n**Approach:** Copy capture file from global to project directory, optionally reassign ID.\n\n## Implementation Steps\n\n1. Add `import` subcommand to captures.py\n2. Take capture ID as argument\n3. Copy from global to project captures/\n4. Optionally reassign ID to project sequence\n5. Show confirmation\n\n## Acceptance Criteria\n\n- [ ] `cub captures import <id>` copies from global to project\n- [ ] File renamed with new ID if needed\n- [ ] Confirmation shows new location\n\n## Files Likely Involved\n\n- src/cub/cli/captures.py (update)", "status": "open", "priority": 2, "issue_type": "task", "labels": ["feature:capture", "model:haiku", "complexity:low"], "dependencies": [{"depends_on_id": "cub-CAP", "type": "parent-child"}, {"depends_on_id": "cub-CAP.4", "type": "blocks"}]}
{"id": "cub-CAP.6", "title": "Implement cub capture -i interactive mode", "description": "## Context\n\nImplement interactive capture mode that launches the /cub:capture skill for guided idea exploration.\n\n## Implementation Hints\n\n**Recommended Model:** sonnet\n**Estimated Duration:** 45m\n**Approach:** When -i flag is passed, invoke Claude with the capture skill.\n\n## Implementation Steps\n\n1. Add `-i/--interactive` flag to capture command\n2. When set, invoke Claude CLI with `/cub:capture` skill\n3. Pass optional topic as argument to skill\n4. After Claude exits, check for created capture file\n\n## Acceptance Criteria\n\n- [ ] `cub capture -i` launches Claude with capture skill\n- [ ] `cub capture -i \"topic\"` seeds the conversation\n- [ ] Skill creates capture file on completion\n\n## Files Likely Involved\n\n- src/cub/cli/capture.py (update)\n\n## Notes\n\nThe /cub:capture skill already exists at .claude/commands/cub:capture.md", "status": "open", "priority": 1, "issue_type": "task", "labels": ["feature:capture", "model:sonnet", "complexity:medium"], "dependencies": [{"depends_on_id": "cub-CAP", "type": "parent-child"}, {"depends_on_id": "cub-CAP.3", "type": "blocks"}]}
{"id": "cub-CAP.7", "title": "Implement cub organize-captures command", "description": "## Context\n\nImplement command to normalize manually-added capture files - add missing frontmatter, fix filenames.\n\n## Implementation Hints\n\n**Recommended Model:** sonnet\n**Estimated Duration:** 1h\n**Approach:** Scan captures directory, identify files needing normalization, apply fixes.\n\n## Implementation Steps\n\n1. Create `src/cub/cli/organize_captures.py`\n2. Implement `organize-captures` command:\n   - Scan captures/ for .md files\n   - Check each for valid frontmatter\n   - For files without: generate ID, add frontmatter\n   - For files with wrong naming: rename to date-slug format\n   - `--dry-run` to preview changes\n   - Interactive confirmation unless `--yes`\n3. Register command in CLI\n\n## Acceptance Criteria\n\n- [ ] Detects files without frontmatter\n- [ ] Generates IDs for new files\n- [ ] Normalizes filenames to date-slug format\n- [ ] `--dry-run` shows what would change\n- [ ] Confirms before making changes\n\n## Files Likely Involved\n\n- src/cub/cli/organize_captures.py (new)\n- src/cub/cli/__init__.py (register command)", "status": "open", "priority": 2, "issue_type": "task", "labels": ["feature:capture", "model:sonnet", "complexity:medium"], "dependencies": [{"depends_on_id": "cub-CAP", "type": "parent-child"}, {"depends_on_id": "cub-CAP.2", "type": "blocks"}]}
{"id": "cub-CAP.8", "title": "Add auto-tagging for captures", "description": "## Context\n\nImplement basic auto-tagging that suggests tags based on capture content.\n\n## Implementation Hints\n\n**Recommended Model:** haiku\n**Estimated Duration:** 30m\n**Approach:** Simple keyword extraction - look for common terms like 'git', 'ui', 'api', etc.\n\n## Implementation Steps\n\n1. Create `src/cub/core/captures/tagging.py`\n2. Implement `suggest_tags(content)` function:\n   - Define common tag vocabulary\n   - Simple keyword matching (case-insensitive)\n   - Return list of suggested tags\n3. Integrate into capture command\n4. Add `--no-auto-tags` flag to disable\n\n## Acceptance Criteria\n\n- [ ] Content mentioning 'git' gets 'git' tag suggested\n- [ ] Multiple tags can be suggested\n- [ ] `--no-auto-tags` disables auto-tagging\n- [ ] User-provided `--tag` adds to auto-tags\n\n## Files Likely Involved\n\n- src/cub/core/captures/tagging.py (new)\n- src/cub/cli/capture.py (update)", "status": "open", "priority": 2, "issue_type": "task", "labels": ["feature:capture", "model:haiku", "complexity:low"], "dependencies": [{"depends_on_id": "cub-CAP", "type": "parent-child"}, {"depends_on_id": "cub-CAP.3", "type": "blocks"}]}
{"id": "cub-CAP.9", "title": "Add tests for capture functionality", "description": "## Context\n\nAdd pytest tests for the capture feature - models, storage, and CLI commands.\n\n## Implementation Hints\n\n**Recommended Model:** sonnet\n**Estimated Duration:** 1h\n**Approach:** Test each layer in isolation, use tmp_path for file operations.\n\n## Implementation Steps\n\n1. Create `tests/test_captures/test_models.py`:\n   - Test Capture model validation\n   - Test frontmatter serialization\n2. Create `tests/test_captures/test_store.py`:\n   - Test list/get/save operations\n   - Test ID generation\n   - Use tmp_path fixture\n3. Create `tests/test_captures/test_cli.py`:\n   - Test capture command\n   - Test captures list command\n   - Mock file system\n\n## Acceptance Criteria\n\n- [ ] Model tests pass\n- [ ] Store tests pass with temp directory\n- [ ] CLI tests verify correct output\n- [ ] >80% coverage on capture modules\n\n## Files Likely Involved\n\n- tests/test_captures/__init__.py (new)\n- tests/test_captures/test_models.py (new)\n- tests/test_captures/test_store.py (new)\n- tests/test_captures/test_cli.py (new)", "status": "open", "priority": 2, "issue_type": "task", "labels": ["feature:capture", "model:sonnet", "complexity:medium"], "dependencies": [{"depends_on_id": "cub-CAP", "type": "parent-child"}, {"depends_on_id": "cub-CAP.3", "type": "blocks"}, {"depends_on_id": "cub-CAP.4", "type": "blocks"}]}
